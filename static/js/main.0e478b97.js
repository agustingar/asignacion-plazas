/*! For license information please see main.0e478b97.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===D?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return P(e(t))}catch(Qt){}}return null}var L=Array.isArray,R=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},M=[],F=-1;function j(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function B(e,t){F++,M[F]=e.current,e.current=t}var U=j(null),$=j(null),q=j(null),K=j(null);function H(e,t){switch(B(q,t),B($,e),B(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(U),B(U,e)}function G(){V(U),V($),V(q)}function W(e){null!==e.memoizedState&&B(K,e);var t=U.current,n=od(t,e.type);t!==n&&(B($,e),B(U,n))}function Q(e){$.current===e&&(V(U),V($)),K.current===e&&(V(K),Qd._currentValue=z)}var Y=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"===typeof le&&ue(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ve(r):0!==(o&=a)?i=ve(o):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~s)?i=ve(a):0!==o?i=ve(o):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function ke(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function _e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var De=Math.random().toString(36).slice(2),Pe="__reactFiber$"+De,Le="__reactProps$"+De,Re="__reactContainer$"+De,Oe="__reactEvents$"+De,ze="__reactListeners$"+De,Me="__reactHandles$"+De,Fe="__reactResources$"+De,je="__reactMarker$"+De;function Ve(e){delete e[Pe],delete e[Le],delete e[Oe],delete e[ze],delete e[Me]}function Be(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[Pe]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function qe(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[je]=!0}var He=new Set,Ge={};function We(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)He.add(t[e])}var Ye,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(Qt){var t=Qt.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Xe=-1<Qt.stack.indexOf("\n    at")?" (<anonymous>)":-1<Qt.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Xe}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Qt){var r=Qt}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),u=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(Qt){return"\nError generating stack: "+Qt.message+"\n"+Qt.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ut(t)):null!=n?vt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(L(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Et(e,s,t[s])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Lt=null;function Rt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Le]||null;if(!i)throw Error(o(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Ot=!1;function zt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Lt)&&(Uu(),Pt&&(t=Pt,e=Lt,Lt=Pt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Le]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Ft)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Rh){jt=!1}var Bt=null,Ut=null,$t=null;function qt(){if($t)return $t;var e,t,n=Ut,r=n.length,i="value"in Bt?Bt.value:Bt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ht(){return!0}function Gt(){return!1}function Wt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Ht:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ht)},persist:function(){},isPersistent:Ht}),t}var Yt,Xt,Jt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},en=Wt(Zt),tn=h({},Zt,{view:0,detail:0}),nn=Wt(tn),rn=h({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),sn=Wt(rn),on=Wt(h({},rn,{dataTransfer:0})),an=Wt(h({},tn,{relatedTarget:0})),ln=Wt(h({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Wt(h({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Wt(h({},Zt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function gn(){return pn}var mn=Wt(h({},tn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Wt(h({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Wt(h({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),bn=Wt(h({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Wt(h({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Wt(h({},Zt,{newState:0,oldState:0})),Sn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,En=null;Ft&&"documentMode"in document&&(En=document.documentMode);var Tn=Ft&&"TextEvent"in window&&!En,In=Ft&&(!kn||En&&8<En&&11>=En),Cn=String.fromCharCode(32),_n=!1;function Nn(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Lt?Lt.push(r):Lt=[r]:Pt=r,0<(t=Kc(t,"onChange")).length&&(n=new en("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,zn=null;function Mn(e){Mc(e,0)}function Fn(e){if(ht($e(e)))return e}function jn(e,t){if("change"===e)return t}var Vn=!1;if(Ft){var Bn;if(Ft){var Un="oninput"in document;if(!Un){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),Un="function"===typeof $n.oninput}Bn=Un}else Bn=!1;Vn=Bn&&(!document.documentMode||9<document.documentMode)}function qn(){On&&(On.detachEvent("onpropertychange",Kn),zn=On=null)}function Kn(e){if("value"===e.propertyName&&Fn(zn)){var t=[];Rn(t,zn,e,Dt(e)),zt(Mn,t)}}function Hn(e,t,n){"focusin"===e?(qn(),zn=n,(On=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&qn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(zn)}function Wn(e,t){if("click"===e)return Fn(t)}function Qn(e,t){if("input"===e||"change"===e)return Fn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rr=Ft&&"documentMode"in document&&11>=document.documentMode,ir=null,sr=null,or=null,ar=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==ir||ir!==ft(r)||("selectionStart"in(r=ir)&&nr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Xn(or,r)||(or=r,0<(r=Kc(sr,"onSelect")).length&&(t=new en("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},dr={},hr={};function fr(e){if(dr[e])return dr[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return dr[e]=n[t];return e}Ft&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=fr("animationend"),gr=fr("animationiteration"),mr=fr("animationstart"),yr=fr("transitionrun"),vr=fr("transitionstart"),br=fr("transitioncancel"),wr=fr("transitionend"),xr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){xr.set(e,t),We(t,[e])}Sr.push("scrollEnd");var Er=new WeakMap;function Tr(e,t){if("object"===typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Er.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ir=[],Cr=0,_r=0;function Nr(){for(var e=Cr,t=_r=Cr=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var i=Ir[t];Ir[t++]=null;var s=Ir[t];if(Ir[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Lr(n,i,s)}}function Ar(e,t,n,r){Ir[Cr++]=e,Ir[Cr++]=t,Ir[Cr++]=n,Ir[Cr++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return Ar(e,t,n,r),Rr(e)}function Pr(e,t){return Ar(e,null,null,t),Rr(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Rr(e){if(50<Lu)throw Lu=0,Ru=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function zr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new zr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Fr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Mr(31,n,t,i)).elementType=C,e.lanes=s,e;case m:return Ur(n.children,i,s,t);case y:a=8,i|=24;break;case v:return(e=Mr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case k:return(e=Mr(13,n,t,i)).elementType=k,e.lanes=s,e;case E:return(e=Mr(19,n,t,i)).elementType=E,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case w:a=9;break e;case S:a=11;break e;case T:a=14;break e;case I:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ur(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function $r(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=[],Hr=0,Gr=null,Wr=0,Qr=[],Yr=0,Xr=null,Jr=1,Zr="";function ei(e,t){Kr[Hr++]=Wr,Kr[Hr++]=Gr,Gr=e,Wr=t}function ti(e,t,n){Qr[Yr++]=Jr,Qr[Yr++]=Zr,Qr[Yr++]=Xr,Xr=e;var r=Jr;e=Zr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jr=1<<32-fe(t)+i|n<<i|r,Zr=s+e}else Jr=1<<s|n<<i|r,Zr=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Gr;)Gr=Kr[--Hr],Kr[Hr]=null,Wr=Kr[--Hr],Kr[Hr]=null;for(;e===Xr;)Xr=Qr[--Yr],Qr[Yr]=null,Zr=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null}var ii=null,si=null,oi=!1,ai=null,li=!1,ui=Error(o(519));function ci(e){throw mi(Tr(Error(o(418,"")),e)),ui}function di(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Le]=r,n){case"dialog":Fc("cancel",t),Fc("close",t);break;case"iframe":case"object":case"embed":Fc("load",t);break;case"video":case"audio":for(n=0;n<Oc.length;n++)Fc(Oc[n],t);break;case"source":Fc("error",t);break;case"img":case"image":case"link":Fc("error",t),Fc("load",t);break;case"details":Fc("toggle",t);break;case"input":Fc("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fc("invalid",t);break;case"textarea":Fc("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xc(t.textContent,n)?(null!=r.popover&&(Fc("beforetoggle",t),Fc("toggle",t)),null!=r.onScroll&&Fc("scroll",t),null!=r.onScrollEnd&&Fc("scrollend",t),null!=r.onClick&&(t.onclick=Jc),t=!0):t=!1,t||ci(e)}function hi(e){for(ii=e.return;ii;)switch(ii.tag){case 5:case 13:return void(li=!1);case 27:case 3:return void(li=!0);default:ii=ii.return}}function fi(e){if(e!==ii)return!1;if(!oi)return hi(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&si&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){si=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}si=null}}else 27===n?(n=si,pd(e.type)?(e=bd,bd=null,si=e):si=n):si=ii?vd(e.stateNode.nextSibling):null;return!0}function pi(){si=ii=null,oi=!1}function gi(){var e=ai;return null!==e&&(null===wu?wu=e:wu.push.apply(wu,e),ai=null),e}function mi(e){null===ai?ai=[e]:ai.push(e)}var yi=j(null),vi=null,bi=null;function wi(e,t,n){B(yi,t._currentValue),t._currentValue=n}function xi(e){e._currentValue=yi.current,V(yi)}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Si(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Si(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ei(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Qd):e=[Qd])}i=i.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function Ti(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ii(e){vi=e,bi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ni(vi,e)}function _i(e,t){return null===vi&&Ii(e),Ni(e,t)}function Ni(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bi){if(null===e)throw Error(o(308));bi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bi=bi.next=t;return n}var Ai="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Di=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Li={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ri(){return{controller:new Ai,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Di(Pi,(function(){e.controller.abort()}))}var zi=null,Mi=0,Fi=0,ji=null;function Vi(){if(0===--Mi&&null!==zi){null!==ji&&(ji.status="fulfilled");var e=zi;zi=null,Fi=0,ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zi){var n=zi=[];Mi=0,Fi=Ac(),ji={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(Vi,Vi)}(0,t),null!==Bi&&Bi(e,t)};var Ui=j(null);function $i(){var e=Ui.current;return null!==e?e:iu.pooledCache}function qi(e,t){B(Ui,null===t?Ui.current:t.pool)}function Ki(){var e=$i();return null===e?null:{parent:Li._currentValue,pool:e}}var Hi=Error(o(460)),Gi=Error(o(474)),Wi=Error(o(542)),Qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ts(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=iu)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ts(e=t.reason),e}throw Zi=t,Hi}}var Zi=null;function es(){if(null===Zi)throw Error(o(459));var e=Zi;return Zi=null,e}function ts(e){if(e===Hi||e===Wi)throw Error(o(483))}var ns=!1;function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ru)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Rr(e),Lr(e,null,n),t}return Ar(e,r,t,n),Rr(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var us=!1;function cs(){if(us){if(null!==ji)throw ji}}function ds(e,t,n,r){us=!1;var i=e.updateQueue;ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,c=u=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(ou&f)===f:(r&f)===f){0!==f&&f===Fi&&(us=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,d,f):g)||void 0===f)break e;d=h({},d,f);break e;case 2:ns=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===s&&(i.shared.lanes=0),pu|=o,e.lanes=o,e.memoizedState=d}}function hs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function fs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var ps=j(null),gs=j(0);function ms(e,t){B(gs,e=hu),B(ps,t),hu=e|t.baseLanes}function ys(){B(gs,hu),B(ps,ps.current)}function vs(){hu=gs.current,V(ps),V(gs)}var bs=0,ws=null,xs=null,Ss=null,ks=!1,Es=!1,Ts=!1,Is=0,Cs=0,_s=null,Ns=0;function As(){throw Error(o(321))}function Ds(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return bs=s,ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Go:Wo,Ts=!1,s=n(r,i),Ts=!1,Es&&(s=Rs(t,n,r,i)),Ls(e),s}function Ls(e){R.H=Ho;var t=null!==xs&&null!==xs.next;if(bs=0,Ss=xs=ws=null,ks=!1,Cs=0,_s=null,t)throw Error(o(300));null===e||_a||null!==(e=e.dependencies)&&Ti(e)&&(_a=!0)}function Rs(e,t,n,r){ws=e;var i=0;do{if(Es&&(_s=null),Cs=0,Es=!1,25<=i)throw Error(o(301));if(i+=1,Ss=xs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}R.H=Qo,s=t(n,r)}while(Es);return s}function Os(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Bs(t):t,e=e.useState()[0],(null!==xs?xs.memoizedState:null)!==e&&(ws.flags|=1024),t}function zs(){var e=0!==Is;return Is=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ks=!1}bs=0,Ss=xs=ws=null,Es=!1,Cs=Is=0,_s=null}function js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ss?ws.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function Vs(){if(null===xs){var e=ws.alternate;e=null!==e?e.memoizedState:null}else e=xs.next;var t=null===Ss?ws.memoizedState:Ss.next;if(null!==t)Ss=t,xs=e;else{if(null===e){if(null===ws.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(xs=e).memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},null===Ss?ws.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function Bs(e){var t=Cs;return Cs+=1,null===_s&&(_s=[]),e=Ji(_s,e,t),t=ws,null===(null===Ss?t.memoizedState:Ss.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Go:Wo),e}function Us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bs(e);if(e.$$typeof===x)return Ci(e)}throw Error(o(438,String(e)))}function $s(e){var t=null,n=ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ws.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=_;return t.index++,n}function qs(e,t){return"function"===typeof t?t(e):t}function Ks(e){return Hs(Vs(),xs,e)}function Hs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,u=null,c=t=i.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(ou&h)===h:(bs&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Fi&&(d=!0);else{if((bs&f)===f){c=c.next,f===Fi&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,a=s):u=u.next=h,ws.lanes|=f,pu|=f}h=c.action,Ts&&n(s,h),s=c.hasEagerState?c.eagerState:n(s,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=s):u=u.next=f,ws.lanes|=h,pu|=h;c=c.next}while(null!==c&&c!==t);if(null===u?a=s:u.next=l,!Yn(s,e.memoizedState)&&(_a=!0,d&&null!==(n=ji)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gs(e){var t=Vs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Yn(s,t.memoizedState)||(_a=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ws(e,t,n){var r=ws,i=Vs(),s=oi;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Yn((xs||i).memoizedState,n);if(a&&(i.memoizedState=n,_a=!0),i=i.queue,vo(2048,8,Xs.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Ss&&1&Ss.memoizedState.tag){if(r.flags|=2048,go(9,{destroy:void 0,resource:void 0},Ys.bind(null,r,i,n,t),null),null===iu)throw Error(o(349));s||0!==(124&bs)||Qs(r,t,n)}return n}function Qs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ys(e,t,n,r){t.value=n,t.getSnapshot=r,Js(t)&&Zs(e)}function Xs(e,t,n){return n((function(){Js(t)&&Zs(e)}))}function Js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Zs(e){var t=Pr(e,2);null!==t&&Mu(t,e,2)}function eo(e){var t=js();if("function"===typeof e){var n=e;if(e=n(),Ts){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t}function to(e,t,n,r){return e.baseState=n,Hs(e,xs,"function"===typeof r?r:qs)}function no(e,t,n,r,i){if($o(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==R.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,ro(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ro(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=R.T,o={};R.T=o;try{var a=n(i,r),l=R.S;null!==l&&l(o,a),io(e,t,a)}catch(u){oo(e,t,u)}finally{R.T=s}}else try{io(e,t,s=n(i,r))}catch(c){oo(e,t,c)}}function io(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){so(e,t,n)}),(function(n){return oo(e,t,n)})):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,ao(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ro(e,n)))}function oo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ao(t),t=t.next}while(t!==r)}e.action=null}function ao(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lo(e,t){return t}function uo(e,t){if(oi){var n=iu.formState;if(null!==n){e:{var r=ws;if(oi){if(si){t:{for(var i=si,s=li;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){si=vd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=js()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},n.queue=r,n=Vo.bind(null,ws,r),r.dispatch=n,r=eo(!1),s=Uo.bind(null,ws,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=js()).queue=i,n=no.bind(null,ws,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return ho(Vs(),xs,e)}function ho(e,t,n){if(t=Hs(e,t,lo)[0],e=Ks(qs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Bs(t)}catch(Qt){if(Qt===Hi)throw Wi;throw Qt}else r=t;var i=(t=Vs()).queue,s=i.dispatch;return n!==t.memoizedState&&(ws.flags|=2048,go(9,{destroy:void 0,resource:void 0},fo.bind(null,i,n),null)),[r,s,e]}function fo(e,t){e.action=t}function po(e){var t=Vs(),n=xs;if(null!==n)return ho(t,n,e);Vs(),t=t.memoizedState;var r=(n=Vs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function go(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mo(){return Vs().memoizedState}function yo(e,t,n,r){var i=js();r=void 0===r?null:r,ws.flags|=e,i.memoizedState=go(1|t,{destroy:void 0,resource:void 0},n,r)}function vo(e,t,n,r){var i=Vs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==xs&&null!==r&&Ds(r,xs.memoizedState.deps)?i.memoizedState=go(t,s,n,r):(ws.flags|=e,i.memoizedState=go(1|t,s,n,r))}function bo(e,t){yo(8390656,8,e,t)}function wo(e,t){vo(2048,8,e,t)}function xo(e,t){return vo(4,2,e,t)}function So(e,t){return vo(4,4,e,t)}function ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Eo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,ko.bind(null,t,e),n)}function To(){}function Io(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ds(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ds(t,r[1]))return r[0];if(r=e(),Ts){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function _o(e,t,n){return void 0===n||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=n,e=zu(),ws.lanes|=e,pu|=e,n)}function No(e,t,n,r){return Yn(n,t)?n:null!==ps.current?(e=_o(e,n,r),Yn(e,t)||(_a=!0),e):0===(42&bs)?(_a=!0,e.memoizedState=n):(e=zu(),ws.lanes|=e,pu|=e,t)}function Ao(e,t,n,r,i){var s=O.p;O.p=0!==s&&8>s?s:8;var o=R.T,a={};R.T=a,Uo(e,!1,t,n);try{var l=i(),u=R.S;if(null!==u&&u(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Bo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Ou());else Bo(e,t,r,Ou())}catch(c){Bo(e,t,{then:function(){},status:"rejected",reason:c},Ou())}finally{O.p=s,R.T=o}}function Do(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Lo(e).queue;Ao(e,i,t,z,null===n?Do:function(){return Ro(e),n(r)})}function Lo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:z},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ro(e){Bo(e,Lo(e).next.queue,{},Ou())}function Oo(){return Ci(Qd)}function zo(){return Vs().memoizedState}function Mo(){return Vs().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ou(),r=os(t,e=ss(n),n);return null!==r&&(Mu(r,t,n),as(r,t,n)),t={cache:Ri()},void(e.payload=t)}t=t.return}}function jo(e,t,n){var r=Ou();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e)?qo(t,n):null!==(n=Dr(e,t,n,r))&&(Mu(n,e,r),Ko(n,t,r))}function Vo(e,t,n){Bo(e,t,n,Ou())}function Bo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))qo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o))return Ar(e,t,i,0),null===iu&&Nr(),!1}catch(l){}if(null!==(n=Dr(e,t,i,r)))return Mu(n,e,r),Ko(n,t,r),!0}return!1}function Uo(e,t,n,r){if(r={lane:2,revertLane:Ac(),action:r,hasEagerState:!1,eagerState:null,next:null},$o(e)){if(t)throw Error(o(479))}else null!==(t=Dr(e,n,r,2))&&Mu(t,e,2)}function $o(e){var t=e.alternate;return e===ws||null!==t&&t===ws}function qo(e,t){Es=ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ko(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Ho={readContext:Ci,use:Us,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As},Go={readContext:Ci,use:Us,useCallback:function(e,t){return js().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=js();t=void 0===t?null:t;var r=e();if(Ts){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=js();if(void 0!==n){var i=n(t);if(Ts){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=jo.bind(null,ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},js().memoizedState=e},useState:function(e){var t=(e=eo(e)).queue,n=Vo.bind(null,ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:To,useDeferredValue:function(e,t){return _o(js(),e,t)},useTransition:function(){var e=eo(!1);return e=Ao.bind(null,ws,e.queue,!0,!1),js().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ws,i=js();if(oi){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===iu)throw Error(o(349));0!==(124&ou)||Qs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,bo(Xs.bind(null,r,s,e),[e]),r.flags|=2048,go(9,{destroy:void 0,resource:void 0},Ys.bind(null,r,s,n,t),null),n},useId:function(){var e=js(),t=iu.identifierPrefix;if(oi){var n=Zr;t="\xab"+t+"R"+(n=(Jr&~(1<<32-fe(Jr)-1)).toString(32)+n),0<(n=Is++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ns++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:uo,useActionState:uo,useOptimistic:function(e){var t=js();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Uo.bind(null,ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:$s,useCacheRefresh:function(){return js().memoizedState=Fo.bind(null,ws)}},Wo={readContext:Ci,use:Us,useCallback:Io,useContext:Ci,useEffect:wo,useImperativeHandle:Eo,useInsertionEffect:xo,useLayoutEffect:So,useMemo:Co,useReducer:Ks,useRef:mo,useState:function(){return Ks(qs)},useDebugValue:To,useDeferredValue:function(e,t){return No(Vs(),xs.memoizedState,e,t)},useTransition:function(){var e=Ks(qs)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Ws,useId:zo,useHostTransitionStatus:Oo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return to(Vs(),0,e,t)},useMemoCache:$s,useCacheRefresh:Mo},Qo={readContext:Ci,use:Us,useCallback:Io,useContext:Ci,useEffect:wo,useImperativeHandle:Eo,useInsertionEffect:xo,useLayoutEffect:So,useMemo:Co,useReducer:Gs,useRef:mo,useState:function(){return Gs(qs)},useDebugValue:To,useDeferredValue:function(e,t){var n=Vs();return null===xs?_o(n,e,t):No(n,xs.memoizedState,e,t)},useTransition:function(){var e=Gs(qs)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Ws,useId:zo,useHostTransitionStatus:Oo,useFormState:po,useActionState:po,useOptimistic:function(e,t){var n=Vs();return null!==xs?to(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$s,useCacheRefresh:Mo},Yo=null,Xo=0;function Jo(e){var t=Xo;return Xo+=1,null===Yo&&(Yo=[]),Ji(Yo,e,t)}function Zo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ea(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ta(e){return(0,e._init)(e._payload)}function na(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=jr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$r(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&ta(s)===t.type)?(Zo(t=i(t,n.props),n),t.return=e,t):(Zo(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=$r(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Zo(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=qr(t,e.mode,n)).return=e,t;case I:return h(e,t=(0,t._init)(t._payload),n)}if(L(t)||A(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Jo(t),n);if(t.$$typeof===x)return h(e,_i(e,t),n);ea(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?u(e,t,n,r):null;case g:return n.key===i?c(e,t,n,r):null;case I:return f(e,t,n=(i=n._init)(n._payload),r)}if(L(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Jo(n),r);if(n.$$typeof===x)return f(e,t,_i(e,n),r);ea(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(L(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Jo(r),i);if(r.$$typeof===x)return y(e,t,n,_i(t,r),i);ea(t,r)}return null}function v(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===m){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===I&&ta(b)===u.type){n(l,u.sibling),Zo(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===m?((d=Ur(c.props.children,l.mode,d,c.key)).return=l,l=d):(Zo(d=Br(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return a(l);case g:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=qr(c,l.mode,d)).return=l,l=d}return a(l);case I:return v(l,u,c=(b=c._init)(c._payload),d)}if(L(c))return function(i,o,a,l){for(var u=null,c=null,d=o,p=o=0,g=null;null!==d&&p<a.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(i,d,a[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=s(m,o,p),null===c?u=m:c.sibling=m,c=m,d=g}if(p===a.length)return n(i,d),oi&&ei(i,p),u;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===c?u=d:c.sibling=d,c=d);return oi&&ei(i,p),u}for(d=r(d);p<a.length;p++)null!==(g=y(d,i,p,a[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),o=s(g,o,p),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),oi&&ei(i,p),u}(l,u,c,d);if(A(c)){if("function"!==typeof(b=A(c)))throw Error(o(150));return function(i,a,l,u){if(null==l)throw Error(o(151));for(var c=null,d=null,p=a,g=a=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(i,p,v.value,u);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),a=s(b,a,g),null===d?c=b:d.sibling=b,d=b,p=m}if(v.done)return n(i,p),oi&&ei(i,g),c;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(a=s(v,a,g),null===d?c=v:d.sibling=v,d=v);return oi&&ei(i,g),c}for(p=r(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,u))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?c=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(i,e)})),oi&&ei(i,g),c}(l,u,c=b.call(c),d)}if("function"===typeof c.then)return v(l,u,Jo(c),d);if(c.$$typeof===x)return v(l,u,_i(l,c),d);ea(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=$r(c,l.mode,d)).return=l,l=d),a(l)):n(l,u)}return function(e,t,n,r){try{Xo=0;var i=v(e,t,n,r);return Yo=null,i}catch(Qt){if(Qt===Hi||Qt===Wi)throw Qt;var s=Mr(29,Qt,null,e.mode);return s.lanes=r,s.return=e,s}}}var ra=na(!0),ia=na(!1),sa=j(null),oa=null;function aa(e){var t=e.alternate;B(da,1&da.current),B(sa,e),null===oa&&(null===t||null!==ps.current||null!==t.memoizedState)&&(oa=e)}function la(e){if(22===e.tag){if(B(da,da.current),B(sa,e),null===oa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(oa=e)}}else ua()}function ua(){B(da,da.current),B(sa,sa.current)}function ca(e){V(sa),oa===e&&(oa=null),V(da)}var da=j(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=ss(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=os(e,i,r))&&(Mu(t,e,r),as(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=ss(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=os(e,i,r))&&(Mu(t,e,r),as(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ou(),r=ss(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=os(e,r,n))&&(Mu(t,e,n),as(t,e,n))}};function ga(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,s))}function ma(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ya(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var va="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){va(e)}function wa(e){console.error(e)}function xa(e){va(e)}function Sa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Ea(e,t,n){return(n=ss(n)).tag=3,n.payload={element:null},n.callback=function(){Sa(e,t)},n}function Ta(e){return(e=ss(e)).tag=3,e}function Ia(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){ka(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,r),"function"!==typeof i&&(null===Tu?Tu=new Set([this]):Tu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),_a=!1;function Na(e,t,n,r){t.child=null===e?ia(t,null,n,r):ra(t,e.child,n,r)}function Aa(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ii(t),r=Ps(e,t,n,o,s,i),a=zs(),null===e||_a?(oi&&a&&ni(t),t.flags|=1,Na(e,t,r,i),t.child):(Ms(e,t,i),Ya(e,t,i))}function Da(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!Xa(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=jr(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Xn(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,!Xa(e,i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return za(e,t,n,r,i)}function La(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Ra(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ra(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qi(0,null!==s?s.cachePool:null),null!==s?ms(t,s):ys(),la(t)}else null!==s?(qi(0,s.cachePool),ms(t,s),ua(),t.memoizedState=null):(null!==e&&qi(0,null),ys(),ua());return Na(e,t,i,n),t.child}function Ra(e,t,n,r){var i=$i();return i=null===i?null:{parent:Li._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&qi(0,null),ys(),la(t),null!==e&&Ei(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function za(e,t,n,r,i){return Ii(t),n=Ps(e,t,n,r,void 0,i),r=zs(),null===e||_a?(oi&&r&&ni(t),t.flags|=1,Na(e,t,n,i),t.child):(Ms(e,t,i),Ya(e,t,i))}function Ma(e,t,n,r,i,s){return Ii(t),t.updateQueue=null,n=Rs(t,r,n,i),Ls(e),r=zs(),null===e||_a?(oi&&r&&ni(t),t.flags|=1,Na(e,t,n,s),t.child):(Ms(e,t,s),Ya(e,t,s))}function Fa(e,t,n,r,i){if(Ii(t),null===t.stateNode){var s=Or,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=pa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},rs(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ci(o):Or,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(fa(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&pa.enqueueReplaceState(s,s.state,null),ds(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ya(n,a);s.props=l;var u=s.context,c=n.contextType;o=Or,"object"===typeof c&&null!==c&&(o=Ci(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||u!==o)&&ma(t,s,r,o),ns=!1;var h=t.memoizedState;s.state=h,ds(t,r,s,i),cs(),u=t.memoizedState,a||h!==u||ns?("function"===typeof d&&(fa(t,n,d,r),u=t.memoizedState),(l=ns||ga(t,n,l,r,h,u,o))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,is(e,t),c=ya(n,o=t.memoizedProps),s.props=c,d=t.pendingProps,h=s.context,u=n.contextType,l=Or,"object"===typeof u&&null!==u&&(l=Ci(u)),(u="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ma(t,s,r,l),ns=!1,h=t.memoizedState,s.state=h,ds(t,r,s,i),cs();var f=t.memoizedState;o!==d||h!==f||ns||null!==e&&null!==e.dependencies&&Ti(e.dependencies)?("function"===typeof a&&(fa(t,n,a,r),f=t.memoizedState),(c=ns||ga(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&Ti(e.dependencies))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Oa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ra(t,e.child,null,i),t.child=ra(t,null,n,i)):Na(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ya(e,t,i),e}function ja(e,t,n,r){return pi(),t.flags|=256,Na(e,t,n,r),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ba(e){return{baseLanes:e,cachePool:Ki()}}function Ua(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yu),e}function $a(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&da.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(s?aa(t):ua(),oi){var l,u=si;if(l=u){e:{for(l=u,u=li;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=vd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Xr?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ii=t,si=null,l=!0):l=!1}l||ci(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return yd(u)?t.lanes=32:t.lanes=536870912,null;ca(t)}return u=i.children,i=i.fallback,s?(ua(),u=Ka({mode:"hidden",children:u},s=t.mode),i=Ur(i,s,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(s=t.child).memoizedState=Ba(n),s.childLanes=Ua(e,r,n),t.memoizedState=Va,i):(aa(t),qa(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(a)256&t.flags?(aa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(ua(),t.child=e.child,t.flags|=128,t=null):(ua(),s=i.fallback,u=t.mode,i=Ka({mode:"visible",children:i.children},u),(s=Ur(s,u,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,ra(t,e.child,null,n),(i=t.child).memoizedState=Ba(n),i.childLanes=Ua(e,r,n),t.memoizedState=Va,t=s);else if(aa(t),yd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(o(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ha(e,t,n)}else if(_a||Ei(e,t,n,!1),r=0!==(n&e.childLanes),_a||r){if(null!==(r=iu)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:_e(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Mu(r,e,i),Ca;"$?"===u.data||Wu(),t=Ha(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,si=vd(u.nextSibling),ii=t,oi=!0,ai=null,li=!1,null!==e&&(Qr[Yr++]=Jr,Qr[Yr++]=Zr,Qr[Yr++]=Xr,Jr=e.id,Zr=e.overflow,Xr=t),(t=qa(t,i.children)).flags|=4096);return t}return s?(ua(),s=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=jr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?s=jr(c,s):(s=Ur(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(u=e.child.memoizedState)?u=Ba(n):(null!==(l=u.cachePool)?(c=Li._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Ki(),u={baseLanes:u.baseLanes|n,cachePool:l}),s.memoizedState=u,s.childLanes=Ua(e,r,n),t.memoizedState=Va,i):(aa(t),e=(n=e.child).sibling,(n=jr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function qa(e,t){return(t=Ka({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ka(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return ra(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Wa(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Na(e,t,r.children,n),0!==(2&(r=da.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(da,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wa(t,!0,n,null,s);break;case"together":Wa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ei(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ti(e))}function Ja(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_a=!0;else{if(!Xa(e,n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:H(t,t.stateNode.containerInfo),wi(0,Li,e.memoizedState.cache),pi();break;case 27:case 5:W(t);break;case 4:H(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(aa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$a(e,t,n):(aa(t),null!==(e=Ya(e,t,n))?e.sibling:null);aa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ei(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),B(da,da.current),r)break;return null;case 22:case 23:return t.lanes=0,La(e,t,n);case 24:wi(0,Li,e.memoizedState.cache)}return Ya(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,oi&&0!==(1048576&t.flags)&&ti(t,Wr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===S){t.tag=11,t=Aa(null,t,r,e,n);break e}if(i===T){t.tag=14,t=Da(null,t,r,e,n);break e}}throw t=P(r)||r,Error(o(306,t,""))}Fr(r)?(e=ya(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=za(null,t,r,e,n))}return t;case 0:return za(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=ya(r,t.pendingProps),n);case 3:e:{if(H(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,is(e,t),ds(t,r,null,n);var a=t.memoizedState;if(r=a.cache,wi(0,Li,r),r!==s.cache&&ki(t,[Li],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ja(e,t,r,n);break e}if(r!==i){mi(i=Tr(Error(o(424)),t)),t=ja(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(si=vd(e.firstChild),ii=t,oi=!0,ai=null,li=!0,n=ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===i){t=Ya(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=Nd(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=id(q.current).createElement(n))[Pe]=t,r[Le]=e,td(r,n,e),Ke(r),t.stateNode=r):t.memoizedState=Nd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return W(t),null===e&&oi&&(r=t.stateNode=xd(t.type,t.pendingProps,q.current),ii=t,li=!0,i=si,pd(t.type)?(bd=i,si=vd(r.firstChild)):si=i),Na(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=si)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,li))?(t.stateNode=r,ii=t,si=vd(r.firstChild),li=!1,i=!0):i=!1),i||ci(t)),W(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ad(i,s)?r=null:null!==a&&ad(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,Os,null,null,n),Qd._currentValue=i),Oa(e,t),Na(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=si)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,li))?(t.stateNode=n,ii=t,si=null,e=!0):e=!1),e||ci(t)),null;case 13:return $a(e,t,n);case 4:return H(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ra(t,null,r,n):Na(e,t,r,n),t.child;case 11:return Aa(e,t,t.type,t.pendingProps,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),Na(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ii(t),r=r(i=Ci(i)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return Da(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Qa(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ka(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=jr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return La(e,t,n);case 24:return Ii(t),r=Ci(Li),null===e?(null===(i=$i())&&(i=iu,s=Ri(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},rs(t),wi(0,Li,i)):(0!==(e.lanes&n)&&(is(e,t),ds(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Li,r)):(r=s.cache,wi(0,Li,r),r!==i.cache&&ki(t,[Li],n,!0))),Na(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Za(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ud(t)){if(null!==(t=sa.current)&&((4194048&ou)===ou?null!==oa:(62914560&ou)!==ou&&0===(536870912&ou)||t!==oa))throw Zi=Qi,Gi;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vu|=t)}function nl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xi(Li),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?Za(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,gi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Za(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Za(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Za(t),rl(t),t.flags&=-16777217),null;case 27:Q(t),n=q.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return rl(t),null}e=U.current,fi(t)?di(t):(e=xd(i,r,n),t.stateNode=e,Za(t))}return rl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return rl(t),null}if(e=U.current,fi(t))di(t);else{switch(i=id(q.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Pe]=t,e[Le]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Za(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=q.current,fi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ii))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xc(e.nodeValue,n)))||ci(t)}else(e=id(e).createTextNode(r))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Pe]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=gi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return G(),null===e&&Bc(t.stateNode.containerInfo),rl(t),null;case 10:return xi(t.type),rl(t),null;case 19:if(V(da),null===(i=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)nl(i,!1);else{if(0!==fu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,nl(i,!1),e=s.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return B(da,1&da.current|2),t.child}e=e.sibling}null!==i.tail&&te()>ku&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!oi)return rl(t),null}else 2*te()-i.renderingStartTime>ku&&536870912!==n&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=da.current,B(da,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return ca(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Ui),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xi(Li),rl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ri(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xi(Li),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(da),null;case 4:return G(),null;case 10:return xi(t.type),null;case 22:case 23:return ca(t),vs(),null!==e&&V(Ui),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xi(Li),null;default:return null}}function ol(e,t){switch(ri(t),t.tag){case 3:xi(Li),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:ca(t);break;case 19:V(da);break;case 10:xi(t.type);break;case 22:case 23:ca(t),vs(),null!==e&&V(Ui);break;case 24:xi(Li)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){dc(t,t.return,a)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,u=a;try{u()}catch(c){dc(i,l,c)}}}r=r.next}while(r!==s)}}catch(c){dc(t,t.return,c)}}function ul(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fs(t,n)}catch(r){dc(e,e.return,r)}}}function cl(e,t,n){n.props=ya(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){dc(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){dc(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){dc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){dc(e,t,s)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){dc(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||Zc(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Zc(e,t,f,p,r,h)}}return void mt(e,a,l,u,c,d,s,i);case"select":for(s in p=a=l=f=null,n)if(u=n[s],n.hasOwnProperty(s)&&null!=u)switch(s){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(s)||Zc(e,t,s,null,r,u)}for(i in r)if(s=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=s||null!=u))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Zc(e,t,i,s,r,u)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zc(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Zc(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Zc(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zc(e,t,u,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Zc(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Zc(e,t,c,f,r,p)}return;default:if(It(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&ed(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||ed(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Zc(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Zc(e,t,h,f,r,p)}(r,e.type,n,t),r[Le]=t}catch(i){dc(e,e.return,i)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jc));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[Pe]=e,t[Le]=n}catch(s){dc(e,e.return,s)}}var wl=!1,xl=!1,Sl=!1,kl="function"===typeof WeakSet?WeakSet:Set,El=null;function Tl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){dc(n,n.return,o)}else{var i=ya(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){dc(n,n.return,a)}}64&r&&ul(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fs(e,t)}catch(o){dc(n,n.return,o)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Dl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||xl,i=wl;var s=xl;wl=r,(xl=t)&&!s?Vl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=i,xl=s}break;case 30:break;default:Fl(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,_l=!1;function Nl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(s){}switch(n.tag){case 26:xl||hl(n,t),Nl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||hl(n,t);var r=Cl,i=_l;pd(n.type)&&(Cl=n.stateNode,_l=!1),Nl(e,t,n),Sd(n.stateNode),Cl=r,_l=i;break;case 5:xl||hl(n,t);case 6:if(r=Cl,i=_l,Cl=null,Nl(e,t,n),_l=i,null!==(Cl=r))if(_l)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){dc(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){dc(n,t,o)}break;case 18:null!==Cl&&(_l?(gd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):gd(Cl,n.stateNode));break;case 4:r=Cl,i=_l,Cl=n.stateNode.containerInfo,_l=!0,Nl(e,t,n),Cl=r,_l=i;break;case 0:case 11:case 14:case 15:xl||ll(2,n,t),xl||ll(4,n,t),Nl(e,t,n);break;case 1:xl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Nl(e,t,n);break;case 21:Nl(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Nl(e,t,n),xl=r;break;default:Nl(e,t,n)}}function Dl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){dc(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Ll(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Cl=l.stateNode,_l=!1;break e}break;case 5:Cl=l.stateNode,_l=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Al(s,a,i),Cl=null,_l=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Rl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),zl(e),4&r&&(ll(3,e,e.return),al(3,e),ll(5,e,e.return));break;case 1:Ll(t,e),zl(e),512&r&&(xl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Rl;if(Ll(t,e),zl(e),512&r&&(xl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[je]||s[Pe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),td(s,r,n),s[Pe]=e,Ke(s),r=s;break e;case"link":var a=Vd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Vd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Pe]=e,Ke(s),r=s}e.stateNode=r}else Bd(i,e.type,e.stateNode);else e.stateNode=Od(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Bd(i,e.type,e.stateNode):Od(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ll(t,e),zl(e),512&r&&(xl||null===n||hl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),zl(e),512&r&&(xl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(p){dc(e,e.return,p)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Sl=!0);break;case 6:if(Ll(t,e),zl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){dc(e,e.return,p)}}break;case 3:if(jd=null,i=Rl,Rl=Td(t.containerInfo),Ll(t,e),Rl=i,zl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(p){dc(e,e.return,p)}Sl&&(Sl=!1,Ml(e));break;case 4:r=Rl,Rl=Td(e.stateNode.containerInfo),Ll(t,e),zl(e),Rl=r;break;case 12:default:Ll(t,e),zl(e);break;case 13:Ll(t,e),zl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Su=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=wl,d=xl;if(wl=c||i,xl=d||u,Ll(t,e),xl=d,wl=c,zl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||wl||xl||jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(s=u.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){dc(u,u.return,p)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(p){dc(u,u.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Ll(t,e),zl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function zl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(gl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;vl(e,ml(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(St(s,""),n.flags&=-33),vl(e,ml(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;yl(e,ml(e),a);break;default:throw Error(o(161))}}catch(l){dc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tl(e,t.alternate,t),t=t.sibling}function jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),jl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),jl(t);break;case 27:Sd(t.stateNode);case 26:case 5:hl(t,t.return),jl(t);break;case 22:null===t.memoizedState&&jl(t);break;default:jl(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(i,s,n),al(4,s);break;case 1:if(Vl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){dc(r,r.return,u)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(u){dc(r,r.return,u)}}n&&64&o&&ul(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Vl(i,s,n),n&&null===r&&4&o&&fl(s),dl(s,s.return);break;case 12:Vl(i,s,n);break;case 13:Vl(i,s,n),n&&4&o&&Dl(i,s);break;case 22:null===s.memoizedState&&Vl(i,s,n),dl(s,s.return);break;case 30:break;default:Vl(i,s,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,r),t=t.sibling}function ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){$l(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dc(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?$l(e,t,n,r):Hl(e,t):2&s._visibility?$l(e,t,n,r):(s._visibility|=2,Kl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Bl(o,t);break;case 24:$l(e,t,n,r),2048&i&&Ul(t.alternate,t)}}function Kl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:Kl(s,o,a,l,i),al(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?2&c._visibility?Kl(s,o,a,l,i):Hl(s,o):(c._visibility|=2,Kl(s,o,a,l,i)),i&&2048&u&&Bl(o.alternate,o);break;case 24:Kl(s,o,a,l,i),i&&2048&u&&Ul(o.alternate,o);break;default:Kl(s,o,a,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Hl(n,r),2048&i&&Bl(r.alternate,r);break;case 24:Hl(n,r),2048&i&&Ul(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var Gl=8192;function Wl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 26:Wl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===$d)throw Error(o(475));var r=$d;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),s=e.querySelector(Dd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Kd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Ke(s);s=e.ownerDocument||e,n=Pd(n),(i=kd.get(i))&&Md(n,i),Ke(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),td(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Kd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rl,e.memoizedState,e.memoizedProps);break;case 5:default:Wl(e);break;case 3:case 4:var t=Rl;Rl=Td(e.stateNode.containerInfo),Wl(e),Rl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Wl(e),Gl=t):Wl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,eu(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Xl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,eu(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function eu(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,s=r.return;if(Il(r),r===n){El=null;break e}if(null!==i){i.return=s,El=i;break e}El=s}}}var tu={getCacheForType:function(e){var t=Ci(Li),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nu="function"===typeof WeakMap?WeakMap:Map,ru=0,iu=null,su=null,ou=0,au=0,lu=null,uu=!1,cu=!1,du=!1,hu=0,fu=0,pu=0,gu=0,mu=0,yu=0,vu=0,bu=null,wu=null,xu=!1,Su=0,ku=1/0,Eu=null,Tu=null,Iu=0,Cu=null,_u=null,Nu=0,Au=0,Du=null,Pu=null,Lu=0,Ru=null;function Ou(){if(0!==(2&ru)&&0!==ou)return ou&-ou;if(null!==R.T){return 0!==Fi?Fi:Ac()}return Ae()}function zu(){0===yu&&(yu=0===(536870912&ou)||oi?Se():536870912);var e=sa.current;return null!==e&&(e.flags|=32),yu}function Mu(e,t,n){(e!==iu||2!==au&&9!==au)&&null===e.cancelPendingCommit||(qu(e,0),Bu(e,ou,yu,!1)),Te(e,n),0!==(2&ru)&&e===iu||(e===iu&&(0===(2&ru)&&(gu|=n),4===fu&&Bu(e,ou,yu,!1)),kc(e))}function Fu(e,t,n){if(0!==(6&ru))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=ru;ru|=2;var r=Hu(),i=Gu();iu!==e||ou!==t?(Eu=null,ku=te()+500,qu(e,t)):cu=we(e,t);e:for(;;)try{if(0!==au&&null!==su){t=su;var s=lu;t:switch(au){case 1:au=0,lu=null,ec(e,t,s,1);break;case 2:case 9:if(Yi(s)){au=0,lu=null,Zu(t);break}t=function(){2!==au&&9!==au||iu!==e||(au=7),kc(e)},s.then(t,t);break e;case 3:au=7;break e;case 4:au=5;break e;case 7:Yi(s)?(au=0,lu=null,Zu(t)):(au=0,lu=null,ec(e,t,s,7));break;case 5:var a=null;switch(su.tag){case 26:a=su.memoizedState;case 5:case 27:var l=su;if(!a||Ud(a)){au=0,lu=null;var u=l.sibling;if(null!==u)su=u;else{var c=l.return;null!==c?(su=c,tc(c)):su=null}break t}}au=0,lu=null,ec(e,t,s,5);break;case 6:au=0,lu=null,ec(e,t,s,6);break;case 8:$u(),fu=6;break e;default:throw Error(o(462))}}Xu();break}catch(d){Ku(e,d)}return bi=vi=null,R.H=r,R.A=i,ru=n,null!==su?0:(iu=null,ou=0,Nr(),fu)}(e,t):Qu(e,t,!0),s=r;;){if(0===i){cu&&!r&&Bu(e,t,0,!1);break}if(n=e.current.alternate,!s||Vu(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=bu;var u=l.current.memoizedState.isDehydrated;if(u&&(qu(l,a).flags|=256),2!==(a=Qu(l,a,!1))){if(du&&!u){l.errorRecoveryDisabledLanes|=s,gu|=s,i=4;break e}s=wu,wu=i,null!==s&&(null===wu?wu=s:wu.push.apply(wu,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){qu(e,0),Bu(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Bu(r,t,yu,!uu);break e;case 2:wu=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Su+300-te())){if(Bu(r,t,yu,!uu),0!==be(r,0,!0))break e;r.timeoutHandle=ud(ju.bind(null,r,n,wu,Eu,xu,t,yu,gu,vu,uu,s,2,-0,0),i)}else ju(r,n,wu,Eu,xu,t,yu,gu,vu,uu,s,0,-0,0)}break}i=Qu(e,t,!1),s=!1}kc(e)}function ju(e,t,n,r,i,s,a,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&($d={stylesheets:null,count:0,unsuspend:qd},Ql(t),null!==(h=function(){if(null===$d)throw Error(o(475));var e=$d;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(rc.bind(null,e,t,s,n,r,i,a,l,u,d,1,f,p)),void Bu(e,s,a,!c);rc(e,t,s,n,r,i,a,l,u)}function Vu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,n,r){t&=~mu,t&=~gu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ie(e,n,t)}function Uu(){return 0!==(6&ru)||(Ec(0,!1),!1)}function $u(){if(null!==su){if(0===au)var e=su.return;else bi=vi=null,Fs(e=su),Yo=null,Xo=0,e=su;for(;null!==e;)ol(e.alternate,e),e=e.return;su=null}}function qu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$u(),iu=e,su=n=jr(e.current,null),ou=t,au=0,lu=null,uu=!1,cu=we(e,t),du=!1,vu=yu=mu=gu=pu=fu=0,wu=bu=null,xu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hu=t,Nr(),n}function Ku(e,t){ws=null,R.H=Ho,t===Hi||t===Wi?(t=es(),au=3):t===Gi?(t=es(),au=4):au=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lu=t,null===su&&(fu=1,Sa(e,Tr(t,e.current)))}function Hu(){var e=R.H;return R.H=Ho,null===e?Ho:e}function Gu(){var e=R.A;return R.A=tu,e}function Wu(){fu=4,uu||(4194048&ou)!==ou&&null!==sa.current||(cu=!0),0===(134217727&pu)&&0===(134217727&gu)||null===iu||Bu(iu,ou,yu,!1)}function Qu(e,t,n){var r=ru;ru|=2;var i=Hu(),s=Gu();iu===e&&ou===t||(Eu=null,qu(e,t)),t=!1;var o=fu;e:for(;;)try{if(0!==au&&null!==su){var a=su,l=lu;switch(au){case 8:$u(),o=6;break e;case 3:case 2:case 9:case 6:null===sa.current&&(t=!0);var u=au;if(au=0,lu=null,ec(e,a,l,u),n&&cu){o=0;break e}break;default:u=au,au=0,lu=null,ec(e,a,l,u)}}Yu(),o=fu;break}catch(c){Ku(e,c)}return t&&e.shellSuspendCounter++,bi=vi=null,ru=r,R.H=i,R.A=s,null===su&&(iu=null,ou=0,Nr()),o}function Yu(){for(;null!==su;)Ju(su)}function Xu(){for(;null!==su&&!Z();)Ju(su)}function Ju(e){var t=Ja(e.alternate,e,hu);e.memoizedProps=e.pendingProps,null===t?tc(e):su=t}function Zu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,ou);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,ou);break;case 5:Fs(t);default:ol(n,t),t=Ja(n,t=su=Vr(t,hu),hu)}e.memoizedProps=e.pendingProps,null===t?tc(e):su=t}function ec(e,t,n,r){bi=vi=null,Fs(t),Yo=null,Xo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ei(t,n,i,!0),null!==(n=sa.current)){switch(n.tag){case 13:return null===oa?Wu():null===n.alternate&&0===fu&&(fu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hc(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hc(e,r,i)),!1}throw Error(o(435,n.tag))}return hc(e,r,i),Wu(),!1}if(oi)return null!==(t=sa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==ui&&mi(Tr(e=Error(o(422),{cause:r}),n))):(r!==ui&&mi(Tr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Tr(r,n),ls(e,i=Ea(e.stateNode,r,i)),4!==fu&&(fu=2)),!1;var s=Error(o(520),{cause:r});if(s=Tr(s,n),null===bu?bu=[s]:bu.push(s),4!==fu&&(fu=2),null===t)return!0;r=Tr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ls(n,e=Ea(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Tu||!Tu.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ia(i=Ta(i),e,n,r),ls(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ou))return fu=1,Sa(e,Tr(n,e.current)),void(su=null)}catch(s){if(null!==i)throw su=i,s;return fu=1,Sa(e,Tr(n,e.current)),void(su=null)}32768&t.flags?(oi||1===r?e=!0:cu||0!==(536870912&ou)?e=!1:(uu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=sa.current)&&13===r.tag&&(r.flags|=16384))),nc(t,e)):tc(t)}function tc(e){var t=e;do{if(0!==(32768&t.flags))return void nc(t,uu);e=t.return;var n=il(t.alternate,t,hu);if(null!==n)return void(su=n);if(null!==(t=t.sibling))return void(su=t);su=t=e}while(null!==t);0===fu&&(fu=5)}function nc(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(su=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(su=e);su=e=n}while(null!==e);fu=6,su=null}function rc(e,t,n,r,i,s,a,l,u){e.cancelPendingCommit=null;do{lc()}while(0!==Iu);if(0!==(6&ru))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-fe(n),d=1<<c;a[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ie(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=_r,a,l,u),e===iu&&(su=iu=null,ou=0),_u=t,Cu=e,Nu=n,Au=s,Du=i,Pu=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(se,(function(){return uc(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,i=O.p,O.p=2,a=ru,ru|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,nr(e=tr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++d===r&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(s=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=ya(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){dc(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{ru=a,O.p=i,R.T=r}}Iu=1,ic(),sc(),oc()}}function ic(){if(1===Iu){Iu=0;var e=Cu,t=_u,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=O.p;O.p=2;var i=ru;ru|=4;try{Ol(t,e);var s=rd,o=tr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&er(a.ownerDocument.documentElement,a)){if(null!==l&&nr(a)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(c,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var y=Zn(a,g),v=Zn(a,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{ru=i,O.p=r,R.T=n}}e.current=t,Iu=2}}function sc(){if(2===Iu){Iu=0;var e=Cu,t=_u,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=O.p;O.p=2;var i=ru;ru|=4;try{Tl(e,t.alternate,t)}finally{ru=i,O.p=r,R.T=n}}Iu=3}}function oc(){if(4===Iu||3===Iu){Iu=0,ee();var e=Cu,t=_u,n=Nu,r=Pu;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Iu=5:(Iu=0,_u=Cu=null,ac(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Tu=null),Ne(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,i=O.p,O.p=2,R.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{R.T=t,O.p=i}}0!==(3&Nu)&&lc(),kc(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Ru?Lu++:(Lu=0,Ru=e):Lu=0,Ec(0,!1)}}function ac(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function lc(e){return ic(),sc(),oc(),uc()}function uc(){if(5!==Iu)return!1;var e=Cu,t=Au;Au=0;var n=Ne(Nu),r=R.T,i=O.p;try{O.p=32>n?32:n,R.T=null,n=Du,Du=null;var s=Cu,a=Nu;if(Iu=0,_u=Cu=null,Nu=0,0!==(6&ru))throw Error(o(331));var l=ru;if(ru|=4,Jl(s.current),ql(s,s.current,a,n),ru=l,Ec(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,s)}catch(u){}return!0}finally{O.p=i,R.T=r,ac(e,t)}}function cc(e,t,n){t=Tr(n,t),null!==(e=os(e,t=Ea(e.stateNode,t,2),2))&&(Te(e,2),kc(e))}function dc(e,t,n){if(3===e.tag)cc(e,e,n);else for(;null!==t;){if(3===t.tag){cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Tu||!Tu.has(r))){e=Tr(n,e),null!==(r=os(t,n=Ta(2),2))&&(Ia(n,r,t,e),Te(r,2),kc(r));break}}t=t.return}}function hc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(du=!0,i.add(n),e=fc.bind(null,e,t,n),t.then(e,e))}function fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,iu===e&&(ou&n)===n&&(4===fu||3===fu&&(62914560&ou)===ou&&300>te()-Su?0===(2&ru)&&qu(e,0):mu|=n,vu===ou&&(vu=0)),kc(e)}function pc(e,t){0===t&&(t=ke()),null!==(e=Pr(e,t))&&(Te(e,t),kc(e))}function gc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),pc(e,n)}var yc=null,vc=null,bc=!1,wc=!1,xc=!1,Sc=0;function kc(e){e!==vc&&null===e.next&&(null===vc?yc=vc=e:vc=vc.next=e),wc=!0,bc||(bc=!0,hd((function(){0!==(6&ru)?X(re,Tc):Ic()})))}function Ec(e,t){if(!xc&&wc){xc=!0;do{for(var n=!1,r=yc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Nc(r,s))}else s=ou,0===(3&(s=be(r,r===iu?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Nc(r,s));r=r.next}}while(n);xc=!1}}function Tc(){Ic()}function Ic(){wc=bc=!1;var e=0;0!==Sc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Sc),Sc=0);for(var t=te(),n=null,r=yc;null!==r;){var i=r.next,s=Cc(r,t);0===s?(r.next=null,null===n?yc=i:n.next=i,null===i&&(vc=n)):(n=r,(0!==e||0!==(3&s))&&(wc=!0)),r=i}Ec(e,!1)}function Cc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=ou,n=be(e,e===(t=iu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===au||9===au)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ne(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=_c.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function _c(e,t){if(0!==Iu&&5!==Iu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lc()&&e.callbackNode!==n)return null;var r=ou;return 0===(r=be(e,e===iu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fu(e,r,t),Cc(e,te()),null!=e.callbackNode&&e.callbackNode===n?_c.bind(null,e):null)}function Nc(e,t){if(lc())return null;Fu(e,t,!0)}function Ac(){return 0===Sc&&(Sc=Se()),Sc}function Dc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Pc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Lc=0;Lc<Sr.length;Lc++){var Rc=Sr[Lc];kr(Rc.toLowerCase(),"on"+(Rc[0].toUpperCase()+Rc.slice(1)))}kr(pr,"onAnimationEnd"),kr(gr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(yr,"onTransitionRun"),kr(vr,"onTransitionStart"),kr(br,"onTransitionCancel"),kr(wr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),We("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),We("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),We("onBeforeInput",["compositionend","keypress","textInput","paste"]),We("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function Mc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){va(c)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){va(c)}i.currentTarget=null,s=l}}}}function Fc(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(Uc(t,e,2,!1),n.add(r))}function jc(e,t,n){var r=0;t&&(r|=4),Uc(n,e,r,t)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[Vc]){e[Vc]=!0,He.forEach((function(t){"selectionchange"!==t&&(zc.has(t)||jc(t,!1,e),jc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vc]||(t[Vc]=!0,jc("selectionchange",!1,t))}}function Uc(e,t,n,r){switch(ch(t)){case 2:var i=ih;break;case 8:i=sh;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $c(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=Be(a)))return;if(5===(u=o.tag)||6===u||26===u||27===u){r=s=o;continue e}a=a.parentNode}}r=r.return}zt((function(){var r=s,i=Dt(n),o=[];e:{var a=xr.get(e);if(void 0!==a){var u=en,c=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":u=mn;break;case"focusin":c="focus",u=an;break;case"focusout":c="blur",u=an;break;case"beforeblur":case"afterblur":u=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=vn;break;case pr:case gr:case mr:u=ln;break;case wr:u=bn;break;case"scroll":case"scrollend":u=nn;break;case"wheel":u=wn;break;case"copy":case"cut":case"paste":u=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=yn;break;case"toggle":case"beforetoggle":u=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Mt(g,f))&&d.push(qc(g,m,p)),h)break;g=g.return}0<d.length&&(a=new u(a,c,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(c=n.relatedTarget||n.fromElement)||!Be(c)&&!c[Re])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Be(c):null)&&(h=l(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=sn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==u?a:$e(u),p=null==c?a:$e(c),(a=new d(m,g+"leave",u,n,i)).target=h,a.relatedTarget=p,m=null,Be(i)===r&&((d=new d(f,g+"enter",c,n,i)).target=p,d.relatedTarget=h,m=d),h=m,u&&c)e:{for(f=c,g=0,p=d=u;p;p=Hc(p))g++;for(p=0,m=f;m;m=Hc(m))p++;for(;0<g-p;)d=Hc(d),g--;for(;0<p-g;)f=Hc(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Hc(d),f=Hc(f)}d=null}else d=null;null!==u&&Gc(o,a,u,d,!1),null!==c&&null!==h&&Gc(o,h,c,d,!0)}if("select"===(u=(a=r?$e(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var y=jn;else if(Ln(a))if(Vn)y=Qn;else{y=Gn;var v=Hn}else!(u=a.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&It(r.elementType)&&(y=jn):y=Wn;switch(y&&(y=y(e,r))?Rn(o,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?$e(r):window,e){case"focusin":(Ln(v)||"true"===v.contentEditable)&&(ir=v,sr=r,or=null);break;case"focusout":or=sr=ir=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,lr(o,n,i);break;case"selectionchange":if(rr)break;case"keydown":case"keyup":lr(o,n,i)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Dn?Nn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(In&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Dn&&(b=qt()):(Ut="value"in(Bt=i)?Bt.value:Bt.textContent,Dn=!0)),0<(v=Kc(r,w)).length&&(w=new cn(w,e,null,n,i),o.push({event:w,listeners:v}),b?w.data=b:null!==(b=An(n))&&(w.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(_n=!0,Cn);case"textInput":return(e=t.data)===Cn&&_n?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!kn&&Nn(e,t)?(e=qt(),$t=Ut=Bt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Kc(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Dc((i[Le]||null).action),o=r.submitter;o&&null!==(t=(t=o[Le]||null)?Dc(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new en("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Sc){var e=o?Pc(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Pc(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Mc(o,t)}))}function qc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(qc(e,i,s)),null!=(i=Mt(e,t))&&r.push(qc(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Hc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gc(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===u||(l=u,i?null!=(u=Mt(n,s))&&o.unshift(qc(n,u,l)):i||null!=(u=Mt(n,s))&&o.push(qc(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Wc=/\r\n?/g,Qc=/\u0000|\uFFFD/g;function Yc(e){return("string"===typeof e?e:""+e).replace(Wc,"\n").replace(Qc,"")}function Xc(e,t){return t=Yc(t),Yc(e)===t}function Jc(){}function Zc(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Tt(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Zc(e,t,"name",i.name,i,null),Zc(e,t,"formEncType",i.formEncType,i,null),Zc(e,t,"formMethod",i.formMethod,i,null),Zc(e,t,"formTarget",i.formTarget,i,null)):(Zc(e,t,"encType",i.encType,i,null),Zc(e,t,"method",i.method,i,null),Zc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Jc);break;case"onScroll":null!=r&&Fc("scroll",e);break;case"onScrollEnd":null!=r&&Fc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fc("beforetoggle",e),Fc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function ed(e,t,n,r,i,s){switch(n){case"style":Tt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Fc("scroll",e);break;case"onScrollEnd":null!=r&&Fc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Le]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fc("error",e),Fc("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zc(e,t,r,a,n,null)}}return s&&Zc(e,t,"srcSet",n.srcSet,n,null),void(i&&Zc(e,t,"src",n.src,n,null));case"input":Fc("invalid",e);var l=r=a=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Zc(e,t,i,d,n,null)}}return yt(e,r,l,u,c,a,s,!1),void dt(e);case"select":for(s in Fc("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zc(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Fc("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Zc(e,t,a,l,n,null)}return xt(e,i,s,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zc(e,t,u,i,n,null);return;case"dialog":Fc("beforetoggle",e),Fc("toggle",e),Fc("cancel",e),Fc("close",e);break;case"iframe":case"object":Fc("load",e);break;case"video":case"audio":for(i=0;i<Oc.length;i++)Fc(Oc[i],e);break;case"image":Fc("error",e),Fc("load",e);break;case"details":Fc("toggle",e);break;case"embed":case"source":case"link":Fc("error",e),Fc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zc(e,t,c,i,n,null)}return;default:if(It(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zc(e,t,l,i,n,null))}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var ud="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:ud;function fd(e){setTimeout((function(){throw e}))}function pd(e){return"head"===e}function gd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Sd(o.documentElement),2&n&&Sd(o.body),4&n)for(Sd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[je]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void _h(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);_h(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var kd=new Map,Ed=new Set;function Td(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Id=O.d;O.d={f:function(){var e=Id.f(),t=Uu();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Ro(t):Id.r(e)},D:function(e){Id.D(e),_d("dns-prefetch",e,null)},C:function(e,t){Id.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){Id.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Ad(e);break;case"script":s=Ld(e)}kd.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Dd(s))||"script"===t&&r.querySelector(Rd(s))||(td(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Id.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ld(e)}if(!kd.has(s)&&(e=h({rel:"modulepreload",href:e},t),kd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(s)))return}td(r=n.createElement("link"),"link",e),Ke(r),n.head.appendChild(r)}}},X:function(e,t){Id.X(e,t);var n=Cd;if(n&&e){var r=qe(n).hoistableScripts,i=Ld(e),s=r.get(i);s||((s=n.querySelector(Rd(i)))||(e=h({src:e,async:!0},t),(t=kd.get(i))&&Fd(e,t),Ke(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Id.S(e,t,n);var r=Cd;if(r&&e){var i=qe(r).hoistableStyles,s=Ad(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Dd(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(s))&&Md(e,n);var l=o=r.createElement("link");Ke(l),td(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,zd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Id.M(e,t);var n=Cd;if(n&&e){var r=qe(n).hoistableScripts,i=Ld(e),s=r.get(i);s||((s=n.querySelector(Rd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(i))&&Fd(e,t),Ke(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Cd="undefined"===typeof document?null:document;function _d(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ed.has(i)||(Ed.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function Nd(e,t,n,r){var i,s,a,l,u=(u=q.current)?Td(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=qe(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var c=qe(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Dd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),c||(i=u,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),td(s,"link",a),Ke(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ld(n),(r=(n=qe(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ad(e){return'href="'+gt(e)+'"'}function Dd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Ld(e){return'[src="'+gt(e)+'"]'}function Rd(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ke(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ke(r=(e.ownerDocument||e).createElement("style")),td(r,"style",i),zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var s=e.querySelector(Dd(i));if(s)return t.state.loading|=4,t.instance=s,Ke(s),s;r=Pd(n),(i=kd.get(i))&&Md(r,i),Ke(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),td(s,"link",r),t.state.loading|=4,zd(s,n.precedence,e),t.instance=s;case"script":return s=Ld(n.src),(i=e.querySelector(Rd(s)))?(t.instance=i,Ke(i),i):(r=n,(i=kd.get(s))&&Fd(r=h({},n),i),Ke(i=(e=e.ownerDocument||e).createElement("script")),td(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,zd(r,n.precedence,e));return t.instance}function zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var jd=null;function Vd(e,t,n){if(null===jd){var r=new Map,i=jd=new Map;i.set(n,r)}else(r=(i=jd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[je]||s[Pe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ud(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var $d=null;function qd(){}function Kd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hd=new Map,t.forEach(Wd,e),Hd=null,Kd.call(e))}function Wd(e,t){if(!(4&t.state.loading)){var n=Hd.get(e);if(n)var r=n.get(null);else{n=new Map,Hd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Kd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Qd={$$typeof:x,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Yd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,s,o,a,l,u,c,d){return e=new Yd(e,t,n,o,a,l,u,d),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ri()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},rs(s),e}function Jd(e){return e?e=Or:Or}function Zd(e,t,n,r,i,s){i=Jd(i),null===r.context?r.context=i:r.pendingContext=i,(r=ss(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=os(e,r,t))&&(Mu(n,0,t),as(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Mu(t,0,67108864),th(e,67108864)}}var rh=!0;function ih(e,t,n,r){var i=R.T;R.T=null;var s=O.p;try{O.p=2,oh(e,t,n,r)}finally{O.p=s,R.T=i}}function sh(e,t,n,r){var i=R.T;R.T=null;var s=O.p;try{O.p=8,oh(e,t,n,r)}finally{O.p=s,R.T=i}}function oh(e,t,n,r){if(rh){var i=ah(r);if(null===i)$c(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,i),!0;case"dragenter":return fh=wh(fh,e,t,n,r,i),!0;case"mouseover":return ph=wh(ph,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gh.set(s,wh(gh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,mh.set(s,wh(mh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==i;){var s=Ue(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ve(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}kc(s),0===(6&ru)&&(ku=te()+500,Ec(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Mu(a,0,2),Uu(),th(s,2)}if(null===(s=ah(r))&&$c(e,t,r,lh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $c(e,t,r,null,n)}}function ah(e){return uh(e=Dt(e))}var lh=null;function uh(e){if(lh=null,null!==(e=Be(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,ph=null,gh=new Map,mh=new Map,yh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function wh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ue(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function xh(e){var t=Be(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,(function(){if(13===n.tag){var e=Ou();e=_e(e);var t=Pr(n,e);null!==t&&Mu(t,0,e),th(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function kh(e,t,n){Sh(e)&&n.delete(t)}function Eh(){dh=!1,null!==hh&&Sh(hh)&&(hh=null),null!==fh&&Sh(fh)&&(fh=null),null!==ph&&Sh(ph)&&(ph=null),gh.forEach(kh),mh.forEach(kh)}function Th(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}var Ih=null;function Ch(e){Ih!==e&&(Ih=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Ih===e&&(Ih=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===uh(r||n))continue;break}var s=Ue(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function _h(e){function t(t){return Th(t,e)}null!==hh&&Th(hh,e),null!==fh&&Th(fh,e),null!==ph&&Th(ph,e),gh.forEach(t),mh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)xh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Le]||null;if("function"===typeof s)o||Ch(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Le]||null)a=o.formAction;else if(null!==uh(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function Nh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Nh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Zd(t.current,Ou(),e,t,null,null)},Ah.prototype.unmount=Nh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Uu(),t[Re]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&xh(e)}};var Dh=i.version;if("19.1.0"!==Dh)throw Error(o(527,Dh,"19.1.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c(i),e;if(s===r)return c(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{ce=Lh.inject(Ph),de=Lh}catch(Oh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ba,s=wa,l=xa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Re]=t.current,Bc(e),new Nh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ba,l=wa,u=xa,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Xd(e,1,!0,t,0,r,i,s,l,u,0,c)).context=Jd(null),n=t.current,(i=ss(r=_e(r=Ou()))).callback=null,os(n,i,r),n=r,t.current.lanes=n,Te(t,n),kc(t),e[Re]=t.current,Bc(e),new Ah(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function E(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(){}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case h:return N((c=e._init)(e._payload),t,i,s,o)}}if(c)return o=o(e),c=""===s?"."+C(e,0):s,x(o)?(i="",null!=c&&(i=c.replace(I,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(l=o,u=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+c,o=E(l.type,u,void 0,0,0,l.props)),t.push(o)),1;c=0;var d,p=""===s?".":s+":";if(x(e))for(var g=0;g<e.length;g++)c+=N(s=e[g],t,i,a=p+C(s,g),o);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(s=e.next()).done;)c+=N(s=s.value,t,i,a=p+C(s,g++),o);else if("object"===a){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return E(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(L,P)}catch(s){P(s)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(m=!1,x(e),!g)if(null!==r(u))g=!0,E||(E=!0,k());else{var t=r(c);null!==t&&P(S,t.startTime-e)}}var k,E=!1,T=-1,I=5,C=-1;function _(){return!!y||!(t.unstable_now()-C<I)}function N(){if(y=!1,E){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,m&&(m=!1,b(T),T=-1),p=!0;var s=f;try{t:{for(x(e),h=r(u);null!==h&&!(h.expirationTime>e&&_());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(u)&&i(u),x(e)}else i(u);h=r(u)}if(null!==h)n=!0;else{var l=r(c);null!==l&&P(S,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?k():E=!1}}}if("function"===typeof w)k=function(){w(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=N,k=function(){D.postMessage(null)}}else k=function(){v(N,0)};function P(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(b(T),T=-1):m=!0,P(S,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,E||(E=!0,k()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".4b8be825.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="asignacion-plazas:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/asignacion-plazas/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkasignacion_plazas=self.webpackChunkasignacion_plazas||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const c=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,d=()=>{try{return c()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/asignacion-plazas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDo7X1BLIW1hNYQpJLZcDws_L4aGHJWXOQ",REACT_APP_FIREBASE_AUTH_DOMAIN:"asignacion-plazas.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"asignacion-plazas",REACT_APP_FIREBASE_STORAGE_BUCKET:"asignacion-plazas.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"525955676079",REACT_APP_FIREBASE_APP_ID:"1:525955676079:web:a7e0b00391e75c902fe15a",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-E0DLWYPVKP"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},h=e=>{const t=(e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return!function(){var e;const t=null===(e=d())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y(){try{return"object"===typeof indexedDB}catch(e){return!1}}function v(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(x,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new b(n,s,t)}}const x=/\{\$([^}]+)}/g;function S(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(k(n)&&k(s)){if(!S(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function k(e){return null!==e&&"object"===typeof e}function E(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function T(e){return e&&e._delegate?e._delegate:e}class I{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const C="[DEFAULT]";class _{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new p;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:C})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===C?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return this.component?this.component.multipleInstances?e:C:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const A=[];var D;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(D||(D={}));const P={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},L=D.INFO,R={[D.DEBUG]:"log",[D.VERBOSE]:"log",[D.INFO]:"info",[D.WARN]:"warn",[D.ERROR]:"error"},O=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=R[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class z{constructor(e){this.name=e,this._logLevel=L,this._logHandler=O,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in D))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...t),this._logHandler(this,D.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...t),this._logHandler(this,D.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,D.INFO,...t),this._logHandler(this,D.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,D.WARN,...t),this._logHandler(this,D.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,D.ERROR,...t),this._logHandler(this,D.ERROR,...t)}}let M,F;const j=new WeakMap,V=new WeakMap,B=new WeakMap,U=new WeakMap,$=new WeakMap;let q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return V.get(e);if("objectStoreNames"===t)return e.objectStoreNames||B.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return G(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function K(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(W(this),n),G(j.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G(e.apply(W(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(W(this),t,...r);return B.set(s,t.sort?t.sort():[t]),G(s)}}function H(e){return"function"===typeof e?K(e):(e instanceof IDBTransaction&&function(e){if(V.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));V.set(e,t)}(e),t=e,(M||(M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,q):e);var t}function G(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(G(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&j.set(t,e)})).catch((()=>{})),$.set(t,e),t}(e);if(U.has(e))return U.get(e);const t=H(e);return t!==e&&(U.set(e,t),$.set(t,e)),t}const W=e=>$.get(e);function Q(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=G(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(G(o.result),e.oldVersion,e.newVersion,G(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Y=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],J=new Map;function Z(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(J.get(t))return J.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=X.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Y.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return J.set(t,s),s}q=(e=>({...e,get:(t,n,r)=>Z(t,n)||e.get(t,n,r),has:(t,n)=>!!Z(t,n)||e.has(t,n)}))(q);class ee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const te="@firebase/app",ne="0.11.3",re=new z("@firebase/app"),ie="@firebase/app-compat",se="@firebase/analytics-compat",oe="@firebase/analytics",ae="@firebase/app-check-compat",le="@firebase/app-check",ue="@firebase/auth",ce="@firebase/auth-compat",de="@firebase/database",he="@firebase/data-connect",fe="@firebase/database-compat",pe="@firebase/functions",ge="@firebase/functions-compat",me="@firebase/installations",ye="@firebase/installations-compat",ve="@firebase/messaging",be="@firebase/messaging-compat",we="@firebase/performance",xe="@firebase/performance-compat",Se="@firebase/remote-config",ke="@firebase/remote-config-compat",Ee="@firebase/storage",Te="@firebase/storage-compat",Ie="@firebase/firestore",Ce="@firebase/vertexai",_e="@firebase/firestore-compat",Ne="firebase",Ae="[DEFAULT]",De={[te]:"fire-core",[ie]:"fire-core-compat",[oe]:"fire-analytics",[se]:"fire-analytics-compat",[le]:"fire-app-check",[ae]:"fire-app-check-compat",[ue]:"fire-auth",[ce]:"fire-auth-compat",[de]:"fire-rtdb",[he]:"fire-data-connect",[fe]:"fire-rtdb-compat",[pe]:"fire-fn",[ge]:"fire-fn-compat",[me]:"fire-iid",[ye]:"fire-iid-compat",[ve]:"fire-fcm",[be]:"fire-fcm-compat",[we]:"fire-perf",[xe]:"fire-perf-compat",[Se]:"fire-rc",[ke]:"fire-rc-compat",[Ee]:"fire-gcs",[Te]:"fire-gcs-compat",[Ie]:"fire-fst",[_e]:"fire-fst-compat",[Ce]:"fire-vertex","fire-js":"fire-js",[Ne]:"fire-js-all"},Pe=new Map,Le=new Map,Re=new Map;function Oe(e,t){try{e.container.addComponent(t)}catch(n){re.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ze(e){const t=e.name;if(Re.has(t))return re.debug(`There were multiple attempts to register component ${t}.`),!1;Re.set(t,e);for(const n of Pe.values())Oe(n,e);for(const n of Le.values())Oe(n,e);return!0}function Me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Fe=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class je{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new I("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Fe.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Fe.create("no-options");const s=Pe.get(i);if(s){if(S(n,s.options)&&S(r,s.config))return s;throw Fe.create("duplicate-app",{appName:i})}const o=new N(i);for(const l of Re.values())o.addComponent(l);const a=new je(n,r,o);return Pe.set(i,a),a}function Be(e,t,n){var r;let i=null!==(r=De[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void re.warn(e.join(" "))}ze(new I(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Ue="firebase-heartbeat-store";let $e=null;function qe(){return $e||($e=Q("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ue)}catch(n){console.warn(n)}}}).catch((e=>{throw Fe.create("idb-open",{originalErrorMessage:e.message})}))),$e}async function Ke(e,t){try{const n=(await qe()).transaction(Ue,"readwrite"),r=n.objectStore(Ue);await r.put(t,He(e)),await n.done}catch(n){if(n instanceof b)re.warn(n.message);else{const e=Fe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});re.warn(e.message)}}}function He(e){return`${e.name}!${e.options.appId}`}class Ge{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Qe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=We();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){re.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=We(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ye(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ye(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return re.warn(t),""}}}function We(){return(new Date).toISOString().substring(0,10)}class Qe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!y()&&v().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await qe()).transaction(Ue),n=await t.objectStore(Ue).get(He(e));return await t.done,n}catch(t){if(t instanceof b)re.warn(t.message);else{const e=Fe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});re.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ye(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var Xe;Xe="",ze(new I("platform-logger",(e=>new ee(e)),"PRIVATE")),ze(new I("heartbeat",(e=>new Ge(e)),"PRIVATE")),Be(te,ne,Xe),Be(te,ne,"esm2017"),Be("fire-js","");var Je,Ze,et="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},tt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);d(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ze=tt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},Je=tt.Integer=r}).apply("undefined"!==typeof et?et:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var nt,rt,it,st,ot,at,lt,ut,ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},dt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ct&&ct];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,_=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(D)}};var D=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){k(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_=!1};function P(){this.s=this.s,this.C=this.C}function L(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},L.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(L.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:z[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,L);var z={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function U(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),K={};function H(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new B(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])U(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(U(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function X(e){return e in K?K[e]:K[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new L(t,e);else if(t instanceof L)t.target=t.target||e;else{var i=t;x(t=new L(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&U(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ue=[];function ce(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){L.call(this,"d")}function be(){L.call(this,"c")}d(ve,L),d(be,L);var we={},xe=null;function Se(){return xe=xe||new ne}function ke(e){L.call(this,we.La,e)}function Ee(e){const t=Se();re(t,new ke(t))}function Te(e,t){L.call(this,we.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Se();re(t,new Te(t,e))}function Ce(e,t){L.call(this,we.Ma,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(ke,L),we.STAT_EVENT="statevent",d(Te,L),we.Ma="timingevent",d(Ce,L),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var De,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}d(Re,pe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},De=new Re;var Me={},Fe={};function je(e,t,n){e.L=1,e.v=St(yt(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=yt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),zt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new ze,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_e(u(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||bn(e.j,e)}function Ge(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),ln(n)}gn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=_e(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&vn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,xt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ke(a),$e(a)),r.g=o}else pn(r);0<n.i.length&&cn(n)}else"stop"!=u[0]&&"close"!=u[0]||xn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?xn(n,7):an(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Ee()}catch(c){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==nn(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=nn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||rn(this.g)))){this.J||4!=h||7==t||Ee(),Ke(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=rn(this.g);e="";var s=r.length,o=4==nn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ie(12),Ge(this),He(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ue(this,a),e==Fe){4==h&&(this.s=4,Ie(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ie(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),We(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(d),d.M=!0,Ie(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),He(this)}else Ae(this.i,this.l,a,null),We(this,a);4==h&&Ge(this),this.o&&!this.J&&(4==h?bn(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=nn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ge(this),He(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Ie(17)),Ge(this),this.s=2,He(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,bt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,vt(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),bt(this,t[4]),this.l=kt(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function yt(e){return new mt(e)}function vt(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(Lt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),zt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,At)),e.i=new Pt(t,e.h))}function xt(e,t,n){e.i.set(t,n)}function St(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,Ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,Ct,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?Nt:_t,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,Dt)),e.join("")};var It,Ct=/[#\/\?@]/g,_t=/[#\?:]/g,Nt=/[#\?]/g,At=/[#\?@]/g,Dt=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rt(e,t){Lt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return Lt(e),t=Mt(e,t),e.g.has(t)}function zt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),h(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ft(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function jt(){this.g=new fe}function Vt(e,t,n){const r=n||"";try{pt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $t(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Wt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){Lt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Lt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Lt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Lt(this);let t=[];if("string"===typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Lt(this),this.i=null,Ot(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Bt,pe),Bt.prototype.g=function(){return new Ut(this.l,this.j)},Bt.prototype.i=(It={},function(){return It}),d(Ut,ne),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$t(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Kt(this),3==this.readyState&&$t(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Wt,ne);var Qt=/^https?$/i,Yt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Jt(e),en(e)}function Jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=nn(e)||2!=e.Z()))if(e.u&&4==nn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==nn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(gt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Qt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<nn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Jt(e)}}finally{en(e)}}}function en(e,t){if(e.g){tn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function tn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function nn(e){return e.g?e.g.readyState:0}function rn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ft){return null}}function sn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sn("baseRetryDelayMs",5e3,e),this.cb=sn("retryDelaySeedMs",1e4,e),this.Wa=sn("forwardChannelMaxRetries",2,e),this.wa=sn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(un(e),3==e.G){var t=e.U++,n=yt(e.I);if(xt(n,"SID",e.K),xt(n,"RID",t),xt(n,"TYPE","terminate"),hn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=St(yt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}Sn(e)}function ln(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function un(e){ln(e),e.u&&(i.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),_||(C(),_=!0),N.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const r=yt(e.I);xt(r,"SID",e.K),xt(r,"RID",n),xt(r,"AID",e.T),hn(e,r),e.m&&e.o&&Gt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=fn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function hn(e,t){e.H&&v(e.H,(function(e,n){xt(t,n,e)})),e.l&&pt({},(function(e,n){xt(t,n,e)}))}function fn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Vt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),_||(C(),_=!0),N.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=_e(u(e.Fa,e),wn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function yn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=yt(e.qa);xt(t,"RID","rpc"),xt(t,"SID",e.K),xt(t,"AID",e.T),xt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&xt(t,"TO",e.ja),xt(t,"TYPE","xmlhttp"),hn(e,t),e.m&&e.o&&Gt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=St(yt(t)),n.m=null,n.P=!0,Ve(n,e)}function vn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function bn(e,t){var n=null;if(e.g==t){vn(e),mn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ce(r,n)),cn(e)}else pn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=_e(u(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||vt(r,"https"),St(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=c(Ft,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Ft,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Ft,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Ft,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ft(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ft(0,0,!0,t):Ft(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ft(0,0,!1,t)}))}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),Sn(e),un(e)}function Sn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof mt?yt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new mt(null);r&&vt(o,r),t&&(o.g=t),s&&bt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&xt(r,n,t),xt(r,"VER",e.la),hn(e,r),r}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Wt(new Bt({eb:n})):new Wt(e.pa)).Ha(e.J),t}function Tn(){}function In(){}function Cn(e,t){ne.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function _n(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nn(){be.call(this),this.status=1}function An(e){this.g=e}(e=Wt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?ge(this.o):ge(De),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Xt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Yt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tn(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Xt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),en(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Wt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Zt(this):this.bb())},e.bb=function(){Zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch(It){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(It){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=fn(this,i,t),xt(n=yt(this.I),"RID",e),xt(n,"CVER",22),this.D&&xt(n,"X-HTTP-Session-Id",this.D),hn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&Gt(n,this.m,s)),et(this.h,i),this.Ua&&xt(n,"TYPE","init"),this.P?(xt(n,"$req",t),xt(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||Xe(this.h)||dn(this))},e.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=_e(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),ln(this),yn(this))},e.Za=function(){null!=this.C&&(this.C=null,ln(this),gn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},In.prototype.g=function(e,t){return new Cn(e,t)},d(Cn,ne),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){an(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&cn(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,Cn.aa.N.call(this)},d(_n,ve),d(Nn,be),d(An,Tn),An.prototype.ua=function(){re(this.g,"a")},An.prototype.ta=function(e){re(this.g,new _n(e))},An.prototype.sa=function(e){re(this.g,new Nn)},An.prototype.ra=function(){re(this.g,"b")},In.prototype.createWebChannel=In.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,ut=dt.createWebChannelTransport=function(){return new In},lt=dt.getStatEventTarget=function(){return Se()},at=dt.Event=we,ot=dt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,st=dt.ErrorCode=Pe,Le.COMPLETE="complete",it=dt.EventType=Le,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,rt=dt.WebChannel=me,dt.FetchXmlHttpFactory=Bt,Wt.prototype.listenOnce=Wt.prototype.L,Wt.prototype.getLastError=Wt.prototype.Ka,Wt.prototype.getLastErrorCode=Wt.prototype.Ba,Wt.prototype.getStatus=Wt.prototype.Z,Wt.prototype.getResponseJson=Wt.prototype.Oa,Wt.prototype.getResponseText=Wt.prototype.oa,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Ha,nt=dt.XhrIo=Wt}).apply("undefined"!==typeof ct?ct:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ht="@firebase/firestore",ft="4.7.10";class pt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");let gt="11.5.0";const mt=new z("@firebase/firestore");function yt(){return mt.logLevel}function vt(e){if(mt.logLevel<=D.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xt);mt.debug(`Firestore (${gt}): ${e}`,...i)}}function bt(e){if(mt.logLevel<=D.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xt);mt.error(`Firestore (${gt}): ${e}`,...i)}}function wt(e){if(mt.logLevel<=D.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xt);mt.warn(`Firestore (${gt}): ${e}`,...i)}}function xt(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function St(){const e=`FIRESTORE (${gt}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw bt(e),new Error(e)}function kt(e,t){e||St()}function Et(e,t){return e}const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ct{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _t{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pt.UNAUTHENTICATED)))}shutdown(){}}class At{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Dt{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kt(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ct,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ct)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(kt("string"==typeof t.accessToken),new _t(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new pt(e)}}class Pt{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Lt{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Pt(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(pt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ot{constructor(e,t){var n;this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){kt(void 0===this.o);const n=e=>{null!=e.error&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,vt("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Rt(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(kt("string"==typeof e.token),this.R=e.token,new Rt(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zt(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Mt(){return new TextEncoder}class Ft{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=zt(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function jt(e,t){return e<t?-1:e>t?1:0}function Vt(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return jt(r,i);{const s=Mt(),o=Ut(s.encode(Bt(e,n)),s.encode(Bt(t,n)));return 0!==o?o:jt(r,i)}}n+=r>65535?2:1}return jt(e.length,t.length)}function Bt(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Ut(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return jt(e[n],t[n]);return jt(e.length,t.length)}function $t(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function qt(e){return e+"\0"}const Kt=-62135596800,Ht=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ht);return new Gt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new It(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new It(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kt)throw new It(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ht}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Kt;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wt{static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new Gt(0,0))}static max(){return new Wt(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qt="__name__";class Yt{constructor(e,t,n){void 0===t?t=0:t>e.length&&St(),void 0===n?n=e.length-t:n>e.length-t&&St(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Yt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yt?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Yt.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return jt(e.length,t.length)}static compareSegments(e,t){const n=Yt.isNumericId(e),r=Yt.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Yt.extractNumericId(e).compare(Yt.extractNumericId(t)):Vt(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Je.fromString(e.substring(4,e.length-2))}}class Xt extends Yt{construct(e,t,n){return new Xt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new It(Tt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Xt(e)}static emptyPath(){return new Xt([])}}const Jt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Yt{construct(e,t,n){return new Zt(e,t,n)}static isValidIdentifier(e){return Jt.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Qt}static keyField(){return new Zt([Qt])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new It(Tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new It(Tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new It(Tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new It(Tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}class en{constructor(e){this.path=e}static fromPath(e){return new en(Xt.fromString(e))}static fromName(e){return new en(Xt.fromString(e).popFirst(5))}static empty(){return new en(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new en(new Xt(e.slice()))}}const tn=-1;class nn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function rn(e){return e.fields.find((e=>2===e.kind))}function sn(e){return e.fields.filter((e=>2!==e.kind))}nn.UNKNOWN_ID=-1;class on{constructor(e,t){this.fieldPath=e,this.kind=t}}class an{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new an(0,cn.min())}}function ln(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(1e9===r?new Gt(n+1,0):new Gt(n,r));return new cn(i,en.empty(),t)}function un(e){return new cn(e.readTime,e.key,tn)}class cn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new cn(Wt.min(),en.empty(),tn)}static max(){return new cn(Wt.max(),en.empty(),tn)}}function dn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=en.comparator(e.documentKey,t.documentKey),0!==n?n:jt(e.largestBatchId,t.largestBatchId))}const hn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pn(e){if(e.code!==Tt.FAILED_PRECONDITION||e.message!==hn)throw e;vt("LocalStore","Unexpectedly lost primary lease")}class gn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gn(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof gn?t:gn.resolve(t)}catch(e){return gn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):gn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):gn.reject(t)}static resolve(e){return new gn(((t,n)=>{t(e)}))}static reject(e){return new gn(((t,n)=>{n(e)}))}static waitFor(e){return new gn(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=gn.resolve(!1);for(const n of e)t=t.next((e=>e?gn.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new gn(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new gn(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}const mn="SimpleDb";class yn{static open(e,t,n,r){try{return new yn(t,e.transaction(r,n))}catch(e){throw new xn(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Ct,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new xn(e,t.error)):this.m.resolve()},this.transaction.onerror=t=>{const n=In(t.target.error);this.m.reject(new xn(e,n))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(vt(mn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kn(t)}}class vn{static delete(e){return vt(mn,"Removing database:",e),En(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!y())return!1;if(vn.v())return!0;const e=g(),t=vn.C(e),n=0<t&&t<10,r=bn(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,12.2===vn.C(g())&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(vt(mn,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new xn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new It(Tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new It(Tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new xn(e,r))},r.onupgradeneeded=e=>{vt(mn,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.O.B(t,r.transaction,e.oldVersion,this.version).next((()=>{vt(mn,"Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.N(e);const t=yn.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.S(),e))).catch((e=>(t.abort(e),gn.reject(e)))).toPromise();return s.catch((()=>{})),await t.p,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(vt(mn,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class wn{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return En(this.q.delete())}}class xn extends It{constructor(e,t){super(Tt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sn(e){return"IndexedDbTransactionError"===e.name}class kn{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(vt(mn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(vt(mn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),En(n)}add(e){return vt(mn,"ADD",this.store.name,e,e),En(this.store.add(e))}get(e){return En(this.store.get(e)).next((t=>(void 0===t&&(t=null),vt(mn,"GET",this.store.name,e,t),t)))}delete(e){return vt(mn,"DELETE",this.store.name,e),En(this.store.delete(e))}count(){return vt(mn,"COUNT",this.store.name),En(this.store.count())}G(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new gn(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.j(e,((e,n)=>{t.push(n)})).next((()=>t))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new gn(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){vt(mn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.j(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.j(r,t)}X(e){const t=this.cursor({});return new gn(((n,r)=>{t.onerror=e=>{const t=In(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}j(e,t){const n=[];return new gn(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new wn(i),o=t(i.primaryKey,i.value,s);if(o instanceof gn){const e=o.catch((e=>(s.done(),gn.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>gn.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function En(e){return new gn(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=In(e.target.error);n(t)}}))}let Tn=!1;function In(e){const t=vn.C(g());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new It("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Tn||(Tn=!0,setTimeout((()=>{throw e}),0)),e}}return e}const Cn="IndexBackfiller";class _n{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){vt(Cn,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const e=await this.ee.ne();vt(Cn,`Documents written: ${e}`)}catch(e){Sn(e)?vt(Cn,"Ignoring IndexedDB error during index backfill: ",e):await pn(e)}await this.te(6e4)}))}}class Nn{constructor(e,t){this.localStore=e,this.persistence=t}async ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let r=t,i=!0;return gn.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return vt(Cn,`Processing collection: ${t}`),this.ie(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.se(r,n))).next((n=>(vt(Cn,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}se(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=un(t);dn(r,n)>0&&(n=r)})),new cn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class An{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}An.ae=-1;const Dn=-1;function Pn(e){return null==e}function Ln(e){return 0===e&&1/e==-1/0}function Rn(e){return"number"==typeof e&&Number.isInteger(e)&&!Ln(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const On="\x01";function zn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fn(t)),t=Mn(e.get(n),t);return Fn(t)}function Mn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case On:n+="\x01\x11";break;default:n+=t}}return n}function Fn(e){return e+On+"\x01"}function jn(e){const t=e.length;if(kt(t>=2),2===t)return kt(e.charAt(0)===On&&"\x01"===e.charAt(1)),Xt.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf(On,s);switch((t<0||t>n)&&St(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:St()}s=t+2}return new Xt(r)}const Vn="remoteDocuments",Bn="owner",Un="owner",$n="mutationQueues",qn="mutations",Kn="batchId",Hn="userMutationsIndex",Gn=["userId","batchId"];function Wn(e,t){return[e,zn(t)]}function Qn(e,t,n){return[e,zn(t),n]}const Yn={},Xn="documentMutations",Jn="remoteDocumentsV14",Zn=["prefixPath","collectionGroup","readTime","documentId"],er="documentKeyIndex",tr=["prefixPath","collectionGroup","documentId"],nr="collectionGroupIndex",rr=["collectionGroup","readTime","prefixPath","documentId"],ir="remoteDocumentGlobal",sr="remoteDocumentGlobalKey",or="targets",ar="queryTargetsIndex",lr=["canonicalId","targetId"],ur="targetDocuments",cr=["targetId","path"],dr="documentTargetsIndex",hr=["path","targetId"],fr="targetGlobalKey",pr="targetGlobal",gr="collectionParents",mr=["collectionId","parent"],yr="clientMetadata",vr="bundles",br="namedQueries",wr="indexConfiguration",xr="collectionGroupIndex",Sr="indexState",kr=["indexId","uid"],Er="sequenceNumberIndex",Tr=["uid","sequenceNumber"],Ir="indexEntries",Cr=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_r="documentKeyIndex",Nr=["indexId","uid","orderedDocumentKey"],Ar="documentOverlays",Dr=["userId","collectionPath","documentId"],Pr="collectionPathOverlayIndex",Lr=["userId","collectionPath","largestBatchId"],Rr="collectionGroupOverlayIndex",Or=["userId","collectionGroup","largestBatchId"],zr="globals",Mr=[$n,qn,Xn,Vn,or,Bn,pr,ur,yr,ir,gr,vr,br],Fr=[...Mr,Ar],jr=[$n,qn,Xn,Jn,or,Bn,pr,ur,yr,ir,gr,vr,br,Ar],Vr=jr,Br=[...Vr,wr,Sr,Ir],Ur=Br,$r=[...Br,zr];class qr extends fn{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Kr(e,t){const n=Et(e);return vn.M(n.ue,t)}function Hr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Qr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Qr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Qr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yr(this.root,e,this.comparator,!0)}}class Yr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xr.RED,this.left=null!=r?r:Xr.EMPTY,this.right=null!=i?i:Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Xr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St();if(this.right.isRed())throw St();const e=this.left.check();if(e!==this.right.check())throw St();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jr{constructor(e){this.comparator=e,this.data=new Qr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zr(this.data.getIterator())}getIteratorFrom(e){return new Zr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Jr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jr(this.comparator);return t.data=e,t}}class Zr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ei(e){return e.hasNext()?e.getNext():void 0}class ti{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new ti([])}unionWith(e){let t=new Jr(Zt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $t(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ni extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ni("Invalid base64 string: "+e):e}}(e);return new ri(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const ii=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(e){if(kt(!!e),"string"==typeof e){let t=0;const n=ii.exec(e);if(kt(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:oi(e.seconds),nanos:oi(e.nanos)}}function oi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ai(e){return"string"==typeof e?ri.fromBase64String(e):ri.fromUint8Array(e)}const li="server_timestamp",ui="__type__",ci="__previous_value__",di="__local_write_time__";function hi(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[ui])||void 0===n?void 0:n.stringValue)===li}function fi(e){const t=e.mapValue.fields[ci];return hi(t)?fi(t):t}function pi(e){const t=si(e.mapValue.fields[di].timestampValue);return new Gt(t.seconds,t.nanos)}class gi{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const mi="(default)";class yi{constructor(e,t){this.projectId=e,this.database=t||mi}static empty(){return new yi("","")}get isDefaultDatabase(){return this.database===mi}isEqual(e){return e instanceof yi&&e.projectId===this.projectId&&e.database===this.database}}const vi="__type__",bi="__max__",wi={mapValue:{fields:{__type__:{stringValue:bi}}}},xi="__vector__",Si="value",ki={nullValue:"NULL_VALUE"};function Ei(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hi(e)?4:Bi(e)?9007199254740991:ji(e)?10:11:St()}function Ti(e,t){if(e===t)return!0;const n=Ei(e);if(n!==Ei(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pi(e).isEqual(pi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=si(e.timestampValue),r=si(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ai(e.bytesValue).isEqual(ai(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return oi(e.geoPointValue.latitude)===oi(t.geoPointValue.latitude)&&oi(e.geoPointValue.longitude)===oi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return oi(e.integerValue)===oi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=oi(e.doubleValue),r=oi(t.doubleValue);return n===r?Ln(n)===Ln(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $t(e.arrayValue.values||[],t.arrayValue.values||[],Ti);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hr(n)!==Hr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ti(n[i],r[i])))return!1;return!0}(e,t);default:return St()}}function Ii(e,t){return void 0!==(e.values||[]).find((e=>Ti(e,t)))}function Ci(e,t){if(e===t)return 0;const n=Ei(e),r=Ei(t);if(n!==r)return jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=oi(e.integerValue||e.doubleValue),r=oi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _i(e.timestampValue,t.timestampValue);case 4:return _i(pi(e),pi(t));case 5:return Vt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ai(e),r=ai(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=jt(n[i],r[i]);if(0!==e)return e}return jt(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=jt(oi(e.latitude),oi(t.latitude));return 0!==n?n:jt(oi(e.longitude),oi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ni(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Si])||void 0===n?void 0:n.arrayValue,u=null===(r=a[Si])||void 0===r?void 0:r.arrayValue,c=jt((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:Ni(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===wi.mapValue&&t===wi.mapValue)return 0;if(e===wi.mapValue)return 1;if(t===wi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Vt(r[o],s[o]);if(0!==e)return e;const t=Ci(n[r[o]],i[s[o]]);if(0!==t)return t}return jt(r.length,s.length)}(e.mapValue,t.mapValue);default:throw St()}}function _i(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jt(e,t);const n=si(e),r=si(t),i=jt(n.seconds,r.seconds);return 0!==i?i:jt(n.nanos,r.nanos)}function Ni(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ci(n[i],r[i]);if(e)return e}return jt(n.length,r.length)}function Ai(e){return Di(e)}function Di(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=si(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ai(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return en.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Di(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Di(e.fields[i])}`;return n+"}"}(e.mapValue):St()}function Pi(e){switch(Ei(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fi(e);return t?16+Pi(t):16;case 5:return 2*e.stringValue.length;case 6:return ai(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Pi(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Gr(e.fields,((e,n)=>{t+=e.length+Pi(n)})),t}(e.mapValue);default:throw St()}}function Li(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ri(e){return!!e&&"integerValue"in e}function Oi(e){return!!e&&"arrayValue"in e}function zi(e){return!!e&&"nullValue"in e}function Mi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fi(e){return!!e&&"mapValue"in e}function ji(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[vi])||void 0===n?void 0:n.stringValue)===xi}function Vi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Vi(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Bi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===bi}const Ui={mapValue:{fields:{[vi]:{stringValue:xi},[Si]:{arrayValue:{}}}}};function $i(e){return"nullValue"in e?ki:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Li(yi.empty(),en.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?ji(e)?Ui:{mapValue:{}}:St()}function qi(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Li(yi.empty(),en.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Ui:"mapValue"in e?ji(e)?{mapValue:{}}:wi:St()}function Ki(e,t){const n=Ci(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Hi(e,t){const n=Ci(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vi(t)}setAll(e){let t=Zt.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Vi(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Fi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Gr(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Gi(Vi(this.value))}}function Wi(e){const t=[];return Gr(e.fields,((e,n)=>{const r=new Zt([e]);if(Fi(n)){const e=Wi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ti(t)}class Qi{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Qi(e,0,Wt.min(),Wt.min(),Wt.min(),Gi.empty(),0)}static newFoundDocument(e,t,n,r){return new Qi(e,1,t,Wt.min(),n,r,0)}static newNoDocument(e,t){return new Qi(e,2,t,Wt.min(),Wt.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new Qi(e,3,t,Wt.min(),Wt.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yi{constructor(e,t){this.position=e,this.inclusive=t}}function Xi(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?en.comparator(en.fromName(o.referenceValue),n.key):Ci(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ji(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ti(e.position[n],t.position[n]))return!1;return!0}class Zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function es(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ts{}class ns extends ts{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new hs(e,t,n):"array-contains"===t?new ms(e,n):"in"===t?new ys(e,n):"not-in"===t?new vs(e,n):"array-contains-any"===t?new bs(e,n):new ns(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new fs(e,n):new ps(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ci(t,this.value)):null!==t&&Ei(this.value)===Ei(t)&&this.matchesComparison(Ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return St()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends ts{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new rs(e,t)}matches(e){return is(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function is(e){return"and"===e.op}function ss(e){return"or"===e.op}function os(e){return as(e)&&is(e)}function as(e){for(const t of e.filters)if(t instanceof rs)return!1;return!0}function ls(e){if(e instanceof ns)return e.field.canonicalString()+e.op.toString()+Ai(e.value);if(os(e))return e.filters.map((e=>ls(e))).join(",");{const t=e.filters.map((e=>ls(e))).join(",");return`${e.op}(${t})`}}function us(e,t){return e instanceof ns?function(e,t){return t instanceof ns&&e.op===t.op&&e.field.isEqual(t.field)&&Ti(e.value,t.value)}(e,t):e instanceof rs?function(e,t){return t instanceof rs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&us(n,t.filters[r])),!0)}(e,t):void St()}function cs(e,t){const n=e.filters.concat(t);return rs.create(n,e.op)}function ds(e){return e instanceof ns?function(e){return`${e.field.canonicalString()} ${e.op} ${Ai(e.value)}`}(e):e instanceof rs?function(e){return e.op.toString()+" {"+e.getFilters().map(ds).join(" ,")+"}"}(e):"Filter"}class hs extends ns{constructor(e,t,n){super(e,t,n),this.key=en.fromName(n.referenceValue)}matches(e){const t=en.comparator(e.key,this.key);return this.matchesComparison(t)}}class fs extends ns{constructor(e,t){super(e,"in",t),this.keys=gs("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ps extends ns{constructor(e,t){super(e,"not-in",t),this.keys=gs("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>en.fromName(e.referenceValue)))}class ms extends ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oi(t)&&Ii(t.arrayValue,this.value)}}class ys extends ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ii(this.value.arrayValue,t)}}class vs extends ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ii(this.value.arrayValue,t)}}class bs extends ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ii(this.value.arrayValue,e)))}}class ws{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function xs(e){return new ws(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ss(e){const t=Et(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ls(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Pn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ai(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ai(e))).join(",")),t.le=e}return t.le}function ks(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!es(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!us(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ji(e.startAt,t.startAt)&&Ji(e.endAt,t.endAt)}function Es(e){return en.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ts(e,t){return e.filters.filter((e=>e instanceof ns&&e.field.isEqual(t)))}function Is(e,t,n){let r=ki,i=!0;for(const s of Ts(e,t)){let e=ki,t=!0;switch(s.op){case"<":case"<=":e=$i(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=ki}Ki({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ki({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Cs(e,t,n){let r=wi,i=!0;for(const s of Ts(e,t)){let e=wi,t=!0;switch(s.op){case">=":case">":e=qi(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=wi}Hi({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Hi({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class _s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Ns(e,t,n,r,i,s,o,a){return new _s(e,t,n,r,i,s,o,a)}function As(e){return new _s(e)}function Ds(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ps(e){return null!==e.collectionGroup}function Ls(e){const t=Et(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Jr(Zt.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Zi(r,n))})),e.has(Zt.keyField().canonicalString())||t.he.push(new Zi(Zt.keyField(),n))}return t.he}function Rs(e){const t=Et(e);return t.Pe||(t.Pe=Os(t,Ls(e))),t.Pe}function Os(e,t){if("F"===e.limitType)return xs(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Zi(e.field,t)}));const n=e.endAt?new Yi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yi(e.startAt.position,e.startAt.inclusive):null;return xs(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zs(e,t,n){return new _s(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ms(e,t){return ks(Rs(e),Rs(t))&&e.limitType===t.limitType}function Fs(e){return`${Ss(Rs(e))}|lt:${e.limitType}`}function js(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ds(e))).join(", ")}]`),Pn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ai(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ai(e))).join(",")),`Target(${t})`}(Rs(e))}; limitType=${e.limitType})`}function Vs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):en.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ls(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Xi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ls(e),t))&&!(e.endAt&&!function(e,t,n){const r=Xi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ls(e),t))}(e,t)}function Bs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Us(e){return(t,n)=>{let r=!1;for(const i of Ls(e)){const e=$s(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function $s(e,t,n){const r=e.field.isKeyField()?en.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ci(r,i):St()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return St()}}class qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Wr(this.inner)}size(){return this.innerSize}}const Ks=new Qr(en.comparator);function Hs(){return Ks}const Gs=new Qr(en.comparator);function Ws(){let e=Gs;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Qs(e){let t=Gs;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ys(){return Js()}function Xs(){return Js()}function Js(){return new qs((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Zs=new Qr(en.comparator),eo=new Jr(en.comparator);function to(){let e=eo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const no=new Jr(jt);function ro(){return no}function io(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ln(t)?"-0":t}}function so(e){return{integerValue:""+e}}function oo(e,t){return Rn(t)?so(t):io(e,t)}class ao{constructor(){this._=void 0}}function lo(e,t,n){return e instanceof ho?function(e,t){const n={fields:{[ui]:{stringValue:li},[di]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&hi(t)&&(t=fi(t)),t&&(n.fields[ci]=t),{mapValue:n}}(n,t):e instanceof fo?po(e,t):e instanceof go?mo(e,t):function(e,t){const n=co(e,t),r=vo(n)+vo(e.Ie);return Ri(n)&&Ri(e.Ie)?so(r):io(e.serializer,r)}(e,t)}function uo(e,t,n){return e instanceof fo?po(e,t):e instanceof go?mo(e,t):n}function co(e,t){return e instanceof yo?function(e){return Ri(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ho extends ao{}class fo extends ao{constructor(e){super(),this.elements=e}}function po(e,t){const n=bo(t);for(const r of e.elements)n.some((e=>Ti(e,r)))||n.push(r);return{arrayValue:{values:n}}}class go extends ao{constructor(e){super(),this.elements=e}}function mo(e,t){let n=bo(t);for(const r of e.elements)n=n.filter((e=>!Ti(e,r)));return{arrayValue:{values:n}}}class yo extends ao{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function vo(e){return oi(e.integerValue||e.doubleValue)}function bo(e){return Oi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wo{constructor(e,t){this.field=e,this.transform=t}}class xo{constructor(e,t){this.version=e,this.transformResults=t}}class So{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new So}static exists(e){return new So(void 0,e)}static updateTime(e){return new So(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ko(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Eo{}function To(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Oo(e.key,So.none()):new Ao(e.key,e.data,So.none());{const n=e.data,r=Gi.empty();let i=new Jr(Zt.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Do(e.key,r,new ti(i.toArray()),So.none())}}function Io(e,t,n){e instanceof Ao?function(e,t,n){const r=e.value.clone(),i=Lo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Do?function(e,t,n){if(!ko(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Lo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Po(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Co(e,t,n,r){return e instanceof Ao?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=e.value.clone(),s=Ro(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Do?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=Ro(e.fieldTransforms,r,t),s=t.data;return s.setAll(Po(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ko(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _o(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=co(r.transform,e||null);null!=i&&(null===n&&(n=Gi.empty()),n.set(r.field,i))}return n||null}function No(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$t(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fo&&t instanceof fo||e instanceof go&&t instanceof go?$t(e.elements,t.elements,Ti):e instanceof yo&&t instanceof yo?Ti(e.Ie,t.Ie):e instanceof ho&&t instanceof ho}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ao extends Eo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Do extends Eo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Po(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Lo(e,t,n){const r=new Map;kt(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,uo(o,a,n[i]))}return r}function Ro(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lo(e,s,t))}return r}class Oo extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zo extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mo{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Io(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Co(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Co(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Xs();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=To(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Wt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),to())}isEqual(e){return this.batchId===e.batchId&&$t(this.mutations,e.mutations,((e,t)=>No(e,t)))&&$t(this.baseMutations,e.baseMutations,((e,t)=>No(e,t)))}}class Fo{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){kt(e.mutations.length===n.length);let r=Zs;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Fo(e,t,n,r)}}class jo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vo{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bo,Uo;function $o(e){switch(e){case Tt.OK:return St();case Tt.CANCELLED:case Tt.UNKNOWN:case Tt.DEADLINE_EXCEEDED:case Tt.RESOURCE_EXHAUSTED:case Tt.INTERNAL:case Tt.UNAVAILABLE:case Tt.UNAUTHENTICATED:return!1;case Tt.INVALID_ARGUMENT:case Tt.NOT_FOUND:case Tt.ALREADY_EXISTS:case Tt.PERMISSION_DENIED:case Tt.FAILED_PRECONDITION:case Tt.ABORTED:case Tt.OUT_OF_RANGE:case Tt.UNIMPLEMENTED:case Tt.DATA_LOSS:return!0;default:return St()}}function qo(e){if(void 0===e)return bt("GRPC error has no .code"),Tt.UNKNOWN;switch(e){case Bo.OK:return Tt.OK;case Bo.CANCELLED:return Tt.CANCELLED;case Bo.UNKNOWN:return Tt.UNKNOWN;case Bo.DEADLINE_EXCEEDED:return Tt.DEADLINE_EXCEEDED;case Bo.RESOURCE_EXHAUSTED:return Tt.RESOURCE_EXHAUSTED;case Bo.INTERNAL:return Tt.INTERNAL;case Bo.UNAVAILABLE:return Tt.UNAVAILABLE;case Bo.UNAUTHENTICATED:return Tt.UNAUTHENTICATED;case Bo.INVALID_ARGUMENT:return Tt.INVALID_ARGUMENT;case Bo.NOT_FOUND:return Tt.NOT_FOUND;case Bo.ALREADY_EXISTS:return Tt.ALREADY_EXISTS;case Bo.PERMISSION_DENIED:return Tt.PERMISSION_DENIED;case Bo.FAILED_PRECONDITION:return Tt.FAILED_PRECONDITION;case Bo.ABORTED:return Tt.ABORTED;case Bo.OUT_OF_RANGE:return Tt.OUT_OF_RANGE;case Bo.UNIMPLEMENTED:return Tt.UNIMPLEMENTED;case Bo.DATA_LOSS:return Tt.DATA_LOSS;default:return St()}}(Uo=Bo||(Bo={}))[Uo.OK=0]="OK",Uo[Uo.CANCELLED=1]="CANCELLED",Uo[Uo.UNKNOWN=2]="UNKNOWN",Uo[Uo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uo[Uo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uo[Uo.NOT_FOUND=5]="NOT_FOUND",Uo[Uo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uo[Uo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uo[Uo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uo[Uo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uo[Uo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uo[Uo.ABORTED=10]="ABORTED",Uo[Uo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uo[Uo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uo[Uo.INTERNAL=13]="INTERNAL",Uo[Uo.UNAVAILABLE=14]="UNAVAILABLE",Uo[Uo.DATA_LOSS=15]="DATA_LOSS";let Ko=null;const Ho=new Je([4294967295,4294967295],0);function Go(e){const t=Mt().encode(e),n=new Ze;return n.update(t),new Uint8Array(n.digest())}function Wo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Je([n,r],0),new Je([i,s],0)]}class Qo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Yo(`Invalid padding: ${t}`);if(n<0)throw new Yo(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Yo(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Yo(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Je.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Je.fromNumber(n)));return 1===r.compare(Ho)&&(r=new Je([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=Go(e),[n,r]=Wo(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Qo(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ee)return;const t=Go(e),[n,r]=Wo(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xo{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xo(Wt.min(),r,new Qr(jt),Hs(),to())}}class Jo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Jo(n,t,to(),to(),to())}}class Zo{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class ea{constructor(e,t){this.targetId=e,this.ge=t}}class ta{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ri.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class na{constructor(){this.pe=0,this.ye=sa(),this.we=ri.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=to(),t=to(),n=to();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:St()}})),new Jo(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=sa()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,kt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class ra{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Hs(),this.$e=ia(),this.Ue=ia(),this.Ke=new Qr(jt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:St()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(Es(i))if(0===n){const e=new en(i.path);this.ze(t,e,Qi.newNoDocument(e,Wt.min()))}else kt(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Ko||Ko.rt(function(e,t,n,r,i){var s,o,a,l,u,c;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=ai(n).toUint8Array()}catch(e){if(e instanceof ni)return wt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Qo(s,r,i)}catch(e){return wt(e instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Es(i.target)){const t=new en(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Qi.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=to();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Xo(e,t,this.Ke,this.Qe,n);return this.Qe=Hs(),this.$e=ia(),this.Ue=ia(),this.Ke=new Qr(jt),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new na,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Jr(jt),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Jr(jt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||vt("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new na),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function ia(){return new Qr(en.comparator)}function sa(){return new Qr(en.comparator)}const oa={asc:"ASCENDING",desc:"DESCENDING"},aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},la={and:"AND",or:"OR"};class ua{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ca(e,t){return e.useProto3Json||Pn(t)?t:{value:t}}function da(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ha(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fa(e,t){return da(e,t.toTimestamp())}function pa(e){return kt(!!e),Wt.fromTimestamp(function(e){const t=si(e);return new Gt(t.seconds,t.nanos)}(e))}function ga(e,t){return ma(e,t).canonicalString()}function ma(e,t){const n=function(e){return new Xt(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ya(e){const t=Xt.fromString(e);return kt(ja(t)),t}function va(e,t){return ga(e.databaseId,t.path)}function ba(e,t){const n=ya(t);if(n.get(1)!==e.databaseId.projectId)throw new It(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new It(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new en(ka(n))}function wa(e,t){return ga(e.databaseId,t)}function xa(e){const t=ya(e);return 4===t.length?Xt.emptyPath():ka(t)}function Sa(e){return new Xt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ka(e){return kt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ea(e,t,n){return{name:va(e,t),fields:n.value.mapValue.fields}}function Ta(e,t,n){const r=ba(e,t.name),i=pa(t.updateTime),s=t.createTime?pa(t.createTime):Wt.min(),o=new Gi({mapValue:{fields:t.fields}}),a=Qi.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ia(e,t){let n;if(t instanceof Ao)n={update:Ea(e,t.key,t.value)};else if(t instanceof Oo)n={delete:va(e,t.key)};else if(t instanceof Do)n={update:Ea(e,t.key,t.data),updateMask:Fa(t.fieldMask)};else{if(!(t instanceof zo))return St();n={verify:va(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ho)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof go)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yo)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw St()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fa(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:St()}(e,t.precondition)),n}function Ca(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?So.updateTime(pa(e.updateTime)):void 0!==e.exists?So.exists(e.exists):So.none()}(t.currentDocument):So.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)kt("REQUEST_TIME"===t.setToServerValue),n=new ho;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new fo(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new go(e)}else"increment"in t?n=new yo(e,t.increment):St();const r=Zt.fromServerFormat(t.fieldPath);return new wo(r,n)}(e,t))):[];if(t.update){t.update.name;const i=ba(e,t.update.name),s=new Gi({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ti(t.map((e=>Zt.fromServerFormat(e))))}(t.updateMask);return new Do(i,s,e,n,r)}return new Ao(i,s,n,r)}if(t.delete){const r=ba(e,t.delete);return new Oo(r,n)}if(t.verify){const r=ba(e,t.verify);return new zo(r,n)}return St()}function _a(e,t){return{documents:[wa(e,t.path)]}}function Na(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wa(e,i);const s=function(e){if(0!==e.length)return Ma(rs.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Oa(e.field),direction:Pa(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ca(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Aa(e){let t=xa(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){kt(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Da(e);return t instanceof rs&&os(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Zi(za(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Pn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Yi(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Yi(n,t)}(n.endAt)),Ns(t,i,o,s,a,"F",l,u)}function Da(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=za(e.unaryFilter.field);return ns.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=za(e.unaryFilter.field);return ns.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=za(e.unaryFilter.field);return ns.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=za(e.unaryFilter.field);return ns.create(i,"!=",{nullValue:"NULL_VALUE"});default:return St()}}(e):void 0!==e.fieldFilter?function(e){return ns.create(za(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return rs.create(e.compositeFilter.filters.map((e=>Da(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return St()}}(e.compositeFilter.op))}(e):St()}function Pa(e){return oa[e]}function La(e){return aa[e]}function Ra(e){return la[e]}function Oa(e){return{fieldPath:e.canonicalString()}}function za(e){return Zt.fromServerFormat(e.fieldPath)}function Ma(e){return e instanceof ns?function(e){if("=="===e.op){if(Mi(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NAN"}};if(zi(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mi(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NOT_NAN"}};if(zi(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(e.field),op:La(e.op),value:e.value}}}(e):e instanceof rs?function(e){const t=e.getFilters().map((e=>Ma(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ra(e.op),filters:t}}}(e):St()}function Fa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ja(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Va{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wt.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Wt.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ri.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ba{constructor(e){this.Tt=e}}function Ua(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$a(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:va(e,t.key),fields:t.data.value.mapValue.fields,updateTime:da(e,t.version.toTimestamp()),createTime:da(e,t.createTime.toTimestamp())}}(e.Tt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qa(t.version)};else{if(!t.isUnknownDocument())return St();r.unknownDocument={path:n.path.toArray(),version:qa(t.version)}}return r}function $a(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qa(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ka(e){const t=new Gt(e.seconds,e.nanoseconds);return Wt.fromTimestamp(t)}function Ha(e,t){const n=(t.baseMutations||[]).map((t=>Ca(e.Tt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Ca(e.Tt,t))),i=Gt.fromMillis(t.localWriteTimeMs);return new Mo(t.batchId,i,n,r)}function Ga(e){const t=Ka(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ka(e.lastLimboFreeSnapshotVersion):Wt.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return kt(1===e.documents.length),Rs(As(xa(e.documents[0])))}(e.query):function(e){return Rs(Aa(e))}(e.query),new Va(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ri.fromBase64String(e.resumeToken))}function Wa(e,t){const n=qa(t.snapshotVersion),r=qa(t.lastLimboFreeSnapshotVersion);let i;i=Es(t.target)?_a(e.Tt,t.target):Na(e.Tt,t.target).ht;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ss(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qa(e){const t=Aa({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zs(t,t.limit,"L"):t}function Ya(e,t){return new jo(t.largestBatchId,Ca(e.Tt,t.overlayMutation))}function Xa(e,t){const n=t.path.lastSegment();return[e,zn(t.path.popLast()),n]}function Ja(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:qa(r.readTime),documentKey:zn(r.documentKey.path),largestBatchId:r.largestBatchId}}class Za{getBundleMetadata(e,t){return el(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Ka(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return el(e).put(function(e){return{bundleId:e.id,createTime:qa(pa(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return tl(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Qa(e.bundledQuery),readTime:Ka(e.readTime)}}(e)}))}saveNamedQuery(e,t){return tl(e).put(function(e){return{name:e.name,readTime:qa(pa(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function el(e){return Kr(e,vr)}function tl(e){return Kr(e,br)}class nl{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new nl(e,n)}getOverlay(e,t){return rl(e).get(Xa(this.userId,t)).next((e=>e?Ya(this.serializer,e):null))}getOverlays(e,t){const n=Ys();return gn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new jo(t,i);r.push(this.Et(e,s))})),gn.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(zn(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(rl(e).J(Pr,r))})),gn.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Ys(),i=zn(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return rl(e).G(Pr,s).next((e=>{for(const t of e){const e=Ya(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Ys();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rl(e).Z({index:Rr,range:o},((e,t,n)=>{const o=Ya(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}Et(e,t){return rl(e).put(function(e,t,n){const[r,i,s]=Xa(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ia(e.Tt,n.mutation)}}(this.serializer,this.userId,t))}}function rl(e){return Kr(e,Ar)}class il{dt(e){return Kr(e,zr)}getSessionToken(e){return this.dt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?ri.fromUint8Array(t):ri.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class sl{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(oi(e.integerValue));else if("doubleValue"in e){const n=oi(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Ln(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=si(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(ai(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Bi(e)?this.ft(t,Number.MAX_SAFE_INTEGER):ji(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):St()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=Si,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(oi(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),en.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}sl.xt=new sl;const ol=255;function al(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function ll(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=al(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class ul{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Nt(e);else if(e<2048)this.Nt(960|e>>>6),this.Nt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Nt(480|e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e);else{const e=t.codePointAt(0);this.Nt(240|e>>>18),this.Nt(128|63&e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e)}}this.Bt()}$t(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.kt(e);else if(e<2048)this.kt(960|e>>>6),this.kt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.kt(480|e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e);else{const e=t.codePointAt(0);this.kt(240|e>>>18),this.kt(128|63&e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e)}}this.qt()}Ut(e){const t=this.Kt(e),n=ll(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Gt(e){const t=this.Kt(e),n=ll(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}zt(){this.jt(ol),this.jt(255)}Ht(){this.Jt(ol),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Nt(e){const t=255&e;0===t?(this.jt(0),this.jt(255)):t===ol?(this.jt(ol),this.jt(0)):this.jt(t)}kt(e){const t=255&e;0===t?(this.Jt(0),this.Jt(255)):t===ol?(this.Jt(ol),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class cl{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class dl{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class hl{constructor(){this.Zt=new ul,this.Xt=new cl(this.Zt),this.en=new dl(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return 0===e?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}class fl{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}nn(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new fl(this.indexId,this.documentKey,this.arrayValue,n)}}function pl(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=gl(e.arrayValue,t.arrayValue),0!==n?n:(n=gl(e.directionalValue,t.directionalValue),0!==n?n:en.comparator(e.documentKey,t.documentKey)))}function gl(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class ml{constructor(e){this.rn=new Jr(((e,t)=>Zt.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const e=t;e.isInequality()?this.rn=this.rn.add(e):this._n.push(e)}}get an(){return this.rn.size>1}un(e){if(kt(e.collectionGroup===this.collectionId),this.an)return!1;const t=rn(e);if(void 0!==t&&!this.cn(t))return!1;const n=sn(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.cn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.rn.size>0){const e=this.rn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.ln(e,t)||!this.hn(this.sn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.sn.length||!this.hn(this.sn[s++],e))return!1}return!0}Pn(){if(this.an)return null;let e=new Jr(Zt.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new on(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new on(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new on(n.field,"asc"===n.dir?0:1)));return new nn(nn.UNKNOWN_ID,this.collectionId,t,an.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yl(e){var t,n;if(kt(e instanceof ns||e instanceof rs),e instanceof ns){if(e instanceof ys){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ns.create(e.field,"==",t))))||[];return rs.create(r,"or")}return e}const r=e.filters.map((e=>yl(e)));return rs.create(r,e.op)}function vl(e){if(0===e.getFilters().length)return[];const t=Sl(yl(e));return kt(xl(t)),bl(t)||wl(t)?[t]:t.getFilters()}function bl(e){return e instanceof ns}function wl(e){return e instanceof rs&&os(e)}function xl(e){return bl(e)||wl(e)||function(e){if(e instanceof rs&&ss(e)){for(const t of e.getFilters())if(!bl(t)&&!wl(t))return!1;return!0}return!1}(e)}function Sl(e){if(kt(e instanceof ns||e instanceof rs),e instanceof ns)return e;if(1===e.filters.length)return Sl(e.filters[0]);const t=e.filters.map((e=>Sl(e)));let n=rs.create(t,e.op);return n=Tl(n),xl(n)?n:(kt(n instanceof rs),kt(is(n)),kt(n.filters.length>1),n.filters.reduce(((e,t)=>kl(e,t))))}function kl(e,t){let n;return kt(e instanceof ns||e instanceof rs),kt(t instanceof ns||t instanceof rs),n=e instanceof ns?t instanceof ns?function(e,t){return rs.create([e,t],"and")}(e,t):El(e,t):t instanceof ns?El(t,e):function(e,t){if(kt(e.filters.length>0&&t.filters.length>0),is(e)&&is(t))return cs(e,t.getFilters());const n=ss(e)?e:t,r=ss(e)?t:e,i=n.filters.map((e=>kl(e,r)));return rs.create(i,"or")}(e,t),Tl(n)}function El(e,t){if(is(t))return cs(t,e.getFilters());{const n=t.filters.map((t=>kl(e,t)));return rs.create(n,"or")}}function Tl(e){if(kt(e instanceof ns||e instanceof rs),e instanceof ns)return e;const t=e.getFilters();if(1===t.length)return Tl(t[0]);if(as(e))return e;const n=t.map((e=>Tl(e))),r=[];return n.forEach((t=>{t instanceof ns?r.push(t):t instanceof rs&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:rs.create(r,e.op)}class Il{constructor(){this.Tn=new Cl}addToCollectionParentIndex(e,t){return this.Tn.add(t),gn.resolve()}getCollectionParents(e,t){return gn.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return gn.resolve()}deleteFieldIndex(e,t){return gn.resolve()}deleteAllFieldIndexes(e){return gn.resolve()}createTargetIndexes(e,t){return gn.resolve()}getDocumentsMatchingTarget(e,t){return gn.resolve(null)}getIndexType(e,t){return gn.resolve(0)}getFieldIndexes(e,t){return gn.resolve([])}getNextCollectionGroupToUpdate(e){return gn.resolve(null)}getMinOffset(e,t){return gn.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,t){return gn.resolve(cn.min())}updateCollectionGroup(e,t,n){return gn.resolve()}updateIndexEntries(e,t){return gn.resolve()}}class Cl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jr(Xt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Jr(Xt.comparator)).toArray()}}const _l="IndexedDbIndexManager",Nl=new Uint8Array(0);class Al{constructor(e,t){this.databaseId=t,this.In=new Cl,this.En=new qs((e=>Ss(e)),((e,t)=>ks(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.In.add(t)}));const i={collectionId:n,parent:zn(r)};return Dl(e).put(i)}return gn.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[qt(t),""],!1,!0);return Dl(e).G(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(jn(r.parent))}return n}))}addFieldIndex(e,t){const n=Ll(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Rl(e);return i.next((e=>{n.put(Ja(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Ll(e),r=Rl(e),i=Pl(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ll(e),n=Pl(e),r=Rl(e);return t.J().next((()=>n.J())).next((()=>r.J()))}createTargetIndexes(e,t){return gn.forEach(this.dn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new ml(t).Pn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Pl(e);let r=!0;const i=new Map;return gn.forEach(this.dn(t),(t=>this.An(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=to();const r=[];return gn.forEach(i,((i,s)=>{vt(_l,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${Ss(t)}`);const o=function(e,t){const n=rn(t);if(void 0===n)return null;for(const r of Ts(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of sn(t))for(const t of Ts(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of sn(t)){const t=0===i.kind?Is(e,i.fieldPath,e.startAt):Cs(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Yi(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of sn(t)){const t=0===i.kind?Cs(e,i.fieldPath,e.endAt):Is(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Yi(n,r)}(s,i),c=this.Rn(i,s,l),d=this.Rn(i,s,u),h=this.Vn(i,s,a),f=this.mn(i.indexId,o,c,l.inclusive,d,u.inclusive,h);return gn.forEach(f,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=en.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return gn.resolve(null)}))}dn(e){let t=this.En.get(e);return t||(t=0===e.filters.length?[e]:vl(rs.create(e.filters,"and")).map((t=>xs(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.En.set(e,t),t)}mn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.fn(t[c/l]):Nl,d=this.gn(e,a,n[c%l],r),h=this.pn(e,a,i[c%l],s),f=o.map((t=>this.gn(e,a,t,!0)));u.push(...this.createRange(d,h,f))}return u}gn(e,t,n,r){const i=new fl(e,en.empty(),t,n);return r?i:i.nn()}pn(e,t,n,r){const i=new fl(e,en.empty(),t,n);return r?i.nn():i}An(e,t){const n=new ml(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.un(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.dn(t);return gn.forEach(r,(t=>this.An(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Jr(Zt.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}yn(e,t){const n=new hl;for(const r of sn(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.tn(r.kind);sl.xt.At(e,i)}return n.Yt()}fn(e){const t=new hl;return sl.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new hl;return sl.xt.At(Li(this.databaseId,t),n.tn(function(e){const t=sn(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(null===n)return[];let r=[];r.push(new hl);let i=0;for(const s of sn(e)){const e=n[i++];for(const n of r)if(this.Sn(t,s.fieldPath)&&Oi(e))r=this.bn(r,s,e);else{const t=n.tn(s.kind);sl.xt.At(e,t)}}return this.Dn(r)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}bn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new hl;n.seed(e.Yt()),sl.xt.At(s,n.tn(t.kind)),i.push(n)}return i}Sn(e,t){return!!e.filters.find((e=>e instanceof ns&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Ll(e),r=Rl(e);return(t?n.G(xr,IDBKeyRange.bound(t,t)):n.G()).next((e=>{const t=[];return gn.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new an(t.sequenceNumber,new cn(Ka(t.readTime),new en(jn(t.documentKey)),t.largestBatchId)):an.empty(),r=e.fields.map((e=>{let[t,n]=e;return new on(Zt.fromServerFormat(t),n)}));return new nn(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:jt(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Ll(e),i=Rl(e);return this.vn(e).next((e=>r.G(xr,IDBKeyRange.bound(t,t)).next((t=>gn.forEach(t,(t=>i.put(Ja(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return gn.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?gn.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),gn.forEach(i,(n=>this.Cn(e,t,n).next((t=>{const i=this.Fn(r,n);return t.isEqual(i)?gn.resolve():this.Mn(e,r,n,t,i)})))))))}))}xn(e,t,n,r){return Pl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,r){return Pl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const r=Pl(e);let i=new Jr(pl);return r.Z({index:_r,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},((e,r)=>{i=i.add(new fl(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Fn(e,t){let n=new Jr(pl);const r=this.yn(t,e);if(null==r)return n;const i=rn(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Oi(s))for(const i of s.arrayValue.values||[])n=n.add(new fl(t.indexId,e.key,this.fn(i),r))}else n=n.add(new fl(t.indexId,e.key,Nl,r));return n}Mn(e,t,n,r,i){vt(_l,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ei(s),l=ei(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=ei(o)):t?(i(a),a=ei(s)):(a=ei(s),l=ei(o))}}(r,i,pl,(r=>{s.push(this.xn(e,t,n,r))}),(r=>{s.push(this.On(e,t,n,r))})),gn.waitFor(s)}vn(e){let t=1;return Rl(e).Z({index:Er,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>pl(e,t))).filter(((e,t,n)=>!t||0!==pl(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=pl(s,e),i=pl(s,t);if(0===n)r[0]=e.nn();else if(n>0&&i<0)r.push(s),r.push(s.nn());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Nn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Nl,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Nl,[]];i.push(IDBKeyRange.bound(e,t))}return i}Nn(e,t){return pl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ol)}getMinOffset(e,t){return gn.mapArray(this.dn(t),(t=>this.An(e,t).next((e=>e||St())))).next(Ol)}}function Dl(e){return Kr(e,gr)}function Pl(e){return Kr(e,Ir)}function Ll(e){return Kr(e,wr)}function Rl(e){return Kr(e,Sr)}function Ol(e){kt(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;dn(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new cn(t.readTime,t.documentKey,n)}const zl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ml=41943040;class Fl{static withCacheSize(e){return new Fl(e,Fl.DEFAULT_COLLECTION_PERCENTILE,Fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function jl(e,t,n){const r=e.store(qn),i=e.store(Xn),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{kt(1===a)})));const u=[];for(const c of n.mutations){const e=Qn(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return gn.waitFor(s).next((()=>u))}function Vl(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw St();t=e.noDocument}return JSON.stringify(t).length}Fl.DEFAULT_COLLECTION_PERCENTILE=10,Fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fl.DEFAULT=new Fl(Ml,Fl.DEFAULT_COLLECTION_PERCENTILE,Fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fl.DISABLED=new Fl(-1,0,0);class Bl{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Bn={}}static It(e,t,n,r){kt(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Bl(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).Z({index:Hn,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ql(e),s=$l(e);return s.add({}).next((o=>{kt("number"==typeof o);const a=new Mo(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ia(e.Tt,t))),i=n.mutations.map((t=>Ia(e.Tt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new Jr(((e,t)=>jt(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Qn(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Yn))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Bn[o]=a.keys()})),gn.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return $l(e).get(t).next((e=>e?(kt(e.userId===this.userId),Ha(this.serializer,e)):null))}Ln(e,t){return this.Bn[t]?gn.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return $l(e).Z({index:Hn,range:r},((e,t,r)=>{t.userId===this.userId&&(kt(t.batchId>=n),i=Ha(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Dn;return $l(e).Z({index:Hn,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Dn],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).G(Hn,t).next((e=>e.map((e=>Ha(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Wn(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ql(e).Z({range:r},((n,r,s)=>{const[o,a,l]=n,u=jn(a);if(o===this.userId&&t.path.isEqual(u))return $l(e).get(l).next((e=>{if(!e)throw St();kt(e.userId===this.userId),i.push(Ha(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jr(jt);const r=[];return t.forEach((t=>{const i=Wn(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ql(e).Z({range:s},((e,r,i)=>{const[s,o,a]=e,l=jn(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),gn.waitFor(r).next((()=>this.kn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Wn(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Jr(jt);return ql(e).Z({range:s},((e,t,i)=>{const[s,a,l]=e,u=jn(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.kn(e,o)))}kn(e,t){const n=[],r=[];return t.forEach((t=>{r.push($l(e).get(t).next((e=>{if(null===e)throw St();kt(e.userId===this.userId),n.push(Ha(this.serializer,e))})))})),gn.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return jl(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.qn(t.batchId)})),gn.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return gn.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ql(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=jn(e[1]);r.push(t)}else n.done()})).next((()=>{kt(0===r.length)}))}))}containsKey(e,t){return Ul(e,this.userId,t)}Qn(e){return Kl(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Dn,lastStreamToken:""}))}}function Ul(e,t,n){const r=Wn(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ql(e).Z({range:s,Y:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function $l(e){return Kr(e,qn)}function ql(e){return Kr(e,Xn)}function Kl(e){return Kr(e,$n)}class Hl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Hl(0)}static Kn(){return new Hl(-1)}}class Gl{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next((t=>{const n=new Hl(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Wn(e).next((e=>Wt.fromTimestamp(new Gt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Wn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Wn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Gn(e,r))))}addTargetData(e,t){return this.zn(e,t).next((()=>this.Wn(e).next((n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wl(e).delete(t.targetId))).next((()=>this.Wn(e))).next((t=>(kt(t.targetCount>0),t.targetCount-=1,this.Gn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Wl(e).Z(((s,o)=>{const a=Ga(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>gn.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Wl(e).Z(((e,n)=>{const r=Ga(n);t(r)}))}Wn(e){return Ql(e).get(fr).next((e=>(kt(null!==e),e)))}Gn(e,t){return Ql(e).put(fr,t)}zn(e,t){return Wl(e).put(Wa(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ss(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Wl(e).Z({range:r,index:ar},((e,n,r)=>{const s=Ga(n);ks(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Yl(e);return t.forEach((t=>{const s=zn(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),gn.waitFor(r)}removeMatchingKeys(e,t,n){const r=Yl(e);return gn.forEach(t,(t=>{const i=zn(t.path);return gn.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Yl(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Yl(e);let i=to();return r.Z({range:n,Y:!0},((e,t,n)=>{const r=jn(e[1]),s=new en(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=zn(t.path),r=IDBKeyRange.bound([n],[qt(n)],!1,!0);let i=0;return Yl(e).Z({index:dr,Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}lt(e,t){return Wl(e).get(t).next((e=>e?Ga(e):null))}}function Wl(e){return Kr(e,or)}function Ql(e){return Kr(e,pr)}function Yl(e){return Kr(e,ur)}const Xl="LruGarbageCollector",Jl=1048576;function Zl(e,t){let[n,r]=e,[i,s]=t;const o=jt(n,i);return 0===o?jt(r,s):o}class eu{constructor(e){this.Hn=e,this.buffer=new Jr(Zl),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Zl(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){vt(Xl,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Sn(e)?vt(Xl,"Ignoring IndexedDB error during garbage collection: ",e):await pn(e)}await this.er(3e5)}))}}class nu{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return gn.resolve(An.ae);const n=new eu(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),gn.resolve(zl)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zl):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),yt()<=D.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),gn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function ru(e,t){return new nu(e,t)}class iu{constructor(e,t){this.db=e,this.garbageCollector=ru(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,((e,n)=>t(n)))}addReference(e,t,n){return su(e,n)}removeReference(e,t,n){return su(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return su(e,t)}ar(e,t){return function(e,t){let n=!1;return Kl(e).X((r=>Ul(e,r,t).next((e=>(e&&(n=!0),gn.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this._r(e,((s,o)=>{if(o<=t){const t=this.ar(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Wt.min()),Yl(e).delete(function(e){return[0,zn(e.path)]}(s)))))}));r.push(t)}})).next((()=>gn.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return su(e,t)}_r(e,t){const n=Yl(e);let r,i=An.ae;return n.Z({index:dr},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==An.ae&&t(new en(jn(r)),i),i=l,r=a):i=An.ae})).next((()=>{i!==An.ae&&t(new en(jn(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function su(e,t){return Yl(e).put(function(e,t){return{targetId:0,path:zn(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ou{constructor(){this.changes=new qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?gn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class au{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return du(e).put(n)}removeEntry(e,t,n){return du(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],$a(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.ur(e,n))))}getEntry(e,t){let n=Qi.newInvalidDocument(t);return du(e).Z({index:er,range:IDBKeyRange.only(hu(t))},((e,r)=>{n=this.cr(t,r)})).next((()=>n))}lr(e,t){let n={size:0,document:Qi.newInvalidDocument(t)};return du(e).Z({index:er,range:IDBKeyRange.only(hu(t))},((e,r)=>{n={document:this.cr(t,r),size:Vl(r)}})).next((()=>n))}getEntries(e,t){let n=Hs();return this.hr(e,t,((e,t)=>{const r=this.cr(e,t);n=n.insert(e,r)})).next((()=>n))}Pr(e,t){let n=Hs(),r=new Qr(en.comparator);return this.hr(e,t,((e,t)=>{const i=this.cr(e,t);n=n.insert(e,i),r=r.insert(e,Vl(t))})).next((()=>({documents:n,Tr:r})))}hr(e,t,n){if(t.isEmpty())return gn.resolve();let r=new Jr(pu);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(hu(r.first()),hu(r.last())),s=r.getIterator();let o=s.getNext();return du(e).Z({index:er,range:i},((e,t,r)=>{const i=en.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&pu(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.W(hu(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),$a(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return du(e).G(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Hs();for(const i of e){const e=this.cr(en.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Vs(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Hs();const s=fu(t,n),o=fu(t,cn.max());return du(e).Z({index:nr,range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.cr(en.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new uu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return cu(e).get(sr).next((e=>(kt(!!e),e)))}ur(e,t){return cu(e).put(sr,t)}cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ta(e.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=en.fromSegments(t.noDocument.path),r=Ka(t.noDocument.readTime);n=Qi.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return St();{const e=en.fromSegments(t.unknownDocument.path),r=Ka(t.unknownDocument.version);n=Qi.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Gt(e[0],e[1]);return Wt.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Wt.min()))return e}return Qi.newInvalidDocument(e)}}function lu(e){return new au(e)}class uu extends ou{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new qs((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Jr(((e,t)=>jt(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Er.get(i);if(t.push(this.Ir.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Ua(this.Ir.serializer,s);r=r.add(i.path.popLast());const l=Vl(a);n+=l-o.size,t.push(this.Ir.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Ua(this.Ir.serializer,s.convertToNoDocument(Wt.min()));t.push(this.Ir.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Ir.updateMetadata(e,n)),gn.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next((e=>(this.Er.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next((e=>{let{documents:t,Tr:n}=e;return n.forEach(((e,n)=>{this.Er.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function cu(e){return Kr(e,ir)}function du(e){return Kr(e,Jn)}function hu(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fu(e,t){const n=t.documentKey.path.toArray();return[e,$a(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pu(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=jt(n[s],r[s]),i)return i;return i=jt(n.length,r.length),i||(i=jt(n[n.length-2],r[r.length-2]),i||jt(n[n.length-1],r[r.length-1]))}class gu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Co(n.mutation,e,ti.empty(),Gt.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,to()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:to();const r=Ys();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ws();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ys();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,to())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Hs();const s=Js(),o=Js();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Do)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Co(o.mutation,t,o.mutation.getFieldMask(),Gt.now())):s.set(t.key,ti.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new gu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Js();let r=new Qr(((e,t)=>e-t)),i=to();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ti.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||to()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Xs();l.forEach((e=>{if(!i.has(e)){const r=To(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return gn.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return en.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ps(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):gn.resolve(Ys());let o=tn,a=i;return s.next((t=>gn.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?gn.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,to()))).next((e=>({batchId:o,changes:Qs(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new en(t)).next((e=>{let t=Ws();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ws();return this.indexManager.getCollectionParents(e,i).next((o=>gn.forEach(o,(o=>{const a=function(e,t){return new _s(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Qi.newInvalidDocument(r)))}));let n=Ws();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Co(s.mutation,r,ti.empty(),Gt.now()),Vs(t,r)&&(n=n.insert(e,r))})),n}))}}class yu{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return gn.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:pa(e.createTime)}}(t)),gn.resolve()}getNamedQuery(e,t){return gn.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Qa(e.bundledQuery),readTime:pa(e.readTime)}}(t)),gn.resolve()}}class vu{constructor(){this.overlays=new Qr(en.comparator),this.Rr=new Map}getOverlay(e,t){return gn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ys();return gn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),gn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),gn.resolve()}getOverlaysForCollection(e,t,n){const r=Ys(),i=t.length+1,s=new en(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return gn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Qr(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ys(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ys(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return gn.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new jo(t,n));let i=this.Rr.get(t);void 0===i&&(i=to(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class bu{constructor(){this.sessionToken=ri.EMPTY_BYTE_STRING}getSessionToken(e){return gn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,gn.resolve()}}class wu{constructor(){this.Vr=new Jr(xu.mr),this.gr=new Jr(xu.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new xu(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new xu(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new en(new Xt([])),n=new xu(t,e),r=new xu(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new en(new Xt([])),n=new xu(t,e),r=new xu(t,e+1);let i=to();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new xu(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xu{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return en.comparator(e.key,t.key)||jt(e.Cr,t.Cr)}static pr(e,t){return jt(e.Cr,t.Cr)||en.comparator(e.key,t.key)}}class Su{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Jr(xu.mr)}checkEmpty(e){return gn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Mo(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new xu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return gn.resolve(s)}lookupMutationBatch(e,t){return gn.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return gn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return gn.resolve(0===this.mutationQueue.length?Dn:this.Fr-1)}getAllMutationBatches(e){return gn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xu(t,0),r=new xu(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),gn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jr(jt);return t.forEach((e=>{const t=new xu(e,0),r=new xu(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),gn.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;en.isDocumentKey(i)||(i=i.child(""));const s=new xu(new en(i),0);let o=new Jr(jt);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),gn.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){kt(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return gn.forEach(t.mutations,(r=>{const i=new xu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new xu(t,0),r=this.Mr.firstAfterOrEqual(n);return gn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,gn.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ku{constructor(e){this.kr=e,this.docs=new Qr(en.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return gn.resolve(n?n.document.mutableCopy():Qi.newInvalidDocument(t))}getEntries(e,t){let n=Hs();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qi.newInvalidDocument(e))})),gn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Hs();const s=t.path,o=new en(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||dn(un(o),n)<=0||(r.has(o.key)||Vs(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return gn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){St()}qr(e,t){return gn.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Eu(this)}getSize(e){return gn.resolve(this.size)}}class Eu extends ou{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),gn.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class Tu{constructor(e){this.persistence=e,this.Qr=new qs((e=>Ss(e)),ks),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new wu,this.targetCount=0,this.Kr=Hl.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),gn.resolve()}getLastRemoteSnapshotVersion(e){return gn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gn.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),gn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),gn.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Hl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,gn.resolve()}updateTargetData(e,t){return this.zn(t),gn.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,gn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),gn.waitFor(i).next((()=>r))}getTargetCount(e){return gn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return gn.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),gn.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),gn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),gn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return gn.resolve(n)}containsKey(e,t){return gn.resolve(this.Ur.containsKey(t))}}class Iu{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new An(0),this.zr=!1,this.zr=!0,this.jr=new bu,this.referenceDelegate=e(this),this.Hr=new Tu(this),this.indexManager=new Il,this.remoteDocumentCache=function(e){return new ku(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Ba(t),this.Yr=new yu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Su(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){vt("MemoryPersistence","Starting transaction:",e);const r=new Cu(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return gn.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Cu extends fn{constructor(e){super(),this.currentSequenceNumber=e}}class _u{constructor(e){this.persistence=e,this.ti=new wu,this.ni=null}static ri(e){return new _u(e)}get ii(){if(this.ni)return this.ni;throw St()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),gn.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),gn.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),gn.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gn.forEach(this.ii,(n=>{const r=en.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,Wt.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return gn.or([()=>gn.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Nu{constructor(e,t){this.persistence=e,this.oi=new qs((e=>zn(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=ru(this,t)}static ri(e,t){return new Nu(e,t)}Zr(){}Xr(e){return gn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return gn.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?gn.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Wt.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),gn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),gn.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),gn.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),gn.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pi(e.data.value)),t}ar(e,t,n){return gn.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return gn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Au{constructor(e){this.serializer=e}B(e,t,n,r){const i=new yn("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Bn)}(e),function(e){e.createObjectStore($n,{keyPath:"userId"});e.createObjectStore(qn,{keyPath:Kn,autoIncrement:!0}).createIndex(Hn,Gn,{unique:!0}),e.createObjectStore(Xn)}(e),Du(e),function(e){e.createObjectStore(Vn)}(e));let s=gn.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ur),e.deleteObjectStore(or),e.deleteObjectStore(pr)}(e),Du(e)),s=s.next((()=>function(e){const t=e.store(pr),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return t.put(fr,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(qn).G().next((n=>{e.deleteObjectStore(qn),e.createObjectStore(qn,{keyPath:Kn,autoIncrement:!0}).createIndex(Hn,Gn,{unique:!0});const r=t.store(qn),i=n.map((e=>r.put(e)));return gn.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(yr,{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this._i(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(ir)}(e),this.ai(i))))),n<7&&r>=7&&(s=s.next((()=>this.ui(i)))),n<8&&r>=8&&(s=s.next((()=>this.ci(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.li(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(vr,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(br,{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore(Ar,{keyPath:Dr});t.createIndex(Pr,Lr,{unique:!1}),t.createIndex(Rr,Or,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore(Jn,{keyPath:Zn});t.createIndex(er,tr),t.createIndex(nr,rr)}(e))).next((()=>this.hi(e,i))).next((()=>e.deleteObjectStore(Vn)))),n<14&&r>=14&&(s=s.next((()=>this.Pi(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore(wr,{keyPath:"indexId",autoIncrement:!0}).createIndex(xr,"collectionGroup",{unique:!1});e.createObjectStore(Sr,{keyPath:kr}).createIndex(Er,Tr,{unique:!1});e.createObjectStore(Ir,{keyPath:Cr}).createIndex(_r,Nr,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore(Sr).clear()})).next((()=>{t.objectStore(Ir).clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore(zr,{keyPath:"name"})}(e)}))),s}ai(e){let t=0;return e.store(Vn).Z(((e,n)=>{t+=Vl(n)})).next((()=>{const n={byteSize:t};return e.store(ir).put(sr,n)}))}_i(e){const t=e.store($n),n=e.store(qn);return t.G().next((t=>gn.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,Dn],[t.userId,t.lastAcknowledgedBatchId]);return n.G(Hn,r).next((n=>gn.forEach(n,(n=>{kt(n.userId===t.userId);const r=Ha(this.serializer,n);return jl(e,t.userId,r).next((()=>{}))}))))}))))}ui(e){const t=e.store(ur),n=e.store(Vn);return e.store(pr).get(fr).next((e=>{const r=[];return n.Z(((n,i)=>{const s=new Xt(n),o=function(e){return[0,zn(e)]}(s);r.push(t.get(o).next((n=>n?gn.resolve():(n=>t.put({targetId:0,path:zn(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>gn.waitFor(r)))}))}ci(e,t){e.createObjectStore(gr,{keyPath:mr});const n=t.store(gr),r=new Cl,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:zn(r)})}};return t.store(Vn).Z({Y:!0},((e,t)=>{const n=new Xt(e);return i(n.popLast())})).next((()=>t.store(Xn).Z({Y:!0},((e,t)=>{let[n,r,s]=e;const o=jn(r);return i(o.popLast())}))))}li(e){const t=e.store(or);return t.Z(((e,n)=>{const r=Ga(n),i=Wa(this.serializer,r);return t.put(i)}))}hi(e,t){const n=t.store(Vn),r=[];return n.Z(((e,n)=>{const i=t.store(Jn),s=function(e){return e.document?new en(Xt.fromString(e.document.name).popFirst(5)):e.noDocument?en.fromSegments(e.noDocument.path):e.unknownDocument?en.fromSegments(e.unknownDocument.path):St()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>gn.waitFor(r)))}Pi(e,t){const n=t.store(qn),r=lu(this.serializer),i=new Iu(_u.ri,this.serializer.Tt);return n.G().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:to();Ha(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),gn.forEach(n,((e,n)=>{const s=new pt(n),o=nl.It(this.serializer,s),a=i.getIndexManager(s),l=Bl.It(s,this.serializer,a,i.referenceDelegate);return new mu(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new qr(t,An.ae),e).next()}))}))}}function Du(e){e.createObjectStore(ur,{keyPath:cr}).createIndex(dr,hr,{unique:!0}),e.createObjectStore(or,{keyPath:"targetId"}).createIndex(ar,lr,{unique:!0}),e.createObjectStore(pr)}const Pu="IndexedDbPersistence",Lu=18e5,Ru=5e3,Ou="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zu="main";class Mu{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=i,this.window=s,this.document=o,this.Ii=l,this.Ei=u,this.di=c,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Mu.D())throw new It(Tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iu(this,r),this.gi=t+zu,this.serializer=new Ba(a),this.pi=new vn(this.gi,this.di,new Au(this.serializer)),this.jr=new il,this.Hr=new Gl(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lu(this.serializer),this.Yr=new Za,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,!1===u&&bt(Pu,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new It(Tt.FAILED_PRECONDITION,Ou);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Hr.getHighestSequenceNumber(e)))})).then((e=>{this.Gr=new An(e,this.Ii)})).then((()=>{this.zr=!0})).catch((e=>(this.pi&&this.pi.close(),Promise.reject(e))))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ju(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Fi(e).next((e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Mi(e))).next((t=>this.isPrimary&&!t?this.xi(e).next((()=>!1)):!!t&&this.Oi(e).next((()=>!0)))))).catch((e=>{if(Sn(e))return vt(Pu,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return vt(Pu,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Fi(e){return Fu(e).get(Un).next((e=>gn.resolve(this.Ni(e))))}Bi(e){return ju(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Lu)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Kr(e,yr);return t.G().next((e=>{const n=this.qi(e,Lu),r=e.filter((e=>-1===n.indexOf(e)));return gn.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Li())).then((()=>this.Di()))))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?gn.resolve(!0):Fu(e).get(Un).next((t=>{if(null!==t&&this.ki(t.leaseTimestampMs,Ru)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new It(Tt.FAILED_PRECONDITION,Ou);return!1}}return!(!this.networkEnabled||!this.inForeground)||ju(e).G().next((e=>void 0===this.qi(e,Ru).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&vt(Pu,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Bn,yr],(e=>{const t=new qr(e,An.ae);return this.xi(t).next((()=>this.Bi(t)))})),this.pi.close(),this.Gi()}qi(e,t){return e.filter((e=>this.ki(e.updateTimeMs,t)&&!this.$i(e.clientId)))}zi(){return this.runTransaction("getActiveClients","readonly",(e=>ju(e).G().next((e=>this.qi(e,Lu).map((e=>e.clientId))))))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Bl.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Al(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return nl.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){vt(Pu,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?$r:16===e?Ur:15===e?Br:14===e?Vr:13===e?jr:12===e?Fr:11===e?Mr:void St()}(this.di);let s;return this.pi.runTransaction(e,r,i,(r=>(s=new qr(r,this.Gr?this.Gr.next():An.ae),"readwrite-primary"===t?this.Fi(s).next((e=>!!e||this.Mi(s))).next((t=>{if(!t)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))),new It(Tt.FAILED_PRECONDITION,hn);return n(s)})).next((e=>this.Oi(s).next((()=>e)))):this.ji(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ji(e){return Fu(e).get(Un).next((e=>{if(null!==e&&this.ki(e.leaseTimestampMs,Ru)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new It(Tt.FAILED_PRECONDITION,Ou)}))}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fu(e).put(Un,t)}static D(){return vn.D()}xi(e){const t=Fu(e);return t.get(Un).next((e=>this.Ni(e)?(vt(Pu,"Releasing primary lease."),t.delete(Un)):gn.resolve()))}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(bt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ri=()=>{this.Ti.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.wi())))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground="visible"===this.document.visibilityState)}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;m()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=null!==(null===(t=this.yi)||void 0===t?void 0:t.getItem(this.Qi(e)));return vt(Pu,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return bt(Pu,"Failed to get zombied client id.",e),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch(e){}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fu(e){return Kr(e,Bn)}function ju(e){return Kr(e,yr)}function Vu(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Bu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=to(),r=to();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Bu(e,t.fromCache,n,r)}}class Uu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $u{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=m()?8:bn(g())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Uu;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(yt()<=D.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",js(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),gn.resolve()):(yt()<=D.DEBUG&&vt("QueryEngine","Query:",js(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(yt()<=D.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",js(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rs(t))):gn.resolve())}rs(e,t){if(Ds(t))return gn.resolve(null);let n=Rs(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=zs(t,null,"F"),n=Rs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=to(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,zs(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return Ds(t)||r.isEqual(Wt.min())?gn.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?gn.resolve(null):(yt()<=D.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),js(t)),this.hs(e,s,t,ln(r,tn)).next((e=>e)))}))}cs(e,t){let n=new Jr(Us(e));return t.forEach(((t,r)=>{Vs(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return yt()<=D.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",js(t)),this.ns.getDocumentsMatchingQuery(e,t,cn.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const qu="LocalStore";class Ku{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Qr(jt),this.Is=new qs((e=>Ss(e)),ks),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mu(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function Hu(e,t,n,r){return new Ku(e,t,n,r)}async function Gu(e,t){const n=Et(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=to();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Wu(e){const t=Et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Qu(e,t,n){let r=to(),i=to();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Hs();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Wt.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):vt(qu,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}function Yu(e,t){const n=Et(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Dn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Xu(e,t){const n=Et(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,gn.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Va(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Ju(e,t,n){const r=Et(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Sn(e))throw e;vt(qu,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Zu(e,t,n){const r=Et(e);let i=Wt.min(),s=to();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Et(e),i=r.Is.get(n);return void 0!==i?gn.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Rs(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:Wt.min(),n?s:to()))).next((e=>(ec(r,Bs(t),e),{documents:e,gs:s})))))}function ec(e,t,n){let r=e.Es.get(t)||Wt.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class tc{constructor(){this.activeTargetIds=ro()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nc{constructor(){this.ho=new tc,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new tc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rc{To(e){}shutdown(){}}const ic="ConnectivityMonitor";class sc{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){vt(ic,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){vt(ic,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oc=null;function ac(){return null===oc?oc=268435456+Math.round(2147483648*Math.random()):oc++,"0x"+oc.toString(16)}const lc="RestConnection",uc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cc{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===mi?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const s=ac(),o=this.bo(e,t.toUriEncodedString());vt(lc,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(vt(lc,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw wt(lc,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=uc[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class dc{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const hc="WebChannelConnection";class fc extends cc{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=ac();return new Promise(((s,o)=>{const a=new nt;a.setWithCredentials(!0),a.listenOnce(it.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case st.NO_ERROR:const t=a.getResponseJson();vt(hc,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case st.TIMEOUT:vt(hc,`RPC '${e}' ${i} timed out`),o(new It(Tt.DEADLINE_EXCEEDED,"Request time out"));break;case st.HTTP_ERROR:const n=a.getStatus();if(vt(hc,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Tt).indexOf(t)>=0?t:Tt.UNKNOWN}(t.status);o(new It(e,t.message))}else o(new It(Tt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new It(Tt.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{vt(hc,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);vt(hc,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=ac(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ut(),o=lt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");vt(hc,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let d=!1,h=!1;const f=new dc({Fo:t=>{h?vt(hc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(vt(hc,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),vt(hc,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Mo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,rt.EventType.OPEN,(()=>{h||(vt(hc,`RPC '${e}' stream ${r} transport opened.`),f.Qo())})),p(c,rt.EventType.CLOSE,(()=>{h||(h=!0,vt(hc,`RPC '${e}' stream ${r} transport closed`),f.Uo())})),p(c,rt.EventType.ERROR,(t=>{h||(h=!0,wt(hc,`RPC '${e}' stream ${r} transport errored:`,t),f.Uo(new It(Tt.UNAVAILABLE,"The operation could not be completed")))})),p(c,rt.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];kt(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){vt(hc,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Bo[e];if(void 0!==t)return qo(t)}(t),i=o.message;void 0===n&&(n=Tt.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.Uo(new It(n,i)),c.close()}else vt(hc,`RPC '${e}' stream ${r} received:`,i),f.Ko(i)}})),p(o,at.STAT_EVENT,(t=>{t.stat===ot.PROXY?vt(hc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ot.NOPROXY&&vt(hc,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function pc(){return"undefined"!=typeof window?window:null}function gc(){return"undefined"!=typeof document?document:null}function mc(e){return new ua(e,!0)}class yc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&vt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const vc="PersistentStream";class bc{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yc(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===Tt.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Tt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new It(Tt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return vt(vc,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(vt(vc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wc extends bc{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:St()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(kt(void 0===t||"string"==typeof t),ri.fromBase64String(t||"")):(kt(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ri.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Tt.UNKNOWN:qo(e.code);return new It(t,e.message||"")}(o);n=new ta(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ba(e,r.document.name),s=pa(r.document.updateTime),o=r.document.createTime?pa(r.document.createTime):Wt.min(),a=new Gi({mapValue:{fields:r.document.fields}}),l=Qi.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Zo(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ba(e,r.document),s=r.readTime?pa(r.readTime):Wt.min(),o=Qi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zo([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ba(e,r.document),s=r.removedTargetIds||[];n=new Zo([],s,i,null)}else{if(!("filter"in t))return St();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Vo(r,i),o=e.targetId;n=new ea(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wt.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Wt.min():t.readTime?pa(t.readTime):Wt.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Sa(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Es(r)?{documents:_a(e,r)}:{query:Na(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ha(e,t.resumeToken);const r=ca(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Wt.min())>0){n.readTime=da(e,t.snapshotVersion.toTimestamp());const r=ca(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Sa(this.serializer),t.removeTarget=e,this.I_(t)}}class xc extends bc{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return kt(!!e.streamToken),this.lastStreamToken=e.streamToken,kt(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(kt(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?pa(e.updateTime):pa(t);return n.isEqual(Wt.min())&&(n=pa(t)),new xo(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=pa(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Sa(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ia(this.serializer,e)))};this.I_(t)}}class Sc{}class kc extends Sc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new It(Tt.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,ma(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new It(Tt.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Co(e,ma(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new It(Tt.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Ec{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(bt(t),this.N_=!1):vt("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Tc="RemoteStore";class Ic{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Oc(this)&&(vt(Tc,"Restarting streams for network reachability change."),await async function(e){const t=Et(e);t.W_.add(4),await _c(t),t.j_.set("Unknown"),t.W_.delete(4),await Cc(t)}(this))}))})),this.j_=new Ec(n,r)}}async function Cc(e){if(Oc(e))for(const t of e.G_)await t(!0)}async function _c(e){for(const t of e.G_)await t(!1)}function Nc(e,t){const n=Et(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Rc(n)?Lc(n):ed(n).c_()&&Dc(n,t))}function Ac(e,t){const n=Et(e),r=ed(n);n.K_.delete(t),r.c_()&&Pc(n,t),0===n.K_.size&&(r.c_()?r.P_():Oc(n)&&n.j_.set("Unknown"))}function Dc(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ed(e).y_(t)}function Pc(e,t){e.H_.Ne(t),ed(e).w_(t)}function Lc(e){e.H_=new ra({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),ed(e).start(),e.j_.B_()}function Rc(e){return Oc(e)&&!ed(e).u_()&&e.K_.size>0}function Oc(e){return 0===Et(e).W_.size}function zc(e){e.H_=void 0}async function Mc(e){e.j_.set("Online")}async function Fc(e){e.K_.forEach(((t,n)=>{Dc(e,t)}))}async function jc(e,t){zc(e),Rc(e)?(e.j_.q_(t),Lc(e)):e.j_.set("Unknown")}async function Vc(e,t,n){if(e.j_.set("Online"),t instanceof ta&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){vt(Tc,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Bc(e,n)}else if(t instanceof Zo?e.H_.We(t):t instanceof ea?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Wt.min()))try{const t=await Wu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(ri.EMPTY_BYTE_STRING,r.snapshotVersion)),Pc(e,t);const i=new Va(r.target,t,n,r.sequenceNumber);Dc(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){vt(Tc,"Failed to raise snapshot:",t),await Bc(e,t)}}async function Bc(e,t,n){if(!Sn(t))throw t;e.W_.add(1),await _c(e),e.j_.set("Offline"),n||(n=()=>Wu(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{vt(Tc,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Cc(e)}))}function Uc(e,t){return t().catch((n=>Bc(e,n,t)))}async function $c(e){const t=Et(e),n=td(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Dn;for(;qc(t);)try{const e=await Yu(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,Kc(t,e)}catch(e){await Bc(t,e)}Hc(t)&&Gc(t)}function qc(e){return Oc(e)&&e.U_.length<10}function Kc(e,t){e.U_.push(t);const n=td(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Hc(e){return Oc(e)&&!td(e).u_()&&e.U_.length>0}function Gc(e){td(e).start()}async function Wc(e){td(e).C_()}async function Qc(e){const t=td(e);for(const n of e.U_)t.b_(n.mutations)}async function Yc(e,t,n){const r=e.U_.shift(),i=Fo.from(r,t,n);await Uc(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await $c(e)}async function Xc(e,t){t&&td(e).S_&&await async function(e,t){if(function(e){return $o(e)&&e!==Tt.ABORTED}(t.code)){const n=e.U_.shift();td(e).h_(),await Uc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await $c(e)}}(e,t),Hc(e)&&Gc(e)}async function Jc(e,t){const n=Et(e);n.asyncQueue.verifyOperationInProgress(),vt(Tc,"RemoteStore received new credentials");const r=Oc(n);n.W_.add(3),await _c(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Cc(n)}async function Zc(e,t){const n=Et(e);t?(n.W_.delete(2),await Cc(n)):t||(n.W_.add(2),await _c(n),n.j_.set("Unknown"))}function ed(e){return e.J_||(e.J_=function(e,t,n){const r=Et(e);return r.M_(),new wc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Mc.bind(null,e),No:Fc.bind(null,e),Lo:jc.bind(null,e),p_:Vc.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Rc(e)?Lc(e):e.j_.set("Unknown")):(await e.J_.stop(),zc(e))}))),e.J_}function td(e){return e.Y_||(e.Y_=function(e,t,n){const r=Et(e);return r.M_(),new xc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Wc.bind(null,e),Lo:Xc.bind(null,e),D_:Qc.bind(null,e),v_:Yc.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await $c(e)):(await e.Y_.stop(),e.U_.length>0&&(vt(Tc,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class nd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new nd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new It(Tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rd(e,t){if(bt("AsyncQueue",`${t}: ${e}`),Sn(e))return new It(Tt.UNAVAILABLE,`${t}: ${e}`);throw e}class id{static emptySet(e){return new id(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||en.comparator(t.key,n.key):(e,t)=>en.comparator(e.key,t.key),this.keyedMap=Ws(),this.sortedSet=new Qr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof id))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new id;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sd{constructor(){this.Z_=new Qr(en.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):St():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class od{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new od(e,t,id.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ms(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ad{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class ld{constructor(){this.queries=ud(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=Et(e),r=n.queries;n.queries=ud(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new It(Tt.ABORTED,"Firestore shutting down"))}}function ud(){return new qs((e=>Fs(e)),Ms)}async function cd(e,t){const n=Et(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new ad,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=rd(e,`Initialization of query '${js(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&pd(n)}async function dd(e,t){const n=Et(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hd(e,t){const n=Et(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&pd(n)}function fd(e,t,n){const r=Et(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function pd(e){e.ia.forEach((e=>{e.next()}))}var gd,md;(md=gd||(gd={}))._a="default",md.Cache="cache";class yd{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new od(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==gd.Cache}}class vd{constructor(e){this.key=e}}class bd{constructor(e){this.key=e}}class wd{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=to(),this.mutatedKeys=to(),this.ya=Us(e),this.wa=new id(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new sd,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Vs(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.va(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ya(c,a)>0||l&&this.ya(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new od(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new sd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=to(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new bd(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new vd(n))})),t}Oa(e){this.fa=e.gs,this.pa=to();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return od.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const xd="SyncEngine";class Sd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kd{constructor(e){this.key=e,this.Ba=!1}}class Ed{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new qs((e=>Fs(e)),Ms),this.qa=new Map,this.Qa=new Set,this.$a=new Qr(en.comparator),this.Ua=new Map,this.Ka=new wu,this.Wa={},this.Ga=new Map,this.za=Hl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Td(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Hd(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Cd(r,t,n,!0),i}async function Id(e,t){const n=Hd(e);await Cd(n,t,!0,!1)}async function Cd(e,t,n,r){const i=await Xu(e.localStore,Rs(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await _d(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Nc(e.remoteStore,i),a}async function _d(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Zu(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Vd(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await Zu(e.localStore,t,!0),o=new wd(t,s.gs),a=o.ba(s.documents),l=Jo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Vd(e,n,u.Ma);const c=new Sd(t,n,o);return e.ka.set(t,c),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),u.snapshot}async function Nd(e,t,n){const r=Et(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((e=>!Ms(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ju(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ac(r.remoteStore,i.targetId),Fd(r,i.targetId)})).catch(pn)):(Fd(r,i.targetId),await Ju(r.localStore,i.targetId,!0))}async function Ad(e,t){const n=Et(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ac(n.remoteStore,r.targetId))}async function Dd(e,t){const n=Et(e);try{const e=await function(e,t){const n=Et(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(ri.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,s)&&o.push(n.Hr.updateTargetData(e,u))}));let a=Hs(),l=to();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Qu(e,s,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!r.isEqual(Wt.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return gn.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(kt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?kt(r.Ba):e.removedDocuments.size>0&&(kt(r.Ba),r.Ba=!1))})),await $d(n,e,t)}catch(e){await pn(e)}}function Pd(e,t,n){const r=Et(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Et(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&pd(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ld(e,t,n){const r=Et(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),s=i&&i.key;if(s){let e=new Qr(en.comparator);e=e.insert(s,Qi.newNoDocument(s,Wt.min()));const n=to().add(s),i=new Xo(Wt.min(),new Map,new Qr(jt),e,n);await Dd(r,i),r.$a=r.$a.remove(s),r.Ua.delete(t),Ud(r)}else await Ju(r.localStore,t,!1).then((()=>Fd(r,t,n))).catch(pn)}async function Rd(e,t){const n=Et(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Et(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=gn.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);kt(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=to();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Md(n,r,null),zd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $d(n,e)}catch(e){await pn(e)}}async function Od(e,t,n){const r=Et(e);try{const e=await function(e,t){const n=Et(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(kt(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Md(r,t,n),zd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $d(r,e)}catch(n){await pn(n)}}function zd(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function Md(e,t,n){const r=Et(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function Fd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||jd(e,t)}))}function jd(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(Ac(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),Ud(e))}function Vd(e,t,n){for(const r of n)r instanceof vd?(e.Ka.addReference(r.key,t),Bd(e,r)):r instanceof bd?(vt(xd,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||jd(e,r.key)):St()}function Bd(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(vt(xd,"New document in limbo: "+n),e.Qa.add(r),Ud(e))}function Ud(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new en(Xt.fromString(t)),r=e.za.next();e.Ua.set(r,new kd(n)),e.$a=e.$a.insert(n,r),Nc(e.remoteStore,new Va(Rs(As(n.path)),r,"TargetPurposeLimboResolution",An.ae))}}async function $d(e,t,n){const r=Et(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Bu.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=Et(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>gn.forEach(t,(t=>gn.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>gn.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Sn(e))throw e;vt(qu,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function qd(e,t){const n=Et(e);if(!n.currentUser.isEqual(t)){vt(xd,"User change. New user:",t.toKey());const e=await Gu(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new It(Tt.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $d(n,e.Rs)}}function Kd(e,t){const n=Et(e),r=n.Ua.get(t);if(r&&r.Ba)return to().add(r.key);{let e=to();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function Hd(e){const t=Et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ld.bind(null,t),t.La.p_=hd.bind(null,t.eventManager),t.La.Ja=fd.bind(null,t.eventManager),t}function Gd(e){const t=Et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Od.bind(null,t),t}class Wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Hu(this.persistence,new $u,e.initialUser,this.serializer)}Xa(e){return new Iu(_u.ri,this.serializer)}Za(e){return new nc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wd.provider={build:()=>new Wd};class Qd extends Wd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){kt(this.persistence.referenceDelegate instanceof Nu);const n=this.persistence.referenceDelegate.garbageCollector;return new tu(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Fl.withCacheSize(this.cacheSizeBytes):Fl.DEFAULT;return new Iu((e=>Nu.ri(e,t)),this.serializer)}}class Yd extends Wd{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Gd(this.ru.syncEngine),await $c(this.ru.remoteStore),await this.persistence.Ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}eu(e){return Hu(this.persistence,new $u,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new tu(n,e.asyncQueue,t)}nu(e,t){const n=new Nn(t,this.persistence);return new _n(e.asyncQueue,n)}Xa(e){const t=Vu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fl.withCacheSize(this.cacheSizeBytes):Fl.DEFAULT;return new Mu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pc(),gc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new nc}}class Xd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=qd.bind(null,this.syncEngine),await Zc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ld}createDatastore(e){const t=mc(e.databaseInfo.databaseId),n=function(e){return new fc(e)}(e.databaseInfo);return function(e,t,n,r){return new kc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ic(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Pd(this.syncEngine,e,0)),sc.D()?new sc:new rc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ed(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Et(e);vt(Tc,"RemoteStore shutting down."),t.W_.add(5),await _c(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Xd.provider={build:()=>new Xd};class Jd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Zd="FirestoreClient";class eh{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=Ft.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{vt(Zd,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(vt(Zd,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=rd(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function th(e,t){e.asyncQueue.verifyOperationInProgress(),vt(Zd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Gu(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function nh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rh(e);vt(Zd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Jc(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Jc(t.remoteStore,n))),e._onlineComponents=t}async function rh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(Zd,"Using user provided OfflineComponentProvider");try{await th(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Tt.FAILED_PRECONDITION||e.code===Tt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;wt("Error using user provided cache. Falling back to memory cache: "+n),await th(e,new Wd)}}else vt(Zd,"Using default OfflineComponentProvider"),await th(e,new Qd(void 0));return e._offlineComponents}async function ih(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(Zd,"Using user provided OnlineComponentProvider"),await nh(e,e._uninitializedComponentsProvider._online)):(vt(Zd,"Using default OnlineComponentProvider"),await nh(e,new Xd))),e._onlineComponents}function sh(e){return ih(e).then((e=>e.syncEngine))}async function oh(e){const t=await ih(e),n=t.eventManager;return n.onListen=Td.bind(null,t.syncEngine),n.onUnlisten=Nd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Id.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ad.bind(null,t.syncEngine),n}function ah(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ct;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Jd({next:n=>{s.su(),t.enqueueAndForget((()=>dd(e,o))),n.fromCache&&"server"===r.source?i.reject(new It(Tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new yd(n,s,{includeMetadataChanges:!0,Ta:!0});return cd(e,o)}(await oh(e),e.asyncQueue,t,n,r))),r.promise}function lh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const uh=new Map;function ch(e,t,n){if(!n)throw new It(Tt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function dh(e){if(!en.isDocumentKey(e))throw new It(Tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function hh(e){if(en.isDocumentKey(e))throw new It(Tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function fh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":St()}function ph(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new It(Tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(e);throw new It(Tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const gh="firestore.googleapis.com",mh=!0;class yh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new It(Tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gh,this.ssl=mh}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:mh;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ml;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Jl)throw new It(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new It(Tt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new It(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new It(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new It(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(Tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new It(Tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yh(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Nt;switch(e.type){case"firstParty":return new Lt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new It(Tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uh.get(e);t&&(vt("ComponentProvider","Removing Datastore"),uh.delete(e),t.terminate())}(this),Promise.resolve()}}function bh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=ph(e,vh))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==gh&&s.host!==a&&wt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!S(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=pt.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new It(Tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new pt(s)}e._authCredentials=new At(new _t(t,n))}}class wh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wh(this.firestore,e,this._query)}}class xh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xh(this.firestore,e,this._key)}}class Sh extends wh{constructor(e,t,n){super(e,t,As(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xh(this.firestore,null,new en(e))}withConverter(e){return new Sh(this.firestore,e,this._path)}}function kh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=T(e),ch("collection","path",t),e instanceof vh){const n=Xt.fromString(t,...r);return hh(n),new Sh(e,null,n)}{if(!(e instanceof xh||e instanceof Sh))throw new It(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Xt.fromString(t,...r));return hh(n),new Sh(e.firestore,null,n)}}function Eh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=T(e),1===arguments.length&&(t=Ft.newId()),ch("doc","path",t),e instanceof vh){const n=Xt.fromString(t,...r);return dh(n),new xh(e,null,new en(n))}{if(!(e instanceof xh||e instanceof Sh))throw new It(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Xt.fromString(t,...r));return dh(n),new xh(e.firestore,e instanceof Sh?e.converter:null,new en(n))}}const Th="AsyncQueue";class Ih{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yc(this,"async_queue_retry"),this.Su=()=>{const e=gc();e&&vt(Th,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=gc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=gc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Ct;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Sn(e))throw e;vt(Th,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw bt("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=nd.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&St()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Ch(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class _h extends vh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ih,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ih(e),this._firestoreClient=void 0,await e}}}function Nh(e){if(e._terminated)throw new It(Tt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ah(e),e._firestoreClient}function Ah(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new gi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,lh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new eh(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Dh(e,t,n){if((e=ph(e,_h))._firestoreClient||e._terminated)throw new It(Tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new It(Tt.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Ah(e)}class Ph{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ph(ri.fromBase64String(e))}catch(e){throw new It(Tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ph(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new It(Tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rh{constructor(e){this._methodName=e}}class Oh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new It(Tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new It(Tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}class zh{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Mh=/^__.*__$/;class Fh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ao(e,this.data,t,this.fieldTransforms)}}class jh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Do(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class Bh{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return tf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(Vh(this.Lu)&&Mh.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Uh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mc(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Bh({Lu:e,methodName:t,zu:n,path:Zt.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(e){const t=e._freezeSettings(),n=mc(e._databaseId);return new Uh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qh(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);Xh("Data must be an object, but it was:",o,r);const a=Qh(r,o);let l,u;if(s.merge)l=new ti(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Jh(t,r,n);if(!o.contains(i))throw new It(Tt.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);nf(e,i)||e.push(i)}l=new ti(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new Fh(new Gi(a),l,u)}class Kh extends Rh{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function Hh(e,t,n,r){const i=e.ju(1,t,n);Xh("Data must be an object, but it was:",i,r);const s=[],o=Gi.empty();Gr(r,((e,r)=>{const a=ef(t,e,n);r=T(r);const l=i.Uu(a);if(r instanceof Kh)s.push(a);else{const e=Wh(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ti(s);return new jh(o,a,i.fieldTransforms)}function Gh(e,t,n,r,i,s){const o=e.ju(1,t,n),a=[Jh(t,r,n)],l=[i];if(s.length%2!=0)throw new It(Tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Jh(t,s[h])),l.push(s[h+1]);const u=[],c=Gi.empty();for(let h=a.length-1;h>=0;--h)if(!nf(u,a[h])){const e=a[h];let t=l[h];t=T(t);const n=o.Uu(e);if(t instanceof Kh)u.push(e);else{const r=Wh(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new ti(u);return new jh(c,d,o.fieldTransforms)}function Wh(e,t){if(Yh(e=T(e)))return Xh("Unsupported field value:",t,e),Qh(e,t);if(e instanceof Rh)return function(e,t){if(!Vh(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Wh(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=T(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return oo(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gt.fromDate(e);return{timestampValue:da(t.serializer,n)}}if(e instanceof Gt){const n=new Gt(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:da(t.serializer,n)}}if(e instanceof Oh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ph)return{bytesValue:ha(t.serializer,e._byteString)};if(e instanceof xh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ga(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof zh)return function(e,t){return{mapValue:{fields:{[vi]:{stringValue:xi},[Si]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return io(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${fh(e)}`)}(e,t)}function Qh(e,t){const n={};return Wr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gr(e,((e,r)=>{const i=Wh(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Yh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gt||e instanceof Oh||e instanceof Ph||e instanceof xh||e instanceof Rh||e instanceof zh)}function Xh(e,t,n){if(!Yh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=fh(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function Jh(e,t,n){if((t=T(t))instanceof Lh)return t._internalPath;if("string"==typeof t)return ef(e,t);throw tf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Zh=new RegExp("[~\\*/\\[\\]]");function ef(e,t,n){if(t.search(Zh)>=0)throw tf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Lh(...t.split("."))._internalPath}catch(r){throw tf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function tf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new It(Tt.INVALID_ARGUMENT,a+e+l)}function nf(e,t){return e.some((e=>e.isEqual(t)))}class rf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(of("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sf extends rf{data(){return super.data()}}function of(e,t){return"string"==typeof t?ef(e,t):t instanceof Lh?t._internalPath:t._delegate._internalPath}function af(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new It(Tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw St()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Gr(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Si].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>oi(e.doubleValue)));return new zh(i)}convertGeoPoint(e){return new Oh(oi(e.latitude),oi(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pi(e));default:return null}}convertTimestamp(e){const t=si(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Xt.fromString(e);kt(ja(n));const r=new yi(n.get(1),n.get(3)),i=new en(n.popFirst(5));return r.isEqual(t)||bt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function uf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class cf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class df extends rf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(of("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hf extends df{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ff{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new hf(this._firestore,this._userDataWriter,n.key,n,new cf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new It(Tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new hf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new cf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new hf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:pf(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}class gf extends lf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ph(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xh(this.firestore,null,t)}}function mf(e){e=ph(e,wh);const t=ph(e.firestore,_h),n=Nh(t),r=new gf(t);return af(e._query),ah(n,e._query).then((n=>new ff(t,r,e,n)))}function yf(e,t,n){e=ph(e,xh);const r=ph(e.firestore,_h),i=uf(e.converter,t,n);return Sf(r,[qh($h(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,So.none())])}function vf(e,t,n){e=ph(e,xh);const r=ph(e.firestore,_h),i=$h(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=T(t))||t instanceof Lh?Gh(i,"updateDoc",e._key,t,n,a):Hh(i,"updateDoc",e._key,t),Sf(r,[s.toMutation(e._key,So.exists(!0))])}function bf(e){return Sf(ph(e.firestore,_h),[new Oo(e._key,So.none())])}function wf(e,t){const n=ph(e.firestore,_h),r=Eh(e),i=uf(e.converter,t);return Sf(n,[qh($h(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,So.exists(!1))]).then((()=>r))}function xf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=T(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Ch(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Ch(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,d,h;if(e instanceof xh)d=ph(e.firestore,_h),h=As(e._key.path),c={next:t=>{n[l]&&n[l](kf(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ph(e,wh);d=ph(t.firestore,_h),h=t._query;const r=new gf(d);c={next:e=>{n[l]&&n[l](new ff(d,r,t,e))},error:n[l+1],complete:n[l+2]},af(e._query)}return function(e,t,n,r){const i=new Jd(r),s=new yd(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>cd(await oh(e),s))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>dd(await oh(e),s)))}}(Nh(d),h,u,c)}function Sf(e,t){return function(e,t){const n=new Ct;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Gd(e);try{const e=await function(e,t){const n=Et(e),r=Gt.now(),i=t.reduce(((e,t)=>e.add(t.key)),to());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Hs(),l=to();return n.ds.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=_o(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Do(e.key,t,Wi(t.value.mapValue),So.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Qs(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new Qr(jt)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await $d(r,e.changes),await $c(r.remoteStore)}catch(e){const t=rd(e,"Failed to persist write");n.reject(t)}}(await sh(e),t,n))),n.promise}(Nh(e),t)}function kf(e,t,n){const r=n.docs.get(t._key),i=new gf(e);return new df(e,i,t._key,r,new cf(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gt=e}("11.5.0"),ze(new I("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new _h(new Dt(e.getProvider("auth-internal")),new Ot(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new It(Tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Be(ht,ft,e),Be(ht,ft,"esm2017")}();Be("firebase","11.5.0","app");const Ef="@firebase/installations",Tf="0.6.13",If=1e4,Cf=`w:${Tf}`,_f="FIS_v2",Nf=36e5,Af=new w("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Df(e){return e instanceof b&&e.code.includes("request-failed")}function Pf(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Lf(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Rf(e,t){const n=(await t.json()).error;return Af.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Of(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function zf(e,t){let{refreshToken:n}=t;const r=Of(e);return r.append("Authorization",function(e){return`${_f} ${e}`}(n)),r}async function Mf(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Ff(e){return new Promise((t=>{setTimeout(t,e)}))}const jf=/^[cdef][\w-]{21}$/;function Vf(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return jf.test(t)?t:""}catch(e){return""}}function Bf(e){return`${e.appName}!${e.appId}`}const Uf=new Map;function $f(e,t){const n=Bf(e);qf(n,t),function(e,t){const n=Hf();n&&n.postMessage({key:e,fid:t});Gf()}(n,t)}function qf(e,t){const n=Uf.get(e);if(n)for(const r of n)r(t)}let Kf=null;function Hf(){return!Kf&&"BroadcastChannel"in self&&(Kf=new BroadcastChannel("[Firebase] FID Change"),Kf.onmessage=e=>{qf(e.data.key,e.data.fid)}),Kf}function Gf(){0===Uf.size&&Kf&&(Kf.close(),Kf=null)}const Wf="firebase-installations-store";let Qf=null;function Yf(){return Qf||(Qf=Q("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Wf)}})),Qf}async function Xf(e,t){const n=Bf(e),r=(await Yf()).transaction(Wf,"readwrite"),i=r.objectStore(Wf),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||$f(e,t.fid),t}async function Jf(e){const t=Bf(e),n=(await Yf()).transaction(Wf,"readwrite");await n.objectStore(Wf).delete(t),await n.done}async function Zf(e,t){const n=Bf(e),r=(await Yf()).transaction(Wf,"readwrite"),i=r.objectStore(Wf),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||$f(e,o.fid),o}async function ep(e){let t;const n=await Zf(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Vf(),registrationStatus:0};return rp(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Af.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Pf(n),o=Of(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:_f,appId:n.appId,sdkVersion:Cf},u={method:"POST",headers:o,body:JSON.stringify(l)},c=await Mf((()=>fetch(s,u)));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Lf(e.authToken)}}throw await Rf("Create Installation",c)}(e,t);return Xf(e.appConfig,n)}catch(n){throw Df(n)&&409===n.customData.serverCode?await Jf(e.appConfig):await Xf(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:tp(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function tp(e){let t=await np(e.appConfig);for(;1===t.registrationStatus;)await Ff(100),t=await np(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ep(e);return n||t}return t}function np(e){return Zf(e,(e=>{if(!e)throw Af.create("installation-not-found");return rp(e)}))}function rp(e){return 1===(t=e).registrationStatus&&t.registrationTime+If<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ip(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Pf(e)}/${n}/authTokens:generate`}(n,t),s=zf(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:Cf,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Mf((()=>fetch(i,l)));if(u.ok){return Lf(await u.json())}throw await Rf("Generate Auth Token",u)}async function sp(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Zf(e.appConfig,(r=>{if(!ap(r))throw Af.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Nf}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await op(e.appConfig);for(;1===n.authToken.requestStatus;)await Ff(100),n=await op(e.appConfig);const r=n.authToken;return 0===r.requestStatus?sp(e,t):r}(e,n),r;{if(!navigator.onLine)throw Af.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await ip(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Xf(e.appConfig,r),n}catch(n){if(!Df(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Xf(e.appConfig,n)}else await Jf(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function op(e){return Zf(e,(e=>{if(!ap(e))throw Af.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+If<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function ap(e){return void 0!==e&&2===e.registrationStatus}async function lp(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await ep(e);t&&await t}(n);return(await sp(n,t)).token}function up(e){return Af.create("missing-app-config-values",{valueName:e})}const cp="installations",dp=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw up("App Configuration");if(!e.name)throw up("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw up(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Me(t,"heartbeat"),_delete:()=>Promise.resolve()}},hp=e=>{const t=Me(e.getProvider("app").getImmediate(),cp).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ep(t);return r?r.catch(console.error):sp(t).catch(console.error),n.fid}(t),getToken:e=>lp(t,e)}};ze(new I(cp,dp,"PUBLIC")),ze(new I("installations-internal",hp,"PRIVATE")),Be(Ef,Tf),Be(Ef,Tf,"esm2017");const fp="analytics",pp="https://www.googletagmanager.com/gtag/js",gp=new z("@firebase/analytics"),mp=new w("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function yp(e){if(!e.startsWith(pp)){const t=mp.create("invalid-gtag-resource",{gtagURL:e});return gp.warn(t.message),""}return e}function vp(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function bp(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:yp}),r=document.createElement("script"),i=`${pp}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function wp(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await vp(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){gp.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await vp(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){gp.error(a)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(l){gp.error(l)}}}const xp=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Sp(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function kp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xp,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw mp.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw mp.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Tp;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Ep({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Ep(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xp;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(mp.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(u){if(l)return gp.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===u||void 0===u?void 0:u.message}]`),{appId:a,measurementId:l};throw u}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Sp(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw mp.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(u){const t=u;if(!function(e){if(!(e instanceof b)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return gp.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:a,measurementId:l};throw u}const r=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?E(i,s.intervalMillis,30):E(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,c),gp.debug(`Calling attemptFetch again in ${r} millis`),Ep(e,c,n,s)}}class Tp{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ip,Cp;function _p(e){Cp=e}function Np(e){Ip=e}async function Ap(e,t,n,r,i,s,o){var a;const l=kp(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&gp.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>gp.error(e))),t.push(l);const u=async function(){if(!y())return gp.warn(mp.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await v()}catch(e){return gp.warn(mp.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,d]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(pp)&&n.src.includes(e))return n;return null})(s)||bp(s,c.measurementId),Cp&&(i("consent","default",Cp),_p(void 0)),i("js",new Date);const h=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",c.measurementId,h),Ip&&(i("set",Ip),Np(void 0)),c.measurementId}class Dp{constructor(e){this.app=e}_delete(){return delete Pp[this.app.options.appId],Promise.resolve()}}let Pp={},Lp=[];const Rp={};let Op,zp,Mp="dataLayer",Fp="gtag",jp=!1;function Vp(){const e=[];if(function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=mp.create("invalid-analytics-context",{errorInfo:t});gp.warn(n.message)}}function Bp(e,t,n){Vp();const r=e.options.appId;if(!r)throw mp.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw mp.create("no-api-key");gp.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pp[r])throw mp.create("already-exists",{id:r});if(!jp){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Mp);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=wp(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Pp,Lp,Rp,Mp,Fp);zp=e,Op=t,jp=!0}Pp[r]=Ap(e,Lp,Rp,t,Op,Mp,n);return new Dp(e)}function Up(e,t,n,r){e=T(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(zp,Pp[e.app.options.appId],t,n,r).catch((e=>gp.error(e)))}const $p="@firebase/analytics",qp="0.10.12";ze(new I(fp,((e,t)=>{let{options:n}=t;return Bp(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),ze(new I("analytics-internal",(function(e){try{const t=e.getProvider(fp).getImmediate();return{logEvent:(e,n,r)=>Up(t,e,n,r)}}catch(t){throw mp.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Be($p,qp),Be($p,qp,"esm2017");const Kp=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;const t=Pe.get(e);if(!t&&e===Ae&&f())return Ve();if(!t)throw Fe.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||mi,i=Me(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=h("firestore");e&&bh(i,...e)}return i}(Ve({apiKey:"AIzaSyDo7X1BLIW1hNYQpJLZcDws_L4aGHJWXOQ",authDomain:"asignacion-plazas.firebaseapp.com",projectId:"asignacion-plazas",storageBucket:"asignacion-plazas.firebasestorage.app",messagingSenderId:"525955676079",appId:"1:525955676079:web:a7e0b00391e75c902fe15a",measurementId:"G-E0DLWYPVKP"}));try{(function(e,t){wt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Dh(e,Xd.provider,{build:e=>new Yd(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()})(Kp).catch((e=>{"failed-precondition"===e.code?console.warn("La persistencia fall\xf3: m\xfaltiples pesta\xf1as abiertas"):"unimplemented"===e.code&&console.warn("El navegador no soporta persistencia")}))}catch(eg){console.warn("Error al configurar persistencia:",eg)}const Hp=async function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];try{const{orden:o,centrosIds:a,docId:l}=e,u=n.find((e=>e.order===o));if(u)return console.log(`El orden ${o} ya tiene una asignaci\xf3n en ${u.centro}`),{success:!0,message:`El orden ${o} ya tiene una asignaci\xf3n en ${u.centro}`,yaAsignado:!0};const c={};t.forEach((e=>{c[e.id]={...e}}));let d=!1;for(const e of a){const t=c[e];if(!t){console.warn(`Centro con ID ${e} no encontrado para orden ${o}`);continue}if(t.plazas-(t.asignadas||0)>0){const n=await s(o,e,t,l,a);return console.log(`\u2705 Asignaci\xf3n directa completada: Orden ${o} \u2192 ${t.centro} (plazas disponibles)`),d=!0,{success:!0,message:`Plaza asignada para orden ${o} en ${t.centro}`,desplazado:!1,asignacionId:n}}{const u=n.filter((t=>t.id===e));if(0===u.length){console.warn(`No se encontraron asignaciones para el centro ${t.centro} aunque figura como completo`);continue}const c=[...u].sort(((e,t)=>t.order-e.order)),h=c[0];if(console.log(`Centro ${t.centro}: asignaciones existentes ${c.map((e=>e.order)).join(", ")}`),h&&h.order>o){console.log(`\u26a0\ufe0f Desplazando: orden ${h.order} (menor prioridad) para asignar ${o} (mayor prioridad) en ${t.centro}`),await bf(Eh(r,"asignaciones",h.docId));const n=await s(o,e,t,l,a);let u=null;try{u=(await mf(kh(r,"historialSolicitudes"))).docs.map((e=>({...e.data(),docId:e.id}))).find((e=>e.orden===h.order))}catch(eg){console.log("No se pudo buscar en historial de solicitudes:",eg.message)}const c=i.find((e=>e.orden===h.order));let f;c?(f=c.centrosIds,console.log(`Encontrada solicitud original para orden ${h.order} con ${f.length} centros preferidos`)):u?(f=u.centrosIds,console.log(`Encontrada solicitud hist\xf3rica para orden ${h.order} con ${f.length} centros preferidos`)):(console.log(`No se encontr\xf3 solicitud para orden ${h.order}, usando solo el centro actual`),f=[e]),f.includes(e)||f.push(e);const p={orden:h.order,centrosIds:f,timestamp:Date.now(),desplazadoPor:o};await wf(kh(r,"solicitudesPendientes"),p);console.log(`\u26a0\ufe0f Nueva solicitud pendiente creada para el orden desplazado ${h.order}`);try{await wf(kh(r,"historialSolicitudes"),{...p,fechaHistorico:(new Date).toISOString()})}catch(eg){console.log("Error al guardar en historial:",eg.message)}return d=!0,{success:!0,message:`Plaza reasignada para orden ${o} en ${t.centro}, desplazando a orden ${h.order}`,desplazado:!0,ordenDesplazado:h.order,asignacionId:n}}console.log(`No se puede desplazar en ${t.centro}: la orden ${o} tiene menor prioridad que las existentes`)}}if(!d)return console.log(`\u26a0\ufe0f No se pudo asignar plaza para orden ${o}. Todos sus centros preferidos est\xe1n completos con solicitantes de mayor prioridad.`),{success:!1,message:`No se pudo asignar plaza para orden ${o}. Todos sus centros preferidos est\xe1n ocupados por solicitantes con menor n\xfamero de orden (mayor prioridad). Puedes probar con otros centros o esperar a que se liberen plazas.`}}catch(eg){return console.error("Error al procesar solicitud:",eg),{success:!1,error:eg.message,message:"Error al procesar solicitud: "+eg.message}}async function s(e,t,n,i,s){const o={order:e,id:t,localidad:n.localidad||n.municipio,centro:n.centro,municipio:n.municipio,timestamp:Date.now()},a=await wf(kh(r,"asignaciones"),o),l=(n.asignadas||0)+1;await vf(Eh(r,"centros",n.docId),{asignadas:l}),i&&await bf(Eh(r,"solicitudesPendientes",i));try{await wf(kh(r,"historialSolicitudes"),{orden:e,centrosIds:s,centroAsignado:t,timestamp:Date.now(),fechaHistorico:(new Date).toISOString()})}catch(eg){console.log("Error al guardar en historial:",eg.message)}return console.log(`\u2705 Plaza asignada: Orden ${e} \u2192 ${n.centro}`),a.id}};var Gp=n(579);const Wp=e=>{let{assignments:t}=e;if(!t.length)return(0,Gp.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",backgroundColor:"#f5f7fa",borderRadius:"8px",color:"#5c6c7c"},children:[(0,Gp.jsx)("div",{style:{fontSize:"36px",marginBottom:"15px"},children:"\ud83d\udccb"}),(0,Gp.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},children:"No hay asignaciones realizadas"}),(0,Gp.jsx)("div",{style:{fontSize:"14px"},children:"Las asignaciones aparecer\xe1n aqu\xed una vez procesadas las solicitudes"})]});const n=t.reduce(((e,t)=>(e[t.order]||(e[t.order]=[]),e[t.order].push(t),e)),{}),r=Object.keys(n).map(Number).sort(((e,t)=>e-t)),i={container:{position:"relative"},infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"15px"},statsContainer:{display:"flex",gap:"15px",flexWrap:"wrap"},statCard:{backgroundColor:"white",padding:"12px 18px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",border:"1px solid #eaeaea",minWidth:"120px",display:"flex",alignItems:"center",gap:"10px"},statIcon:{backgroundColor:"#e6f7ff",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:"#1890ff"},statContent:{flex:1},statValue:{fontSize:"18px",fontWeight:"bold",color:"#2c3e50"},statLabel:{fontSize:"12px",color:"#95a5a6"},infoBox:{padding:"12px 15px",backgroundColor:"#f8f9fa",borderRadius:"6px",marginBottom:"20px",borderLeft:"4px solid #3498db",fontSize:"14px",color:"#2c3e50",lineHeight:"1.5"},tableContainer:{overflowX:"auto",paddingBottom:"5px",border:"1px solid #eaeaea",borderRadius:"8px"},table:{width:"100%",borderCollapse:"collapse"},tableHeader:{backgroundImage:"linear-gradient(to right, #f8f9fa, #e9ecef)",position:"sticky",top:0,zIndex:10},th:{textAlign:"left",padding:"14px 16px",fontSize:"14px",fontWeight:"600",color:"#495057",borderBottom:"2px solid #dee2e6"},tr:{transition:"background-color 0.2s ease"},td:{padding:"14px 16px",borderBottom:"1px solid #e9ecef",fontSize:"14px",verticalAlign:"middle"},priorityBadge:{display:"inline-block",padding:"3px 8px",backgroundColor:"#fff3cd",color:"#856404",borderRadius:"30px",fontSize:"11px",fontWeight:"600",marginLeft:"8px"},centerName:{fontWeight:"600",color:"#2c3e50"},timestamp:{color:"#7f8c8d",fontSize:"13px"}};return(0,Gp.jsxs)("div",{style:i.container,children:[(0,Gp.jsx)("div",{style:i.infoContainer,children:(0,Gp.jsxs)("div",{style:i.statsContainer,children:[(0,Gp.jsxs)("div",{style:i.statCard,children:[(0,Gp.jsx)("div",{style:i.statIcon,children:"\ud83d\udc65"}),(0,Gp.jsxs)("div",{style:i.statContent,children:[(0,Gp.jsx)("div",{style:i.statValue,children:r.length}),(0,Gp.jsx)("div",{style:i.statLabel,children:"Personas asignadas"})]})]}),(0,Gp.jsxs)("div",{style:i.statCard,children:[(0,Gp.jsx)("div",{style:i.statIcon,children:"\ud83c\udfe2"}),(0,Gp.jsxs)("div",{style:i.statContent,children:[(0,Gp.jsx)("div",{style:i.statValue,children:new Set(t.map((e=>e.id))).size}),(0,Gp.jsx)("div",{style:i.statLabel,children:"Centros con asignaciones"})]})]})]})}),(0,Gp.jsxs)("div",{style:i.infoBox,children:[(0,Gp.jsx)("strong",{children:"Informaci\xf3n importante:"})," Las plazas han sido asignadas por n\xfamero de orden (a menor n\xfamero, mayor prioridad) y respetando el orden de preferencia de centros indicado por cada solicitante."]}),(0,Gp.jsx)("div",{style:i.tableContainer,children:(0,Gp.jsxs)("table",{style:i.table,children:[(0,Gp.jsx)("thead",{style:i.tableHeader,children:(0,Gp.jsxs)("tr",{children:[(0,Gp.jsx)("th",{style:{...i.th,width:"12%"},children:"N\xba Orden"}),(0,Gp.jsx)("th",{style:{...i.th,width:"33%"},children:"Centro de Trabajo"}),(0,Gp.jsx)("th",{style:{...i.th,width:"20%"},children:"Localidad"}),(0,Gp.jsx)("th",{style:{...i.th,width:"20%"},children:"Municipio"}),(0,Gp.jsx)("th",{style:{...i.th,width:"15%"},children:"Fecha/Hora"})]})}),(0,Gp.jsx)("tbody",{children:r.map((e=>n[e].map(((t,n)=>{const r=new Date(t.timestamp),s=`${r.toLocaleDateString()} ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,o=e<=50;return(0,Gp.jsxs)("tr",{style:{...i.tr,backgroundColor:o?"#fff9e6":n%2===0?"white":"#f8f9fa"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=o?"#fff3cd":"#f1f3f5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=o?"#fff9e6":n%2===0?"white":"#f8f9fa"},children:[(0,Gp.jsxs)("td",{style:i.td,children:[(0,Gp.jsx)("span",{style:{fontWeight:o?"bold":"normal"},children:e}),o&&(0,Gp.jsx)("span",{style:i.priorityBadge,children:"Alta prioridad"})]}),(0,Gp.jsx)("td",{style:i.td,children:(0,Gp.jsx)("div",{style:i.centerName,children:t.centro})}),(0,Gp.jsx)("td",{style:i.td,children:t.localidad}),(0,Gp.jsx)("td",{style:i.td,children:t.municipio}),(0,Gp.jsx)("td",{style:i.td,children:(0,Gp.jsx)("div",{style:i.timestamp,children:s})})]},`${e}-${n}`)}))))})]})})]})},Qp=e=>{let{availablePlazas:t,assignments:n,searchTerm:i,setSearchTerm:s,orderNumber:o,setOrderNumber:a,centrosSeleccionados:l,setCentrosSeleccionados:u,handleOrderSubmit:c,isProcessing:d}=e;const[h,f]=(0,r.useState)(1),[p,g]=(0,r.useState)(10),[m,y]=(0,r.useState)("undefined"!==typeof window?window.innerWidth:1200),[v,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[E,T]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=()=>{y(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const I=m<768,C=e=>{const n=new Set;return t.forEach((t=>{t[e]&&n.add(t[e])})),Array.from(n).sort()},_=C("asi"),N=C("departamento"),A=C("municipio"),D=[...t.filter((e=>{if(i){var t,n,r,s,o,a;const l=i.toLowerCase();if(!((null===(t=e.centro)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(n=e.localidad)||void 0===n?void 0:n.toLowerCase().includes(l))||(null===(r=e.municipio)||void 0===r?void 0:r.toLowerCase().includes(l))||(null===(s=e.codigo)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(o=e.asi)||void 0===o?void 0:o.toLowerCase().includes(l))||(null===(a=e.departamento)||void 0===a?void 0:a.toLowerCase().includes(l))))return!1}return(!w||e.asi===w)&&(!S||e.departamento===S)&&(!E||e.municipio===E)}))].sort(((e,t)=>{var n;const r=e.plazas-(e.asignadas||0),i=t.plazas-(t.asignadas||0);return 0===i&&r>0?-1:0===r&&i>0?1:r!==i?i-r:(null===(n=e.centro)||void 0===n?void 0:n.localeCompare(t.centro||""))||0})),P=Math.ceil(D.length/p),L=h*p,R=L-p,O=D.slice(R,L),z=t.reduce(((e,t)=>e+(t.plazas||0)),0),M=(t.reduce(((e,t)=>e+(t.asignadas||0)),0),()=>{b(null)}),F=e=>{const t=Number(e.target.value);if(e.target.checked)l.includes(t)||u([...l,t]);else{const e=l.filter((e=>e!==t));u(e)}};return(0,Gp.jsxs)("div",{className:"plazas-container",children:[(0,Gp.jsx)("h2",{children:"Plazas Disponibles"}),(0,Gp.jsxs)("div",{style:{marginBottom:"25px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[(0,Gp.jsx)("h3",{style:{fontSize:"18px",color:"#343a40",marginTop:0,marginBottom:"15px",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:"Solicitar una plaza"}),(0,Gp.jsxs)("form",{onSubmit:c,children:[(0,Gp.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Gp.jsx)("label",{htmlFor:"orderNumber",style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#495057"},children:"N\xfamero de Orden:"}),(0,Gp.jsx)("input",{type:"number",id:"orderNumber",value:o,onChange:e=>a(e.target.value),style:{width:"100%",padding:"12px 15px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"16px",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.05)"},required:!0,placeholder:"Introduce tu n\xfamero de orden"})]}),(0,Gp.jsxs)("div",{style:{padding:"12px 15px",backgroundColor:"#e6f7ff",border:"1px solid #91d5ff",borderRadius:"6px",marginBottom:"15px",fontSize:"14px",color:"#1890ff",display:"flex",alignItems:"flex-start",gap:"10px"},children:[(0,Gp.jsx)("span",{style:{fontSize:"18px"},children:"\u2139\ufe0f"}),(0,Gp.jsxs)("div",{children:[(0,Gp.jsx)("strong",{children:"Informaci\xf3n importante:"})," Puedes solicitar plazas aunque aparezcan como completas. El sistema asignar\xe1 las plazas priorizando por n\xfamero de orden (menor n\xfamero = mayor prioridad), incluso si la plaza ya est\xe1 asignada a alguien con un n\xfamero de orden mayor."]})]}),(0,Gp.jsxs)("div",{style:{padding:"10px 15px",backgroundColor:"#e9f5fe",borderRadius:"6px",marginBottom:"20px",fontSize:"14px",borderLeft:"4px solid #3498db"},children:[(0,Gp.jsx)("strong",{children:"Importante:"})," Selecciona tus centros por orden de preferencia. El primer centro que selecciones ser\xe1 tu primera opci\xf3n."]}),l.length>0&&(0,Gp.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#e8f5e9",borderRadius:"6px",border:"1px solid #c8e6c9"},children:[(0,Gp.jsx)("strong",{style:{color:"#2E7D32"},children:"Centros seleccionados en orden de preferencia:"}),(0,Gp.jsx)("ol",{style:{paddingLeft:"25px",marginTop:"10px",marginBottom:"0",color:"#333"},children:l.map(((e,n)=>{const r=t.find((t=>t.id===e));return r?(0,Gp.jsxs)("li",{style:{marginBottom:"8px"},children:[(0,Gp.jsx)("strong",{children:r.centro}),(0,Gp.jsxs)("span",{style:{color:"#555"},children:["(",r.municipio,")"]}),0===n&&(0,Gp.jsx)("span",{style:{display:"inline-block",marginLeft:"8px",fontSize:"12px",color:"#d35400",backgroundColor:"#fff3cd",padding:"1px 5px",borderRadius:"10px",fontWeight:"bold"},children:"1\xaa opci\xf3n"})]},e):null}))}),(0,Gp.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,Gp.jsx)("button",{type:"button",onClick:()=>u([]),style:{padding:"6px 12px",backgroundColor:"#f8d7da",color:"#721c24",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Limpiar selecci\xf3n"})})]}),(0,Gp.jsx)("div",{style:{textAlign:"center"},children:(0,Gp.jsx)("button",{type:"submit",disabled:d||0===l.length,style:{padding:"12px 25px",backgroundImage:d?"linear-gradient(to right, #cccccc, #dddddd)":"linear-gradient(to right, #3498db, #2980b9)",color:"white",border:"none",borderRadius:"6px",cursor:d||0===l.length?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:d?(0,Gp.jsxs)(Gp.Fragment,{children:[(0,Gp.jsx)("span",{style:{display:"inline-block",width:"18px",height:"18px",border:"3px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",animation:"spin 1s linear infinite",marginRight:"10px"}}),"Procesando..."]}):(0,Gp.jsx)(Gp.Fragment,{children:"Solicitar Plaza"})})})]})]}),(0,Gp.jsxs)("div",{className:"search-container",children:[(0,Gp.jsx)("input",{type:"text",className:"search-box",placeholder:"Buscar por centro, municipio o c\xf3digo...",value:i,onChange:e=>{s(e.target.value),f(1)}}),i&&(0,Gp.jsx)("button",{className:"clear-search",onClick:()=>s(""),children:"\xd7"})]}),(0,Gp.jsxs)("div",{className:"filters-container",children:[(0,Gp.jsxs)("select",{className:"filter-select",value:w,onChange:e=>{x(e.target.value),f(1)},children:[(0,Gp.jsx)("option",{value:"",children:"Todos los ASI"}),_.map((e=>(0,Gp.jsx)("option",{value:e,children:e},e)))]}),(0,Gp.jsxs)("select",{className:"filter-select",value:S,onChange:e=>{k(e.target.value),f(1)},children:[(0,Gp.jsx)("option",{value:"",children:"Todos los departamentos"}),N.map((e=>(0,Gp.jsx)("option",{value:e,children:e},e)))]}),(0,Gp.jsxs)("select",{className:"filter-select",value:E,onChange:e=>{T(e.target.value),f(1)},children:[(0,Gp.jsx)("option",{value:"",children:"Todos los municipios"}),A.map((e=>(0,Gp.jsx)("option",{value:e,children:e},e)))]}),(0,Gp.jsxs)("select",{className:"filter-select",value:p,onChange:e=>{g(Number(e.target.value)),f(1)},children:[(0,Gp.jsx)("option",{value:10,children:"10 por p\xe1gina"}),(0,Gp.jsx)("option",{value:25,children:"25 por p\xe1gina"}),(0,Gp.jsx)("option",{value:50,children:"50 por p\xe1gina"}),(0,Gp.jsx)("option",{value:100,children:"100 por p\xe1gina"})]})]}),(0,Gp.jsxs)("div",{className:"results-info",children:[(0,Gp.jsxs)("span",{children:["Mostrando ",O.length," de ",D.length," centros"]}),(0,Gp.jsxs)("span",{children:["Total plazas: ",z]})]}),(0,Gp.jsx)("div",{className:"plazas-grid",children:0===D.length?(0,Gp.jsxs)("div",{className:"empty-state",children:[(0,Gp.jsx)("div",{className:"empty-icon",children:"\ud83d\udd0d"}),(0,Gp.jsx)("p",{children:"No se encontraron plazas con los criterios seleccionados."}),(0,Gp.jsx)("button",{className:"reset-filters",onClick:()=>{s(""),f(1)},children:"Limpiar filtros"})]}):(0,Gp.jsxs)("table",{className:"tabla-plazas",children:[(0,Gp.jsx)("thead",{children:(0,Gp.jsxs)("tr",{children:[(0,Gp.jsx)("th",{style:{width:"60px"}}),(0,Gp.jsx)("th",{children:"C\xf3digo"}),(0,Gp.jsx)("th",{className:"centro-column",children:"Centro"}),(0,Gp.jsx)("th",{children:"Municipio"}),(0,Gp.jsx)("th",{children:"Plazas"}),m<768&&(0,Gp.jsx)("th",{style:{width:"40px"},children:"Info"})]})}),(0,Gp.jsx)("tbody",{children:O.map(((e,t)=>{const n=e.plazas-e.asignadas,r=l.includes(e.id);r&&l.indexOf(e.id);let i=t%2===0?"white":"#f9f9f9";r?i="#e6f7ff":0===n?i="#ffe6e6":n<=2&&(i="#fff3cd");const s=e.docId||`plaza-${e.id}-${t}`;return(0,Gp.jsxs)("tr",{style:{backgroundColor:i,transition:"background-color 0.2s ease"},onClick:()=>{I&&(r?u(l.filter((t=>t!==e.id))):l.includes(e.id)||u([...l,e.id]))},children:[(0,Gp.jsx)("td",{children:(0,Gp.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",justifyContent:"center"},children:[(0,Gp.jsx)("input",{type:"checkbox",id:`plaza-${e.id}`,value:e.id,onChange:F,checked:l.includes(e.id),style:{width:"20px",height:"20px",cursor:"pointer"}}),l.includes(e.id)&&(0,Gp.jsx)("span",{style:{backgroundImage:"linear-gradient(135deg, #1976D2, #2196F3)",color:"white",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"14px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:l.indexOf(e.id)+1})]})}),(0,Gp.jsx)("td",{children:e.codigo}),(0,Gp.jsx)("td",{className:"centro-column",title:e.centro,children:e.centro}),(0,Gp.jsx)("td",{children:e.municipio}),(0,Gp.jsx)("td",{children:e.plazas}),m<768&&(0,Gp.jsx)("td",{children:(0,Gp.jsx)("button",{className:"info-button",onClick:t=>{t.stopPropagation(),(e=>{b({...e,disponibles:e.plazas-(e.asignadas||0)})})(e)},children:"\u2139\ufe0f"})})]},s)}))})]})}),D.length>0&&(0,Gp.jsxs)("div",{className:"pagination",children:[(0,Gp.jsx)("button",{className:"pagination-button",onClick:()=>f(1),disabled:1===h,children:"\xab\xab"}),(0,Gp.jsx)("button",{className:"pagination-button",onClick:()=>f((e=>Math.max(1,e-1))),disabled:1===h,children:"\xab"}),(P<=5?Array.from({length:P},((e,t)=>t+1)):h<=3?[1,2,3,4,5]:h>=P-2?[P-4,P-3,P-2,P-1,P]:[h-2,h-1,h,h+1,h+2]).map((e=>(0,Gp.jsx)("button",{className:"pagination-button "+(h===e?"active":""),onClick:()=>f(e),children:e},e))),(0,Gp.jsx)("button",{className:"pagination-button",onClick:()=>f((e=>Math.min(P,e+1))),disabled:h===P,children:"\xbb"}),(0,Gp.jsx)("button",{className:"pagination-button",onClick:()=>f(P),disabled:h===P,children:"\xbb\xbb"})]}),v&&(0,Gp.jsx)("div",{className:"info-modal",children:(0,Gp.jsxs)("div",{className:"info-content",children:[(0,Gp.jsx)("h3",{children:"Informaci\xf3n del centro"}),(0,Gp.jsxs)("p",{children:[(0,Gp.jsx)("strong",{children:"Centro:"})," ",v.centro]}),(0,Gp.jsxs)("p",{children:[(0,Gp.jsx)("strong",{children:"C\xf3digo:"})," ",v.codigo]}),(0,Gp.jsxs)("p",{children:[(0,Gp.jsx)("strong",{children:"Municipio:"})," ",v.municipio]}),(0,Gp.jsxs)("p",{children:[(0,Gp.jsx)("strong",{children:"Departamento:"})," ",v.departamento]}),(0,Gp.jsxs)("p",{children:[(0,Gp.jsx)("strong",{children:"ASI:"})," ",v.asi]}),(0,Gp.jsxs)("p",{children:[(0,Gp.jsx)("strong",{children:"Plazas disponibles:"})," ",v.disponibles]}),(0,Gp.jsxs)("div",{className:"modal-footer",children:[(0,Gp.jsx)("button",{className:"close-button",onClick:M,children:"Cerrar"}),(0,Gp.jsx)("button",{className:"select-button",onClick:()=>{F({target:{value:v.id}}),M()},children:l.includes(v.id)?"Deseleccionar":"Seleccionar"})]})]})}),(0,Gp.jsx)("style",{children:"\n        .plazas-container {\n          background-color: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n          padding: 20px;\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n          max-width: 100%;\n        }\n        \n        .search-container {\n          position: relative;\n          margin-bottom: 15px;\n          width: 100%;\n          max-width: 100%;\n        }\n        \n        .search-box {\n          width: 100%;\n          padding: 14px 16px;\n          border: 2px solid #ddd;\n          border-radius: 6px;\n          font-size: 16px;\n          transition: border-color 0.3s;\n          box-sizing: border-box;\n        }\n        \n        .search-box:focus {\n          border-color: #1976d2;\n          outline: none;\n          box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.2);\n        }\n        \n        .clear-search {\n          position: absolute;\n          right: 10px;\n          top: 50%;\n          transform: translateY(-50%);\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n          color: #999;\n        }\n        \n        .clear-search:hover {\n          color: #333;\n        }\n        \n        .filters-container {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 10px;\n          margin-bottom: 15px;\n          max-width: 100%;\n        }\n        \n        .filter-select {\n          padding: 10px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          min-width: 150px;\n          flex-grow: 1;\n          box-sizing: border-box;\n        }\n        \n        .results-info {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 10px;\n          font-size: 14px;\n          color: #555;\n          font-weight: 500;\n          flex-wrap: wrap;\n        }\n        \n        .plazas-grid {\n          overflow-y: auto;\n          height: 100%;\n          border: 1px solid #eee;\n          border-radius: 4px;\n          margin-bottom: 15px;\n          -webkit-overflow-scrolling: touch;\n        }\n        \n        .tabla-plazas {\n          width: 100%;\n          border-collapse: collapse;\n          table-layout: fixed;\n        }\n        \n        .tabla-plazas th {\n          background-color: #f5f5f5;\n          position: sticky;\n          top: 0;\n          padding: 12px 10px;\n          text-align: left;\n          border-bottom: 2px solid #ddd;\n          z-index: 10;\n          font-weight: 600;\n        }\n        \n        .tabla-plazas td {\n          padding: 12px 10px;\n          border-bottom: 1px solid #eee;\n          word-break: break-word;\n        }\n        \n        .centro-column {\n          max-width: 300px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .tabla-plazas tr:hover {\n          background-color: #f9f9f9;\n        }\n        \n        .selected-row {\n          background-color: #e3f2fd;\n        }\n        \n        .selected-row:hover {\n          background-color: #bbdefb;\n        }\n        \n        .empty-state {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          padding: 40px 0;\n          text-align: center;\n          color: #757575;\n        }\n        \n        .empty-icon {\n          font-size: 48px;\n          margin-bottom: 20px;\n        }\n        \n        .reset-filters {\n          margin-top: 15px;\n          padding: 8px 16px;\n          background-color: #1976d2;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        \n        .pagination {\n          display: flex;\n          justify-content: center;\n          gap: 5px;\n          margin-top: 15px;\n          flex-wrap: wrap;\n        }\n        \n        .pagination-button {\n          padding: 8px 12px;\n          border: 1px solid #ddd;\n          background-color: white;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        \n        .pagination-button.active {\n          background-color: #1976d2;\n          color: white;\n          border-color: #1976d2;\n        }\n        \n        .pagination-button:hover:not(:disabled) {\n          background-color: #f0f0f0;\n          border-color: #bbb;\n        }\n        \n        .pagination-button:disabled {\n          cursor: not-allowed;\n          opacity: 0.5;\n        }\n        \n        .info-button {\n          background: none;\n          border: none;\n          cursor: pointer;\n          font-size: 18px;\n          padding: 2px;\n        }\n        \n        .info-modal {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.5);\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 1000;\n        }\n        \n        .info-content {\n          background-color: white;\n          border-radius: 8px;\n          padding: 20px;\n          width: 90%;\n          max-width: 500px;\n          max-height: 80vh;\n          overflow-y: auto;\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n        }\n        \n        .info-content h3 {\n          margin-top: 0;\n          color: #1a237e;\n          border-bottom: 1px solid #eee;\n          padding-bottom: 10px;\n        }\n        \n        .modal-footer {\n          display: flex;\n          justify-content: flex-end;\n          gap: 10px;\n          margin-top: 20px;\n          border-top: 1px solid #eee;\n          padding-top: 15px;\n        }\n        \n        .close-button, .select-button {\n          padding: 8px 16px;\n          border-radius: 4px;\n          border: none;\n          cursor: pointer;\n        }\n        \n        .close-button {\n          background-color: #f5f5f5;\n          color: #333;\n        }\n        \n        .select-button {\n          background-color: #1976d2;\n          color: white;\n        }\n        \n        /* Dise\xf1o responsive */\n        @media (max-width: 768px) {\n          .plazas-container {\n            padding: 15px 10px;\n          }\n          \n          .filters-container {\n            flex-direction: column;\n            gap: 8px;\n          }\n          \n          .filter-select {\n            width: 100%;\n          }\n          \n          .tabla-plazas th, .tabla-plazas td {\n            padding: 10px 5px;\n            font-size: 13px;\n          }\n          \n          .tabla-plazas th:nth-child(1) {\n            width: 65px;\n          }\n          \n          .tabla-plazas th:nth-child(2) {\n            width: 60px;\n          }\n          \n          .tabla-plazas th:nth-child(4) {\n            width: 80px;\n          }\n          \n          .tabla-plazas th:nth-child(5) {\n            width: 45px;\n          }\n          \n          .centro-column {\n            max-width: 100px;\n          }\n          \n          .pagination-button {\n            padding: 6px 10px;\n            font-size: 13px;\n          }\n          \n          h2 {\n            font-size: 20px;\n            margin-top: 0;\n          }\n          \n          form > div {\n            margin-bottom: 10px !important;\n          }\n          \n          .search-box {\n            padding: 10px 12px;\n            font-size: 14px;\n          }\n        }\n        \n        /* Animaciones */\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})},Yp=e=>{let{solicitudes:t,assignments:n,availablePlazas:i}=e;const[s,o]=(0,r.useState)(1),[a,l]=(0,r.useState)(10),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)("undefined"!==typeof window?window.innerWidth:1200);(0,r.useEffect)((()=>{const e=()=>{h(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const f=d<768,p=[...t.filter((e=>{const t=e.orden.toString(),n=e.centrosIds.map((e=>{const t=i.find((t=>t.id===e));return t?t.centro+" "+t.localidad+" "+t.municipio:""})).join(" ").toLowerCase();return t.includes(u.toLowerCase())||n.includes(u.toLowerCase())}))].sort(((e,t)=>e.orden-t.orden)),g=Math.ceil(p.length/a),m=s*a,y=m-a,v=p.slice(y,m);return t.length?(0,Gp.jsxs)("div",{children:[(0,Gp.jsxs)("div",{style:{marginBottom:"15px",fontSize:"14px",padding:"12px 15px",backgroundColor:"#fff7f0",borderRadius:"6px",borderLeft:"4px solid #d35400",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:["A continuaci\xf3n se muestran las solicitudes pendientes con sus preferencias de centros en orden.",(0,Gp.jsx)("p",{style:{color:"#d35400",fontWeight:"bold",marginTop:"8px",marginBottom:"0"},children:"\u26a0\ufe0f Las solicitudes se procesan por orden de prioridad (n\xfamero de orden menor = mayor prioridad)"})]}),(0,Gp.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Gp.jsxs)("div",{style:{marginBottom:"10px",position:"relative"},children:[(0,Gp.jsx)("input",{type:"text",placeholder:"Buscar por n\xfamero de orden o centro...",value:u,onChange:e=>{c(e.target.value),o(1)},style:{padding:"12px 15px",paddingLeft:"40px",border:"1px solid #ddd",borderRadius:"6px",width:"100%",fontSize:"16px",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.05)"}}),(0,Gp.jsx)("div",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666",fontSize:"18px"},children:"\ud83d\udd0d"})]}),(0,Gp.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},children:[(0,Gp.jsxs)("div",{style:{marginBottom:"10px",fontSize:"14px",color:"#666"},children:["Mostrando ",(0,Gp.jsxs)("strong",{children:[p.length>0?y+1:0,"-",Math.min(m,p.length)]})," de ",(0,Gp.jsx)("strong",{children:p.length})," solicitudes",u&&` (filtradas de ${t.length})`]}),(0,Gp.jsx)("div",{children:(0,Gp.jsxs)("select",{value:a,onChange:e=>{l(Number(e.target.value)),o(1)},style:{padding:"8px 12px",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:[(0,Gp.jsx)("option",{value:10,children:"10 por p\xe1gina"}),(0,Gp.jsx)("option",{value:25,children:"25 por p\xe1gina"}),(0,Gp.jsx)("option",{value:50,children:"50 por p\xe1gina"}),(0,Gp.jsx)("option",{value:p.length,children:"Ver todas"})]})})]})]}),f&&(0,Gp.jsx)("div",{style:{marginBottom:"15px",fontSize:"13px",color:"#666",textAlign:"center",backgroundColor:"#fff3cd",padding:"8px",borderRadius:"4px"},children:"\u2190 Desliza para ver la tabla completa \u2192"}),(0,Gp.jsx)("div",{style:{overflowX:"auto",border:"1px solid #e1e8f0",borderRadius:"6px",WebkitOverflowScrolling:"touch"},children:(0,Gp.jsxs)("table",{className:"responsive-table",style:{width:"100%",borderCollapse:"collapse",minWidth:f?"768px":"auto"},children:[(0,Gp.jsx)("thead",{children:(0,Gp.jsxs)("tr",{style:{backgroundImage:"linear-gradient(to right, #fef5ec, #fde4ce)",position:"sticky",top:0,zIndex:5},children:[(0,Gp.jsx)("th",{style:{border:"1px solid #ddd",padding:"12px 15px",textAlign:"left",color:"#d35400"},children:"N\xba Orden"}),(0,Gp.jsx)("th",{style:{border:"1px solid #ddd",padding:"12px 15px",textAlign:"left",color:"#d35400"},children:"Fecha/Hora"}),(0,Gp.jsx)("th",{style:{border:"1px solid #ddd",padding:"12px 15px",textAlign:"left",color:"#d35400"},children:"Centros Seleccionados (en orden de preferencia)"}),(0,Gp.jsx)("th",{style:{border:"1px solid #ddd",padding:"12px 15px",textAlign:"center",color:"#d35400"},children:"Estado"})]})}),(0,Gp.jsxs)("tbody",{children:[v.map(((e,t)=>{const r=new Date(e.timestamp),s=`${r.toLocaleDateString()} ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,o=n.some((t=>t.order===e.orden)),a=n.find((t=>t.order===e.orden)),l=o?"#e8f5e9":t%2===0?"white":"#fef9f4";return(0,Gp.jsxs)("tr",{style:{backgroundColor:l,opacity:o?.8:1,transition:"background-color 0.2s ease"},children:[(0,Gp.jsxs)("td",{style:{border:"1px solid #ddd",padding:"12px 15px",fontWeight:"bold",backgroundColor:e.orden<=50?"#fff3cd":"inherit"},children:[e.orden,e.orden<=50&&(0,Gp.jsx)("span",{style:{display:"inline-block",marginLeft:"8px",fontSize:"12px",color:"#856404",backgroundColor:"#fff3cd",padding:"2px 6px",borderRadius:"12px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:"Alta prioridad"})]}),(0,Gp.jsx)("td",{style:{border:"1px solid #ddd",padding:"12px 15px"},children:s}),(0,Gp.jsx)("td",{style:{border:"1px solid #ddd",padding:"12px 15px"},children:(0,Gp.jsx)("ol",{style:{margin:"0",paddingLeft:"20px"},children:e.centrosIds.map(((e,t)=>{const n=i.find((t=>t.id===e)),r=a&&a.id===e;return(0,Gp.jsx)("li",{style:{marginBottom:"8px",backgroundColor:r?"#e8f5e9":"inherit",padding:r?"6px 8px":"0",borderRadius:r?"4px":"0",border:r?"1px solid #c8e6c9":"none"},children:n?(0,Gp.jsxs)(Gp.Fragment,{children:[(0,Gp.jsx)("strong",{style:{color:0===t?"#d35400":"inherit"},children:n.centro}),(0,Gp.jsxs)("span",{style:{fontSize:"14px",color:"#666"},children:["- ",n.localidad," (",n.municipio,")"]}),0===t&&(0,Gp.jsx)("span",{style:{display:"inline-block",marginLeft:"8px",fontSize:"12px",color:"#d35400",backgroundColor:"#fff3cd",padding:"1px 5px",borderRadius:"10px",fontWeight:"bold"},children:"1\xaa opci\xf3n"}),n.plazas-n.asignadas<=0&&!r&&(0,Gp.jsx)("span",{style:{color:"#e74c3c",marginLeft:"10px",fontSize:"12px",fontWeight:"bold",backgroundColor:"#ffebee",padding:"1px 6px",borderRadius:"10px"},children:"Completo"}),r&&(0,Gp.jsx)("span",{style:{color:"#2E7D32",marginLeft:"10px",fontSize:"12px",fontWeight:"bold",backgroundColor:"#e8f5e9",padding:"1px 6px",borderRadius:"10px"},children:"\u2713 Asignado"})]}):(0,Gp.jsxs)("span",{style:{color:"#999"},children:["Centro no disponible (ID: ",e,")"]})},t)}))})}),(0,Gp.jsx)("td",{style:{border:"1px solid #ddd",padding:"12px 15px",textAlign:"center"},children:o?(0,Gp.jsx)("div",{style:{backgroundColor:"#e8f5e9",color:"#2E7D32",padding:"8px 12px",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",border:"1px solid #c8e6c9",display:"inline-block"},children:"\u2713 Asignado"}):(0,Gp.jsx)("div",{style:{backgroundColor:"#fff7e6",color:"#f39c12",padding:"8px 12px",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",border:"1px solid #ffeeba",display:"inline-block"},children:"Pendiente"})})]},t)})),0===v.length&&(0,Gp.jsx)("tr",{children:(0,Gp.jsx)("td",{colSpan:"4",style:{textAlign:"center",padding:"30px",color:"#666"},children:u?`No se encontraron solicitudes que coincidan con "${u}"`:"No hay solicitudes pendientes para mostrar"})})]})]})}),p.length>a&&(0,Gp.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px",gap:"5px",flexWrap:"wrap"},children:[(0,Gp.jsx)("button",{onClick:()=>{s>1&&o(s-1)},disabled:1===s,style:{padding:"8px 12px",backgroundColor:1===s?"#f1f1f1":"white",border:"1px solid #ddd",borderRadius:"4px",cursor:1===s?"not-allowed":"pointer"},children:"\xab Anterior"}),Array.from({length:Math.min(5,g)},((e,t)=>{let n;return n=g<=5||s<=3?t+1:s>=g-2?g-4+t:s-2+t,(0,Gp.jsx)("button",{onClick:()=>o(n),style:{padding:"8px 12px",backgroundColor:s===n?"#e67e22":"white",color:s===n?"white":"#333",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer"},children:n},n)})),(0,Gp.jsx)("button",{onClick:()=>{s<g&&o(s+1)},disabled:s===g,style:{padding:"8px 12px",backgroundColor:s===g?"#f1f1f1":"white",border:"1px solid #ddd",borderRadius:"4px",cursor:s===g?"not-allowed":"pointer"},children:"Siguiente \xbb"})]})]}):(0,Gp.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",backgroundColor:"#f5f7fa",borderRadius:"8px",color:"#5c6c7c"},children:[(0,Gp.jsx)("div",{style:{fontSize:"36px",marginBottom:"15px"},children:"\ud83d\udcdd"}),(0,Gp.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},children:"No hay solicitudes pendientes"}),(0,Gp.jsx)("div",{style:{fontSize:"14px"},children:'Las solicitudes aparecer\xe1n aqu\xed cuando se env\xeden desde la pesta\xf1a "Plazas Disponibles"'})]})};const Xp=function(){return(0,Gp.jsxs)("div",{style:{marginTop:"40px",marginBottom:"20px",padding:"15px",borderTop:"1px solid #eee",textAlign:"center",color:"#666",fontSize:"14px"},children:[(0,Gp.jsxs)("p",{children:["Realizado por ",(0,Gp.jsx)("a",{href:"https://ag-marketing.es",target:"_blank",rel:"noopener noreferrer",style:{color:"#18539E",textDecoration:"none",fontWeight:"bold"},children:"AG-Marketing"})]}),(0,Gp.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," - Todos los derechos reservados"]})]})};const Jp=function(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[g,m]=(0,r.useState)(60),[y,v]=(0,r.useState)(""),[b,w]=(0,r.useState)([]),[x,S]=(0,r.useState)(!1),[k,E]=(0,r.useState)(null),[T,I]=(0,r.useState)(""),[C,_]=(0,r.useState)(!1),[N,A]=(0,r.useState)(""),[D,P]=(0,r.useState)("success"),[L,R]=(0,r.useState)("asignaciones"),O=(0,r.useRef)(!1),z=(0,r.useRef)(!1),M=(0,r.useRef)(null),F=(0,r.useRef)(0),j=(0,r.useRef)(null),V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";A(e),P(t),_(!0),"error"!==t&&setTimeout((()=>{_(!1)}),5e3)},B=async e=>{try{c(`Limpiando colecci\xf3n ${e}...`);const t=await mf(kh(Kp,e));if(t.size>0){console.log(`Eliminando ${t.size} documentos de ${e}...`);for(const n of t.docs)await bf(Eh(Kp,e,n.id));console.log(`Colecci\xf3n ${e} limpiada correctamente`)}else console.log(`No hay documentos en la colecci\xf3n ${e} para eliminar`);return!0}catch(eg){throw console.error(`Error al limpiar colecci\xf3n ${e}:`,eg),eg}},U=async()=>{try{const e=(await mf(kh(Kp,"centros"))).docs.map((e=>({...e.data(),docId:e.id})));t(e),console.log(`Cargados ${e.length} centros desde Firebase`);const n=(await mf(kh(Kp,"asignaciones"))).docs.map((e=>({...e.data(),docId:e.id})));i(n),console.log(`Cargadas ${n.length} asignaciones desde Firebase`);const r=(await mf(kh(Kp,"solicitudesPendientes"))).docs.map((e=>({...e.data(),docId:e.id})));return o(r),console.log(`Cargadas ${r.length} solicitudes desde Firebase`),!0}catch(eg){throw console.error("Error al cargar datos desde Firebase:",eg),eg}};(0,r.useEffect)((()=>{let e;return(async()=>{if(O.current||z.current)console.log("Inicializaci\xf3n ya en progreso o completada. Omitiendo...");else{O.current=!0,console.log("Iniciando verificaci\xf3n de datos en Firebase...");try{const n=(await mf(kh(Kp,"centros"))).size;0===n?(console.log("No hay centros en Firebase. Cargando desde CSV..."),await B("centros"),await(async()=>{h(!0),c("Cargando datos del archivo plazas.csv...");try{await B("centros");const o=await fetch("/asignacion-plazas/plazas.csv");if(!o.ok)throw new Error(`Error al cargar el CSV: ${o.status} - ${o.statusText}`);const a=await o.text();if(console.log(`CSV cargado, tama\xf1o: ${a.length} caracteres`),a.length<100)throw new Error("El archivo CSV parece estar vac\xedo o es demasiado peque\xf1o");const l=a.split("\n").map((e=>e.replace(/"/g,"").trim())).filter(Boolean);if(l.length<5)throw new Error("El archivo CSV no contiene suficientes l\xedneas de datos");const u=l.findIndex((e=>e.includes("A.S.I.;")));if(-1===u){const e=l.findIndex((e=>e.includes("ASI;")||e.includes("DEPARTAMENTO;")||e.includes("CODIGO;")));if(-1===e)throw new Error("No se encontr\xf3 una l\xednea de encabezado v\xe1lida en el CSV");console.log(`Encabezado alternativo encontrado en l\xednea ${e}: ${l[e]}`),u=e}else console.log(`Encabezado encontrado en l\xednea ${u}: ${l[u]}`);if(l[u].split(";").length<5)throw new Error("El formato del encabezado no es v\xe1lido, faltan columnas necesarias");const d=new Set,f=new Set,p=[];let g=1,m=0,y=0,v=0;c("Analizando datos del CSV...");for(let h=u+1;h<l.length;h++){var e,t,n,r,i,s;const o=l[h].trim();if(!o)continue;if(o.includes("de 11")||o.includes("TOTAL ="))continue;const a=o.split(";");if(a.length<5){y++;continue}const u=(null===(e=a[0])||void 0===e?void 0:e.trim())||"",b=(null===(t=a[1])||void 0===t?void 0:t.trim())||"",w=(null===(n=a[2])||void 0===n?void 0:n.trim())||"",x=(null===(r=a[3])||void 0===r?void 0:r.trim())||"",S=(null===(i=a[4])||void 0===i?void 0:i.trim())||"";if(!w||w.length<2){console.warn(`L\xednea ${h+1}: C\xf3digo inv\xe1lido o ausente: "${w}"`),y++;continue}if(!x||x.length<2){console.warn(`L\xednea ${h+1}: Nombre de centro inv\xe1lido o ausente: "${x}"`),y++;continue}if(!S){console.warn(`L\xednea ${h+1}: Municipio ausente para centro: "${x}"`),y++;continue}const k=`${w}-${x}-${S}`.toLowerCase();if(d.has(k)){v++;continue}f.has(w)&&console.warn(`Posible duplicado con c\xf3digo ${w}: "${x}" en ${S}`),d.add(k),f.add(w);let E=1;if(a.length>5&&null!==(s=a[5])&&void 0!==s&&s.trim()){const e=a[5].trim(),t=parseInt(e);!isNaN(t)&&t>0?E=t:console.warn(`L\xednea ${h+1}: Valor de plazas inv\xe1lido: "${e}", usando 1 por defecto`)}else console.warn(`L\xednea ${h+1}: No se especific\xf3 n\xfamero de plazas para "${x}", usando 1 por defecto`);m+=E,p.push({id:g++,asi:u,departamento:b,codigo:w,centro:x,localidad:S,municipio:S,plazas:E,asignadas:0}),p.length%100===0&&c(`Procesando CSV: ${p.length} centros encontrados...`)}if(console.log(`Procesamiento completado: ${p.length} centros v\xe1lidos, ${y} l\xedneas inv\xe1lidas, ${v} duplicados`),console.log(`Total de plazas antes de ajuste: ${m}`),0===p.length)throw new Error("No se pudieron extraer centros v\xe1lidos del CSV");const b=7066;if(m!==b){console.log(`Ajustando conteo de plazas: ${m} \u2192 ${b}`);const e=[...p].sort(((e,t)=>t.plazas-e.plazas)),t=m-b;if(Math.abs(t)>100&&console.warn(`Diferencia muy grande (${t} plazas) entre el total calculado y el objetivo`),t>0){let n=t,r=0;for(;n>0&&r<Math.min(5,e.length);){const i=e[r],s=Math.min(Math.ceil(t/5),i.plazas-1,n);s>0&&(i.plazas-=s,n-=s,console.log(`Reducidas ${s} plazas del centro "${i.centro}" (quedan ${i.plazas})`)),r++}n>0&&(e[0].plazas-=n,console.log(`Reducidas ${n} plazas adicionales del centro "${e[0].centro}"`))}else if(t<0){let n=Math.abs(t),r=0;for(;n>0&&r<Math.min(5,e.length);){const i=e[r],s=Math.min(Math.ceil(Math.abs(t)/5),n);i.plazas+=s,n-=s,console.log(`A\xf1adidas ${s} plazas al centro "${i.centro}" (total ${i.plazas})`),r++}n>0&&(e[0].plazas+=n,console.log(`A\xf1adidas ${n} plazas adicionales al centro "${e[0].centro}"`))}const n=p.reduce(((e,t)=>e+t.plazas),0);if(n!==b)throw console.error(`Error en el ajuste: ${n} \u2260 ${b}`),new Error(`No se pudo ajustar el n\xfamero de plazas correctamente: ${n} \u2260 ${b}`);console.log(`Ajuste completado correctamente. Total final: ${n} plazas`)}c(`A\xf1adiendo ${p.length} centros a Firebase...`);let w=0;const x=await mf(kh(Kp,"centros"));if(x.size>0)return console.log(`ADVERTENCIA: Ya existen ${x.size} centros en Firebase. Cancelando carga para evitar duplicaci\xf3n.`),V("Se encontraron datos existentes. Usando datos actuales para evitar duplicaci\xf3n.","warning"),h(!1),await U();const S=100;for(let e=0;e<p.length;e+=S){const t=p.slice(e,e+S);c(`A\xf1adiendo centros: ${e}/${p.length}`);for(const e of t){const t=Eh(kh(Kp,"centros"));await yf(t,{...e,docId:t.id}),w++}console.log(`Procesados ${w}/${p.length} centros`)}return c("Datos cargados correctamente"),console.log(`Se han a\xf1adido ${w} centros a Firebase con un total exacto de ${b} plazas`),await U(),h(!1),V(`Se han cargado ${w} centros y exactamente ${b} plazas correctamente`,"success"),!0}catch(eg){return console.error("Error al cargar o procesar el CSV:",eg),V(`Error en la importaci\xf3n: ${eg.message}`,"error"),h(!1),!1}})()):(console.log(`Ya hay ${n} centros en Firebase. Cargando datos existentes...`),await U()),e=(()=>{const e=xf(kh(Kp,"centros"),(e=>{const n=[];e.forEach((e=>{n.push({...e.data(),docId:e.id})})),n.length>0&&(console.log(`Datos de centros actualizados: ${n.length} centros`),t(n))})),n=xf(kh(Kp,"asignaciones"),(e=>{const t=[];e.forEach((e=>{t.push({...e.data(),docId:e.id})})),console.log(`Datos de asignaciones actualizados: ${t.length} asignaciones`),i(t)})),r=xf(kh(Kp,"solicitudesPendientes"),(e=>{const t=[];e.forEach((e=>{t.push({...e.data(),docId:e.id})})),console.log(`Datos de solicitudes pendientes actualizados: ${t.length} solicitudes`),o(t)}));return()=>{e(),n(),r()}})(),z.current=!0}catch(eg){console.error("Error al inicializar app:",eg),V(`Error al inicializar: ${eg.message}`,"error")}finally{O.current=!1}}})(),()=>{e&&e()}}),[]),(0,r.useEffect)((()=>{if(e.length>0){return(async()=>{s.length>0&&!a&&(console.log("Procesando solicitudes al iniciar la aplicaci\xf3n..."),await $(!0),m(60))})(),()=>{M.current&&clearInterval(M.current)}}}),[e.length]),(0,r.useEffect)((()=>(j.current=setInterval((()=>{m((e=>e<=1?(console.log("Contador lleg\xf3 a 0, iniciando procesamiento autom\xe1tico..."),!a&&s.length>0&&$(!0),60):e-1))}),1e3),()=>{j.current&&clearInterval(j.current)})),[a,s.length]);const $=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a)console.log("Ya hay un procesamiento en curso, no se iniciar\xe1 otro");else{l(!0),F.current=Date.now(),t||c("Procesando solicitudes pendientes...");try{if(await U(),0===s.length)return console.log("No hay solicitudes pendientes despu\xe9s de recargar datos"),p(new Date),l(!1),void m(60);console.log(`Procesando ${s.length} solicitudes pendientes...`);const r=[...s].sort(((e,t)=>e.orden-t.orden));console.log(`Solicitudes ordenadas por prioridad: ${r.map((e=>e.orden)).join(", ")}`);const i=10;let o=0,a=0;for(let s=0;s<r.length;s+=i){const l=r.slice(s,s+i);t||c(`Procesando lote ${Math.ceil((s+1)/i)}/${Math.ceil(r.length/i)}...`);for(const t of l)try{console.log(`Procesando solicitud con orden ${t.orden}...`);const i=await Hp(t,e,n,Kp,r);o++,i.success?(a++,console.log(`Procesamiento exitoso para orden ${t.orden}: ${i.message}`)):console.log(`No se pudo procesar orden ${t.orden}: ${i.message}`)}catch(eg){console.error(`Error al procesar solicitud ${t.orden}:`,eg)}s+i<r.length&&(console.log("Recargando datos despu\xe9s del lote..."),await U())}console.log("Procesamiento terminado, recargando datos finales..."),await U();const u=new Date;if(p(u),m(60),!t){V(a>0?`Se han procesado ${a} de ${o} solicitudes correctamente.`:"No se pudieron procesar las solicitudes pendientes.",a>0?"success":"warning"),c("Procesamiento completado")}}catch(eg){console.error("Error al procesar solicitudes:",eg),t||V(`Error al procesar solicitudes: ${eg.message}`,"error")}finally{l(!1),console.log("Procesamiento finalizado")}}},q={container:{maxWidth:"1280px",margin:"0 auto",padding:"20px",backgroundColor:"#f8f9fa",minHeight:"100vh",fontFamily:"Arial, sans-serif"},header:{textAlign:"center",marginBottom:"30px",borderBottom:"1px solid #e7e7e7",paddingBottom:"15px"},title:{color:"#2c3e50",fontSize:"28px",margin:"0 0 10px 0"},subtitle:{color:"#7f8c8d",fontSize:"16px",fontWeight:"normal",margin:0},tabs:{display:"flex",gap:"2px",marginBottom:"20px",backgroundColor:"#e9ecef",borderRadius:"10px",padding:"3px",overflow:"hidden"},tab:{padding:"12px 20px",cursor:"pointer",flex:1,textAlign:"center",borderRadius:"8px",transition:"all 0.3s ease",fontSize:"15px",fontWeight:"500"},activeTab:{backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",color:"#3498db"},inactiveTab:{backgroundColor:"transparent",color:"#7f8c8d"},sectionTitle:{fontSize:"20px",color:"#2c3e50",marginBottom:"15px",paddingBottom:"8px",borderBottom:"2px solid #e7e7e7"},cardContainer:{backgroundColor:"white",borderRadius:"10px",padding:"20px",boxShadow:"0 2px 10px rgba(0,0,0,0.05)",marginBottom:"20px"},popup:{position:"fixed",top:"20px",right:"20px",padding:"15px 20px",borderRadius:"10px",boxShadow:"0 3px 15px rgba(0,0,0,0.2)",zIndex:1e3,maxWidth:"350px",animation:"slideIn 0.3s ease"},processingButton:{padding:"12px 20px",backgroundImage:a?"linear-gradient(to right, #cccccc, #dddddd)":"linear-gradient(to right, #3498db, #2980b9)",color:"white",border:"none",borderRadius:"6px",cursor:a||0===s.length?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"15px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:"10px auto"},reloadButton:{padding:"12px 20px",backgroundImage:d?"linear-gradient(to right, #cccccc, #dddddd)":"linear-gradient(to right, #e74c3c, #c0392b)",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"15px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:"10px auto"}};return(0,Gp.jsxs)("div",{style:q.container,children:[(0,Gp.jsxs)("div",{style:q.header,children:[(0,Gp.jsx)("h1",{style:q.title,children:"Sistema de Asignaci\xf3n de Plazas"}),(0,Gp.jsx)("h2",{style:q.subtitle,children:"Gesti\xf3n y seguimiento de solicitudes y asignaciones"})]}),(0,Gp.jsxs)("div",{style:q.tabs,children:[(0,Gp.jsx)("div",{style:{...q.tab,..."asignaciones"===L?q.activeTab:q.inactiveTab},onClick:()=>R("asignaciones"),children:"\ud83d\udccb Historial de Asignaciones"}),(0,Gp.jsx)("div",{style:{...q.tab,..."solicitudes"===L?q.activeTab:q.inactiveTab},onClick:()=>R("solicitudes"),children:"\ud83d\udd0d Solicitudes Pendientes"}),(0,Gp.jsx)("div",{style:{...q.tab,..."plazas"===L?q.activeTab:q.inactiveTab},onClick:()=>R("plazas"),children:"\ud83c\udfe2 Plazas Disponibles"})]}),(0,Gp.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",fontSize:"14px",color:"#666",padding:"8px 12px",backgroundColor:"#f0f8ff",borderRadius:"6px"},children:[(0,Gp.jsxs)("div",{children:[(0,Gp.jsx)("span",{style:{fontWeight:"bold",marginRight:"5px"},children:"Plazas disponibles:"}),e.reduce(((e,t)=>e+t.plazas),0)-e.reduce(((e,t)=>e+(t.asignadas||0)),0)," de 7066"]}),(0,Gp.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[s.length>0&&(0,Gp.jsx)("span",{style:{marginRight:"10px",color:a?"#e74c3c":"#2ecc71"},children:a?(0,Gp.jsxs)(Gp.Fragment,{children:[(0,Gp.jsx)("span",{style:{display:"inline-block",width:"12px",height:"12px",border:"2px solid rgba(231,76,60,0.3)",borderRadius:"50%",borderTopColor:"#e74c3c",animation:"spin 1s linear infinite",marginRight:"5px",verticalAlign:"middle"}}),"Procesando ",s.length," solicitudes..."]}):(0,Gp.jsxs)(Gp.Fragment,{children:[(0,Gp.jsx)("span",{style:{color:"#2ecc71",marginRight:"5px"},children:"\u25cf"}),s.length," solicitudes pendientes"]})}),(0,Gp.jsx)("span",{style:{fontWeight:"bold",marginRight:"5px"},children:"\xdaltima actualizaci\xf3n:"}),f?new Intl.DateTimeFormat("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(f):"No disponible",!a&&(0,Gp.jsxs)("span",{style:{marginLeft:"10px",color:"#555",fontSize:"13px",display:"flex",alignItems:"center"},children:[(0,Gp.jsx)("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:g<=10?"#f39c12":"#3498db",marginRight:"4px",opacity:g%2===0?.7:1,animation:"pulse 1s infinite",transition:"background-color 0.3s"}}),(0,Gp.jsx)("span",{style:{marginRight:"3px"},children:g<=5?"Actualizando pronto...":"Pr\xf3xima actualizaci\xf3n en:"}),(0,Gp.jsxs)("span",{style:{fontWeight:"bold",marginLeft:"3px",color:g<=10?"#e67e22":"#2980b9"},children:[g,"s"]}),(0,Gp.jsx)("style",{children:"\n                @keyframes pulse {\n                  0% { opacity: 0.4; transform: scale(0.95); }\n                  50% { opacity: 1; transform: scale(1.05); }\n                  100% { opacity: 0.4; transform: scale(0.95); }\n                }\n              "})]})]})]}),"asignaciones"===L&&(0,Gp.jsxs)("div",{style:q.cardContainer,children:[(0,Gp.jsx)("h3",{style:q.sectionTitle,children:"Historial de Asignaciones"}),(0,Gp.jsx)(Wp,{assignments:n})]}),"solicitudes"===L&&(0,Gp.jsxs)("div",{style:q.cardContainer,children:[(0,Gp.jsx)("h3",{style:q.sectionTitle,children:"Solicitudes Pendientes"}),(0,Gp.jsx)(Yp,{solicitudes:s,availablePlazas:e,assignments:n})]}),"plazas"===L&&(0,Gp.jsxs)("div",{style:q.cardContainer,children:[(0,Gp.jsx)("h3",{style:q.sectionTitle,children:"Plazas Disponibles"}),e.length>0?(0,Gp.jsx)(Qp,{availablePlazas:e,assignments:n,searchTerm:T,setSearchTerm:I,orderNumber:y,setOrderNumber:v,centrosSeleccionados:b,setCentrosSeleccionados:w,handleOrderSubmit:async e=>{e.preventDefault();const t=parseInt(y,10);if(isNaN(t)||t<=0)return void V("Por favor, introduce un n\xfamero de orden v\xe1lido","error");if(0===b.length)return void V("Por favor, selecciona al menos un centro de trabajo","error");const r=n.find((e=>e.order===t));r&&(E(r),V(`Ya tienes una plaza asignada en: ${r.centro}. Puedes seguir enviando solicitudes para otras plazas que te interesen aunque ya tengas una asignada.`,"warning")),S(!0);try{const e=b.map((e=>Number(e)));console.log("Intentando guardar solicitud con centros:",e);const n=s.find((e=>e.orden===t)),r={orden:t,centrosIds:e,timestamp:Date.now()};if(n){console.log("Actualizando solicitud existente:",n.docId);const t=Eh(Kp,"solicitudesPendientes",n.docId);await vf(t,r),console.log("Solicitud actualizada correctamente"),v(""),w([]),V(`Tu solicitud ha sido actualizada con ${e.length} centros seleccionados. Se procesar\xe1 autom\xe1ticamente. Recuerda: menor n\xfamero de orden = mayor prioridad.`,"success"),await $()}else{console.log("Creando nueva solicitud");const t=await wf(kh(Kp,"solicitudesPendientes"),r);console.log("Nueva solicitud creada con ID:",t.id),v(""),w([]),V(`Tu solicitud con ${e.length} centros ha sido registrada. Se procesar\xe1 autom\xe1ticamente cada minuto priorizando por n\xfamero de orden.`,"success"),await $()}S(!1)}catch(eg){console.error("Error al guardar solicitud:",eg),V("Error al guardar la solicitud: "+eg.message,"error"),S(!1)}},isProcessing:x}):(0,Gp.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",backgroundColor:"#f5f7fa",borderRadius:"8px",color:"#5c6c7c"},children:[(0,Gp.jsx)("div",{style:{fontSize:"36px",marginBottom:"15px"},children:"\ud83c\udfe2"}),(0,Gp.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},children:"Cargando plazas..."}),(0,Gp.jsx)("div",{style:{fontSize:"14px",marginBottom:"20px"},children:"Por favor espera mientras se cargan los datos de los centros."}),(0,Gp.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,Gp.jsx)("div",{style:{width:"20px",height:"20px",border:"3px solid rgba(0,0,0,0.1)",borderRadius:"50%",borderTopColor:"#3498db",animation:"spin 1s linear infinite"}}),(0,Gp.jsx)("div",{children:"Cargando datos..."})]})]})]}),(0,Gp.jsx)(Xp,{}),C&&(0,Gp.jsx)("div",{style:{...q.popup,backgroundColor:"success"===D?"#d4edda":"warning"===D?"#fff3cd":"#f8d7da",color:"success"===D?"#155724":"warning"===D?"#856404":"#721c24"},children:(0,Gp.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,Gp.jsx)("div",{style:{flex:1},children:N}),(0,Gp.jsx)("button",{onClick:()=>_(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",marginLeft:"10px",color:"inherit"},children:"\xd7"})]})}),(a||d)&&(0,Gp.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},children:(0,Gp.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 0 20px rgba(0,0,0,0.2)",maxWidth:"500px",width:"90%",textAlign:"center"},children:[(0,Gp.jsx)("div",{style:{marginBottom:"15px",fontSize:"18px"},children:d?"Cargando datos...":"Procesando solicitudes..."}),(0,Gp.jsx)("div",{children:u}),(0,Gp.jsx)("div",{style:{width:"100%",height:"4px",backgroundColor:"#f1f1f1",borderRadius:"2px",marginTop:"15px",overflow:"hidden",position:"relative"},children:(0,Gp.jsx)("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"30%",backgroundColor:"#3498db",borderRadius:"2px",animation:"loading 1.5s infinite ease-in-out"}})})]})}),(0,Gp.jsx)("style",{children:"\n        @keyframes slideIn {\n          0% { transform: translateX(100%); opacity: 0; }\n          100% { transform: translateX(0); opacity: 1; }\n        }\n        @keyframes loading {\n          0% { left: -30%; }\n          100% { left: 100%; }\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})},Zp=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,Gp.jsx)(r.StrictMode,{children:(0,Gp.jsx)(Jp,{})})),Zp()})();
//# sourceMappingURL=main.0e478b97.js.map